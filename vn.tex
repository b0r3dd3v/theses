\documentclass[main]{subfiles}
\begin{document}
\section{Von Neumann algebras}
%
% von Neumann algebras
%
\begin{parsec}[vna]%
\begin{point}{Definition}%
A $C^*$-algebra~$\scrA$
is a \Define{von Neumann algebra}
when
\begin{enumerate}
\item
every bounded directed subset~$D$
of self-adjoint elements of~$\scrA$ (so $D\subseteq \sa{\scrA}$) 
has a supremum $\bigvee D$ in $\sa{\scrA}$, and
\item
if $a$ is a positive element of~$\scrA$
with $\omega(a)=0$ for every \emph{normal} (see below) positive 
linear map $\omega\colon \scrA\to \C$,
then~$a=0$.
\end{enumerate}
\begin{point}%
A positive linear map $\omega\colon \scrA\to \C$
is called \Define{normal}
if $\omega(\bigvee D) = \bigvee_{d\in D} \omega(d)$
for every bounded directed subset of self-adjoint elements of~$D$
which has a supremum $\bigvee D$ in $\sa{\scrA}$.
\end{point}%
\begin{point}%
The \Define{ultraweak topology} on $\scrA$
is the least topology on~$\scrA$
that makes all normal positive linear maps $\omega\colon \scrA\to \C$
continuous.
\end{point}
\end{point}
\end{parsec}
%
% multiplication turns suprema into ultraweak limits
%
\begin{parsec}[vanishing-effects]%
\begin{point}{Lemma}%
Let~$(x_\alpha)_\alpha$ be 
a net of effects of a von Neumann algebra~$\scrA$
which converges ultraweakly to~$0$.
Then $(x_\alpha a)_\alpha$ converges ultraweakly
to $0$ for every~$a\in\scrA$.
\end{point}
\begin{point}{Proof}%
Let~$\omega\colon \scrA\to \C$ be a normal positive linear map.
We have, for each~$\alpha$,
\begin{alignat*}{3}
\left|\,\omega(x_\alpha a)\,\right|^2
\ &=\ 
\left|\, \omega(\,\sqrt{x_\alpha}\,\sqrt{x_\alpha}\,a\,)\, \right|^2
\qquad&&\text{since $x_\alpha\geq 0$}\\
\ &\leq\ 
\omega(x_\alpha)\  \omega(\,a^* x_\alpha a\,) 
\qquad&&\text{by \sref{cstar-cs}}\\
\ &\leq\ 
\omega(x_\alpha)\ \omega(a^*a)
\qquad&&\text{since $x_\alpha\leq 1$}.
\end{alignat*}
Thus,
since $(\omega(x_\alpha))_\alpha$
converges to~$0$,
we see that $(\omega(x_\alpha a))_\alpha$
converges to~$0$,
and so $(x_\alpha a)_\alpha$ converges ultraweakly to~$0$.
\end{point}
\end{parsec}
\begin{parsec}%
\begin{point}{Exercise}
Let~$D$ be a bounded directed set of self-adjoint
elements of a von Neumann algebra~$\scrA$,
and let~$a\in \scrA$.
\begin{point}[vna-supremum-uwlimit]%
Show that the net~$(d)_{d\in D}$ converges ultraweakly to~$\bigvee D$.
\end{point}
\begin{point}[vna-supremum-mult]%
Use~\sref{vanishing-effects}
to show that $(da)_d$ converges ultraweakly to~$(\bigvee D)a$,
and that~$(a^*d)_d$ converges ultraweakly to~$a^* (\bigvee D)$.
\end{point}
\begin{point}[vna-supremum-commutes]%
Show that if~$ad=da$ for all~$d\in D$,
then $a(\bigvee D) = (\bigvee D)a $.
\end{point}
\end{point}
\end{parsec}
%
%  ad is normal
%
\begin{parsec}[ad-normal]%
\begin{point}{Proposition}%
Let~$a$ be an element of a von Neumann algebra~$\scrA$.
Then~$\bigvee_{d\in D} a^*\,d\,a = a^*\,(\bigvee D)\, a$
for every bounded directed subset~$D$ of self-adjoint
elements of~$\scrA$.
\end{point}
\begin{point}[ad-normal-1]{Proof}%
If~$a$ is invertible,
then the (by~\sref{ad-monotone}) order preserving map $b\mapsto a^*ba$
has an order preserving inverse (namely $b\mapsto (a^{-1})^* b a^{-1}$),
and therefor preserves all suprema.
\begin{point}%
The general case reduces to the case that~$a$ 
is invertible
in the following way.
There is (by~\sref{spectrum-bounded})
 $\lambda>0$ such that $\lambda+a$ is invertible.
Then as $d$ increases 
\begin{equation*}
a^*\,d\,a \ \equiv\  (\lambda+a)^*\,d\,(\lambda+a) \,-\,
 \lambda^2 \,-\, \lambda a^*d \,-\, \lambda da
\end{equation*}
converges ultraweakly
to~$a^* \,(\bigvee D)\,a$,
because $(\ (\lambda+a)^*\,d\,(\lambda+a)\ )_d$
converges ultraweakly to $(\lambda+a)^*\,(\bigvee D)\,(\lambda+a)$
by~\sref{ad-normal-1} and~\sref{vna-supremum-uwlimit},
and $(a^*d+da)_d$ converges ultraweakly to $a^*(\bigvee D)+(\bigvee D)a$
by~\sref{vna-supremum-mult}.
Since~$(a^*da)_d$ converges to~$\bigvee_{d\in D} a^*d a$ too,
we conclude that~$\bigvee_{d\in D} a^* \,d\, a = a^*\,(\bigvee D)\,a$.
\end{point}
\end{point}
\end{parsec}



\subsection{Projections}
Let us now turn to the projections in a von Neumann algebra.

\TODO{Supremum/infimum of projections}

\TODO{Relation between  $\floor{\cdot}$, $\ceil{\cdot}$ and NCPsU-maps}

\TODO{NCPsU-maps with sharp $f(1)$ as restriction category}

\TODO{Central carier and von Neumann--Murray equivalence (for Paschke.)}

\TODO{$\ceil{pqp}=p\cdot q$ (Sakai product) and counter-example non-projections}

\TODO{$\floor{aba}=\floor{a}\cap \floor{b}$}



\begin{parsec}[ad-contraposed]%
\begin{point}{Lemma}%
Let~$a$ be an element of a $C^*$-algebra~$\scrA$
with $\|a\|\leq 1$,
and let~$p$ and~$q$ be projections on~$\scrA$.
Then 
$a^* p a \leq q^\perp$
iff $paq=0$
iff  $aqa^*\leq p^\perp$.
\end{point}
\begin{point}{Proof}%
Suppose that~$a^*pa\leq q^\perp$.
Then we have $q a^*pa q \leq qq^\perp q = 0$
(see \sref{ad-monotone})
and so $paq=0$,
because $\|paq\|^2=\|(paq)^*paq\|=0$
by the $C^*$-identity.
Applying $(\,\cdot\,)^*$,
we get $qa^*p=0$, and so both $qa^* = qa^*p^\perp$
and $aq = p^\perp aq$, giving
us $aqa^* = p^\perp a q a^* p^\perp 
\leq p^\perp$,
where we used that $aqa^*\leq aa^*\leq \|aa^*\|=\|a\|^2\leq 1$.
By a similar reasoning,
we get $aqa^*\leq p^\perp \implies paq=0\implies a^*pa\leq q^\perp$.
\end{point}
\end{parsec}
\begin{parsec}%
\begin{point}{Exercise}%
Let~$a$ be an effect of a $C^*$-algebra~$\scrA$,
and~$p$ be a projection from~$\scrA$.
\begin{point}[projection-above-effect]%
Show that $a\leq p$
iff $p\sqrt{a} = \sqrt{a}$
iff $\sqrt{a}p = \sqrt{a}$
iff $p^\perp\sqrt{a} = 0$
iff $\sqrt{a}p^\perp = 0$
iff $a^2\leq p$
iff $p a  = a$
iff $ a p = a $
iff $p^\perp a  = 0$
iff $ap^\perp = 0$
iff $\sqrt{a}\leq p$.
\end{point}
\begin{point}[projection-below-effect]%
Show that $p\leq a$
iff $p \sqrt{a} = p$
iff $\sqrt{a} p = p$
iff $ p\sqrt{a}^\perp = 0$
iff $\sqrt{a}^\perp p = 0$
iff $p\leq a^2$
iff $ap=p$
iff $pa = p$
iff $pa^\perp =0$
iff $a^\perp p =0$
iff $p\leq \sqrt{a}$.
\end{point}
\end{point}
\begin{point}[projection-below-projection]{Exercise}%
Let~$p$ and~$q$ be projections from a $C^*$-algebra
with~$p\leq q$.\\
Show that~$q-p$ is a projection.
\end{point}
\end{parsec}

%
% Projections
%
\begin{parsec}[vna-ceil]%
\begin{point}{Proposition}%
Above every effect~$b$ of a von Neumann algebra~$\scrA$,
there is a smallest projection, \Define{$\ceil{b}$},
called the \Define{ceiling} of~$b$,
 given by $\ceil{b}=\bigvee_{n=0}^\infty b^{\nicefrac{1}{2^n}}$.
\begin{point}[vna-ceil-commutes]%
Moreover, if $a\in \scrA$ commutes with $b$,
then~$a$ commutes with~$\ceil{b}$.
\end{point}
\end{point}
\begin{point}{Proof}
Let~$p$ denote the supremum of~$0\leq b\leq b^{\nicefrac{1}{2}}\leq
b^{\nicefrac{1}{4}}\leq\dotsb\leq 1$.
\begin{point}[vna-ceil-point-1]%
To begin,
note that if~$a\in \scrA$
commutes with~$b$,
then~$a$ commutes with~$p$.
Indeed, for such~$a$ we have~$a\sqrt{b}=\sqrt{b}a$
by~\sref{cstar-square-commutes},
and so $a b^{\nicefrac{1}{2^n}} = b^{\nicefrac{1}{2^n}} a$
for each~$n$
by induction.
Thus~$ap=pa$ by~\sref{vna-supremum-commutes}.
\end{point}
\begin{point}%
Let us prove that~$p$ is a projection, c.q.~$p^2=p$. 
Since~$p\leq 1$, we already have $p^2\equiv \sqrt{p}p\sqrt{p}\leq p$
by~\sref{ad-monotone},
and so we only need to show that $p\leq p^2$. We have:
\begin{alignat*}{3}
 p^2 \ &=\  \textstyle \bigvee_m \sqrt{p} \,b^{\nicefrac{1}{2^m}} \,\sqrt{p}
\qquad&&\text{by \sref{ad-normal}} \\
&=\ \textstyle\bigvee_m b^{\nicefrac{1}{2^{m+1}}}\, p\,
b^{\nicefrac{1}{2^{m+1}}} 
\qquad&&\text{by \sref{vna-ceil-point-1} and \sref{cstar-square-commutes}} \\
&=\ \textstyle \bigvee_m \bigvee_n \, 
b^{\nicefrac{1}{2^{m+1}}}\, b^{\nicefrac{1}{2^n}}\,
b^{\nicefrac{1}{2^{m+1}}} \qquad && \text{by \sref{ad-normal}}
\end{alignat*}
Thus $p^2 \geq b^{\nicefrac{1}{2^k}}$
for each~$k$ (taking $n=m=k+1$,)
and so~$p^2 \geq p$.
\end{point}
\begin{point}%
It remains to be shown that~$p$ is the \emph{least} projection
above~$b$.
Let~$q$ be a projection in~$\scrA$ with $b\leq q$;
we must show that~$q\leq p$.
We have $b^{\nicefrac{1}{2}}\leq q$
by~\sref{projection-above-effect},
and so $b^{\nicefrac{1}{2^n}}\leq q$ for each~$n$ by induction.
Hence $p\leq q$.
\end{point}
\end{point}
\end{parsec}

%
%	floor
%
\begin{parsec}[vna-floor]%
\begin{point}{Proposition}%
Below every effect~$b$ of a von Neumann algebra~$\scrA$,
there is greatest projection, $\floor{b}$,
called the \Define{floor} of~$b$,
given by~$\floor{b} = \bigwedge_{n=0}^\infty b^{2^{n}}$.
\begin{point}%
Moreover, if~$a\in \scrA$ commutes with~$b$,
then~$b$ commutes with~$\floor{b}$.
\end{point}
\end{point}
\begin{point}{Proof}%
Let~$p$ denote the infimum of $1\geq b\geq b^2 \geq b^4 \geq  \dotsb \geq 0$.
\begin{point}[vna-floor-point-1]%
If~$a\in \scrA$ commutes with~$b$,
then~$a$ commutes with~$p$.
Indeed, such~$a$ commutes with~$b^2$ (because
$ab^2 = bab = b^2a$,)
and so~$a$ commutes with~$b^{2^n}$ for each~$n$ by induction.
Thus~$a$ commutes with~$p\equiv\bigwedge_n b^{2^n}$ 
(by a variation on~\sref{vna-supremum-commutes}.)
\end{point}
\begin{point}%
To see that~$p$ is a projection, c.q.~$p^2=p$,
we only need to show that~$p\leq p^2$,
because we get $p^2\equiv \sqrt{p}\,p\,\sqrt{p}\leq p$
from $p\leq 1$ (using~\sref{ad-monotone}.)
Now, since
\begin{alignat*}{3}
p^2 \ &=\ \textstyle \bigwedge_m\  \sqrt{p}\, b^{2^m} \sqrt{p}\qquad
&&\text{by a variation on~\sref{ad-normal}}\\
&=\ \textstyle \bigwedge_m \ b^{2^{m-1}} p\, b^{2^{m-1}}\qquad
&&\text{by~\sref{vna-floor-point-1} and~\sref{cstar-square-commutes}}\\
&=\ \textstyle \bigwedge_m \bigwedge_n \ 
b^{2^{m-1}}\, b^{2^n}\, b^{2^{m-1}}\qquad
&&\text{by~\sref{ad-normal},}
\end{alignat*}
and $p\leq b^{2^{m-1}}\, b^{2^n}\,b^{2^{m-1}}$
for all~$n,m$, we get~$p\leq p^2$.
\end{point}
\begin{point}%
It remains to be shown that~$p$ is the greatest projection above~$b$.
Let~$q$ be a projection in~$\scrA$ with~$q\leq b$
we must show that~$q\leq p$.
Since~$q\leq b$,
we have~$q\leq b^2$ (by~\sref{projection-below-effect}),
and so~$q\leq b^{2^n}$ for each~$n$ by induction.
Thus~$q\leq p\equiv\bigwedge_n b^{2^n}$.
\end{point}
\end{point}
\end{parsec}
%
%
%
\begin{parsec}%
\begin{point}{Exercise}%
Let~$a,b$ be effects of a von Neumann algebra~$\scrA$,
and let~$\lambda\in [0,1]$.
\begin{point}%
Show that $\ceil{a}^\perp = \floor{a^\perp}$
and $\floor{a}^\perp = \ceil{a^\perp}$.
\end{point}
\begin{point}[vna-binary-supremum-projections]%
Show that~$\ceil{\lambda a} = \ceil{a}$
when~$\lambda\neq 0$.
Use this to prove that~$\ceil{\lambda a+\lambda^\perp b}$
is the supremum of~$\ceil{a}$ and~$\ceil{b}$
in the poset of projections of~$\scrA$
when~$\lambda\neq 0$ and~$\lambda\neq 1$.
\end{point}
\begin{point}[vna-floor-square]%
Show that $\floor{a}=\floor{a^2}$.
\end{point}
\end{point}
\end{parsec}

%
%	directed supremum of projections
%
\begin{parsec}%
\begin{point}[vna-directed-supremum-projections]{Lemma}%
The supremum of a directed set~$D$ of projections
from a von Neumann algebra~$\scrA$ is a projection.
\end{point}
\begin{point}{Proof}%
Writing $p=\bigvee D$,
we must show that $p^2=p$.
Note that $dp=d$ for all~$d\in D$
(by~\sref{projection-below-effect} because~$d\leq p$.)
Now, on the one hand, $(d)_{d\in D}$
converges ultraweakly to~$p$.
On the other hand,
$(dp)_{d\in D}$
converges ultraweakly to~$p^2$ by~\sref{vna-supremum-mult}.
Hence~$p=p^2$ by uniqueness of ultraweak limits.
\end{point}
\begin{point}{Exerise}%
Deduce from this result
 that every set~$A$ of projections from~$\scrA$
has a supremum $\Define{\bigcup A}$
and an infimum $\Define{\bigcap A}$
\emph{in the poset of projections from~$\scrA$}.\\
(Hint: use~\sref{vna-binary-supremum-projections},
and the fact that $p\mapsto p^\perp$ 
is an order isomorphism on the poset of projections on~$\scrA$.)
\end{point}
\end{parsec}
%
%
%
\begin{parsec}[floor-sequential-product]%
\begin{point}{Lemma}%
Let~$a,b$ be effects of a von Neumann algebra~$\scrA$.
Then~$\floor{\sqrt{a}b\sqrt{a}}$ is the greatest projection
below~$a$ and~$b$, that is, in symbols, 
$\floor{\sqrt{a}b\sqrt{a}}=\floor{a}\cap \floor{b}$.
\end{point}
\begin{point}{Proof}%
Surely, $\floor{\sqrt{a}b\sqrt{a}}\leq \sqrt{a}b\sqrt{a} \leq a$.
Let us prove that~$\floor{\sqrt{a}b\sqrt{a}}\leq b$.
To this end,
recall
that (by~\sref{projection-below-effect})
a projection~$e$ is below an effect~$c$
iff $ec=e$ iff $e\sqrt{c}=e$.
In particular,
since~$\floor{\sqrt{a}b\sqrt{a}}\leq \sqrt{a}b\sqrt{a}$ and 
$\floor{\sqrt{a}b\sqrt{a}}\leq a$,
we get
\begin{equation*}
\floor{\sqrt{a}b\sqrt{a}}
\ =\ \floor{\sqrt{a}b\sqrt{a}}\sqrt{a}b\sqrt{a}\floor{\sqrt{a}b\sqrt{a}} \ =\ 
\floor{\sqrt{a}b\sqrt{a}}b\floor{\sqrt{a}b\sqrt{a}},
\end{equation*}
and so $\floor{\sqrt{a}b\sqrt{a}}b^\perp\floor{\sqrt{a}b\sqrt{a}}=0$,
which implies that
$\floor{\sqrt{a}b\sqrt{a}}\leq b$ by~\sref{ad-contraposed}.
\begin{point}%
Now,
let~$e$ be a projection below~$a$ and~$b$,
that is, $e\sqrt{a}=e$ and~$eb=e$.
We must show that~$e\leq \floor{\sqrt{a}b\sqrt{a}}$,
or equivalently, $e\leq \sqrt{a}b\sqrt{a}$,
or put yet differently, $e\sqrt{a}b\sqrt{a}=e$.
But this is obvious: $e=e\sqrt{a}=eb\sqrt{a}=e\sqrt{a}b\sqrt{a}$.
\end{point}
\end{point}
\end{parsec}

\begin{parsec}%
\begin{point}%
Having seen that~$\floor{\sqrt{a}b\sqrt{a}} = \floor{a}\cap\floor{b}$
in~\sref{floor-sequential-product}
one might wonder whether
there is a similar expression for $\ceil{\sqrt{a}b\sqrt{a}}$.
If~$a$ and~$b$ are projection,
$\ceil{aba}$ turns out to coincide with the \Define{Sasaki product},
$a\cap (a^\perp \cup b)$,
as we will show below.
\TODO{Reference for the Sasaki product.}
\TODO{Thank Kenta}
\end{point}
\begin{point}[floor-difference]{Lemma}%
Let~$p$ be a projection,
and let~$a$ be an effect of a von Neumann algebra
with $a\leq p$.
We have $p-\ceil{a}=\floor{p-a}$.
\end{point}
\begin{point}{Proof}%
We must show that $p-\ceil{a}$ is the greatest projection below $p-a$.
To begin, $p-\ceil{a}\leq p-a$,
because $a\leq \ceil{a}$.
Further, since~$a\leq p$, we have $\ceil{a}\leq p$,
and so~$p-\ceil{a}$ is a projection
(by~\sref{projection-below-projection}).
\begin{point}%
Let~$q$ be a projection below~$p-a$.
We must show that~$q\leq p-\ceil{a}$.
The trick is to note that~$a\leq p-q$.
Since~$p-q$ is a projection (by~\sref{projection-below-projection}
because $q\leq p-a\leq p$),
we have $\ceil{a}\leq p-q$,
and so $q\leq p-\ceil{a}$.
\begin{point}[ceil-sequential-product]{Lemma}%
For projections $p,q$ from a von Neumann algebra,
$\ceil{pqp}=p\cap (p^\perp \cup q)$.
\end{point}
\end{point}
\end{point}
\begin{point}[ceil-sequential-product-1]{Proof}%
Observe that $(\ p\cap (p^\perp \cup q)\ )^\perp 
= p^\perp \cup(p\cap q^\perp)$.
Since~$p^\perp$ and $p\cap q^\perp$ are disjoint,
we have $p^\perp \cup (p\cap q^\perp) = p^\perp + p\cap q^\perp$,
and so $p\cap (p^\perp \cup q) = p-p\cap q^\perp$.
\begin{point}%
By point~\sref{ceil-sequential-product-1}, 
it suffices to show that~$\ceil{pqp}=p- p\cap q^\perp$,
that is, $p-\ceil{pqp}=p\cap q^\perp$.
Since $p-\ceil{pqp} = \floor{p-pqp}$
by~\sref{floor-difference} and $\floor{pq^\perp p}=p\cap q^\perp$
by~\sref{floor-sequential-product} we are done.
\end{point}
\end{point}
\end{parsec}

%
% About maps between von Neumann algebras
%

\begin{parsec}%
\begin{point}{Proposition}%
For a cp-map~$f\colon \scrA\to\scrB$
 between $C^*$-algebras, and $a,b\in\scrA$, 
\begin{equation*}
f(b^*a)\,f(a^*b)\ \leq\ \|f(a^*a)\|\,f(b^*b).
\end{equation*}
\end{point}%
\begin{point}{Proof}%
\TODO{add}
\end{point}
\end{parsec}
%
%
%
\begin{parsec}%
\begin{point}{Exercise}%
Let~$f\colon \scrA\to\scrB$ be a ncpsu-map
between von Neumann algebras
with~$f(1)\leq 1$,
and let~$a\in \scrA$ be positive.
\begin{point}[cp-kadisons-ineq]%
Show that~$f(a)^2 \leq f(a^2)$.
\end{point}
\begin{point}%
Use this, and~\sref{cstar-sqrt-monotone},
to show that~$f(a^{\nicefrac{1}{2}}) \leq f(a)^{\nicefrac{1}{2}}$.
\end{point}
\begin{point}[cpsu-2nthroot]%
Go on, and show that $f(a^{\nicefrac{1}{2^n}})
\leq f(a)^{\nicefrac{1}{2^n}}$ for each~$n$.
\end{point}
\end{point}
\end{parsec}

%
%
%
\begin{parsec}%
\begin{point}{Proposition}%
Let $f\colon \scrA\to\scrB$ be a ncpsu-map
between von Neumann algebras.
Then $\ceil{f(a)}=\ceil{f(\ceil{a})}$
for every effect~$a$ from~$\scrA$.

\TODO{Use Kadison's inequality instead of complete positivity?}
\end{point}
\begin{point}{Proof}%
Since~$a\leq \ceil{a}$
we have $f(a)\leq f(\ceil{a})$,
and so~$\ceil{f(a)}\leq \ceil{f(\ceil{a})}$.
\begin{point}%
It remains to be shown that $\ceil{f(\ceil{a})}\leq \ceil{f(a)}$,
that is, $f(\ceil{a})\leq \ceil{f(a)}$.
Since  $\ceil{a}=\bigvee_n a^{\nicefrac{1}{2^n}}$ 
(by~\sref{vna-ceil})
and~$f$ is normal,
we have $f(\ceil{a})=\bigvee_n f(a^{\nicefrac{1}{2^n}})$.
Now, since $f(a^{\nicefrac{1}{2^n}})\leq f(a)^{\nicefrac{1}{2^n}}
\leq \ceil{f(a)}$
by~\sref{cpsu-2nthroot} for each~$n$,
we have~$f(\ceil{a})\leq \ceil{f(a)}$.
\end{point}
\end{point}
\end{parsec}
%
%
%
\begin{parsec}%
\begin{point}{Proposition}%
Let~$f\colon \scrA\to\scrB$ be a ncpsu-map
between von Neumann algebras.
Then~$\floor{f(a)}=\floor{f(\floor{a})}$
for every effect~$a$ from~$\scrA$.
\end{point}
\begin{point}{Proof}%
Since~$\floor{a}\leq a$,
we have~$\floor{f(\floor{a})}\leq \floor{f(a)}$.
Thus we only need to show that~$\floor{f(a)}\leq \floor{f(\floor{a})}$,
or equivalently, $\floor{f(a)}\leq f(\floor{a})$.
We have
\begin{equation*}
\floor{f(a)}
\ \stackrel{\sref{vna-floor-square}}{=}\ 
\floor{f(a)^2}
\ \stackrel{\sref{cp-kadisons-ineq}}{\leq}\  
\floor{f(a^2)} \ \leq\ \floor{f(a)},
\end{equation*}
and so~$\floor{f(a)}=\floor{f(a^2)}$.
By induction,
and similar reasoning,
we get~$\floor{f(a)}=\floor{f(a^{2^n})}\leq f(a^{2^n})$
for every~$n$,
and so
$\floor{f(a)}\leq \bigwedge_n f(a^{2^n})
= f(\bigwedge_n a^{2^n})=f(\floor{a})$,
where we used that~$f$ is normal,
and~$\floor{a}=\bigwedge_n a^{2^n}$ (see~\sref{vna-floor}).
\end{point}
\end{parsec}

\begin{parsec}%
\begin{point}%
Parsec about commutative $C^*$-algebras:
\end{point}
\begin{point}[ccstar-proj]{Theorem}%
The projections~$\Proj(\scrA)$ of a commutative $C^*$-algebra~$\scrA$
form a Boolean algebra.
If~$\scrA$ is monotone complete,
then~$\Proj(\scrA)$ is a complete Boolean algebra.
\end{point}
\end{parsec}

\begin{parsec}%
\begin{point}%
Let us now turn to quotients of von Neumann algebras.
Recall that given a norm closed two-sided ideal~$\scrD$
of a $C^*$-algebra $\scrA$
we can form the quotient $\scrA/\scrD$,
(which is again a $C^*$-algebra),
and the quotient map $q\colon \scrA\to \scrA/\scrD$
which is a \textsc{miu}-map.
If~$\scrA$ is a von Neumann algebra,
then~$\scrA/\scrD$ might not be a von Neumann algebra,
either because~$\scrA/\scrD$ is not be monotone complete 
(see~\sref{vn-quotient-not-monotone-complete}),
or because~$\scrA/\scrD$ does not have a separating set of normal states
(see~\TODO{}).
However, if~$\scrD$ is ultraweakly closed,
then~$\scrA/\scrD$ is a von Neumann algebra,
as one might have suspected.
To prove this,
we need the somewhat surprising
fact that every ultraweakly closed
ideal~$\scrD$ is of the form $\scrD\equiv c\scrA$,
where~$c$ is a central projection~$c$ of~$\scrA$.
(The quotient~$\scrA/c\scrA$ is then simply~$c^\perp\scrA$.)
\TODO{connection between uw-closed ideals and central projections}
\TODO{universal property for \textsc{n(c)p(s)(u)}-maps}
\end{point}
\begin{point}[vn-quotient-not-monotone-complete]{Example}%
The quotient of a von Neumann algebra
by an closed ideal
need not be a von Neumann algebra:
we will show that $\ell^\infty/c_0$
is not monotone complete,
where~$\ell^\infty$ is the von Neumann algebra
of bounded sequences,
and~$c_0\subseteq \ell^\infty$
is the norm closed ideal of
sequences which converge to~$0$.
By~\sref{ccstar-proj}
it suffices to show that the Boolean algebra~$\Proj(\ell^\infty/c_0)$
of projections of~$\ell^\infty/c_0$ is not complete.
\begin{point}%
We claim that $\Proj(\ell^\infty/c_0)$
is isomorphic to the Boolean algebra
 $\wp(\N)/\wp_{fin}(\N)$
of subsets of~$\N$ modulo 
the filter~$\wp_{fin}(\N)$ of finite subsets.

It is easy to see that the assignment $A\mapsto [\mathbf{1}_A]_{c_0}$
(where $\mathbf{1}_A$ is the indicator function of~$A$)
gives a Boolean algebra homomorphism 
$f\colon \wp(\N)\to \Proj(\ell^\infty/c_0)$,
that the kernel of~$f$
is $\wp_{fin}(\N)$
(because for $A\subseteq \N$
we have $\mathbf{1}_A\in c_0$ iff $A$ is finite).
It remains to be shown that~$f$ is surjective,
which requires some fiddling.

Let~$\alpha\in \ell^\infty$
be
such that $[\alpha]_{c_0}$ is a projection in $\ell^\infty/c_0$.
We claim that
$\mathbf{1}_A - \alpha \in c_0$ (and so $\alpha=f(A)$)
for some~$A\subseteq \N$.
Note that since $[\alpha]_{c_0}$ is self-adjoint,
we have $[\alpha]_{c_0}=(\,[\alpha]_{c_0}\,)_\R = [\,\alpha_\R\,]_{c_0}$,
and so we may assume without loss of generality
that~$\alpha$ is self-adjoint
(replacing $\alpha$ by $\alpha_\R$ is necessary).
Define $A=\{n\in\N\colon \left|1-\alpha(n)\right|<\frac{1}{2}\}$.

Let~$\varepsilon>0$ with $\varepsilon<\nicefrac{1}{2}$ be given.
We must find~$N\in\N$ with 
$\left| \mathbf{1}_A(n)-\alpha(n)\right|\leq \varepsilon$
for all~$n\geq N$.
Since~$[\alpha]_{c_0}$ is a projection,
$\alpha-\alpha^2\in c_0$,
and so
there is~$N\in \N$
with $\left|\alpha(n)\right| \,\left| 1-\alpha(n)\right|
\,\equiv\, \left| \alpha(n) - \alpha(n)^2 \right| \leq 
\nicefrac{1}{2}\,\varepsilon < \nicefrac{1}{4}$
for all~$n\geq N$.

Let~$n\geq N$ be given.
Note that either 
$\left|1-\alpha(n)\right|\geq \nicefrac{1}{2}$
or 
$\left|\alpha(n)\right|\geq \nicefrac{1}{2}$.
If~$\left|1-\alpha(n)\right|\geq\nicefrac{1}{2}$,
then $\mathbf{1}_A(n)=0$
(by definition of~$A$),
and so $\left|\mathbf{1}_A(n)-\alpha(n)\right|\equiv \left|\alpha(n)\right| 
\leq 2 \,\left|\alpha(n)\right|\,\left| 1-\alpha(n)\right|
\leq \varepsilon$.
On the other hand,
if  $\left|\alpha(n)\right| \geq \nicefrac{1}{2}$,
then $\left|1-\alpha(n)\right| < \nicefrac{1}{2}$
(because otherwise $\left|\alpha(n)\right|\left|1-\alpha(n)\right|
\geq \nicefrac{1}{4}$),
so $\mathbf{1}_A(n)=1$,
and thus
$\left|\mathbf{1}_A(n)-\alpha(n)\right|
\equiv \left|1-\alpha(n)\right|
\leq 2 \left|\alpha(n)\right|\left|1-\alpha(n)\right|
\leq \varepsilon$.

Hence $\mathbf{1}_A - \alpha \in c_0$,
and so~$f$ is surjective.
It follows that $\Proj(\ell^\infty/c_0)$
is isomorphic to $\wp(\N)/\wp_{fin}(\N)$.
\end{point}
\begin{point}%
We claim that the Boolean algebra~$\wp(\N)/\wp_{fin}(\N)$
is not complete.
To see this,
find a partition of~$\N$ into infinite subsets
$A_1,A_2,\dotsc$.
We claim that~$A_1,A_2,\dotsc$ has no supremum in~$\wp(\N)/\wp_{fin}(\N)$
because there is no minimal upper bound.
Indeed,
let~$A$ be an upper bound of~$A_1,A_2,\dotsc$ in~$\wp(\N)/\wp_{fin}(\N)$,
that is, $A_n\backslash A$ is finite for every~$n$;
we will define an upper bound~$A'$ of $A_1,A_2,\dotsc$
which is strictly below~$A$ in~$\wp(\N)/\wp_{fin}(\N)$.
Since~$A_n$ is infinite,
and~$A_n\backslash A$ is finite,
we can pick $a_n\in A_n\cap A$ for each~$n$.
Then~$A':=A \backslash \{a_1,a_2,a_3,\dotsc\}$
is an upper bound for~$A_1,A_2,\dotsc$,
because $A_n\backslash A' = (A_n\backslash A)\cup\{a_n\}$ is finite
for each~$n$,
and~$A'$ is strictly below~$A$ in~$\wp(\N)/\wp_{fin}(\N)$,
because $A'\backslash A$ is infinite.
Hence~$\wp(\N)/\wp_{fin}(\N)$
is not complete.
\end{point}
\begin{point}%
\TODO{connection with $\beta\N\backslash\N$
being non-Stonean.}
\end{point}
\end{point}
\begin{point}{Proposition}%
\label{prop:weakly-closed-ideal}
For every ultraweakly closed two-sided
ideal~$\mathscr{D}$ of a von Neumann algebra~$\scrA$
there is a unique central projection~$c\in\scrA$
such that $\mathscr{D} = c\scrA$.

Moreover, $c$ is the greatest projection in~$\mathscr{D}$.
\begin{point}{Proof}%
\emph{(if $a\in \mathscr{D}\cap [0,1]_{\scrA}$, 
then $\ceil{a}\in\mathscr{D}$)}\ 
Let~$a\in\mathscr{D}$ with $0\leq a \leq 1$
be given.
Recall that $\ceil{a}$
is the ultraweak limit of $a,\ a^{\frac{1}{2}},\ a^{\frac{1}{4}},\ \dotsc$.
Since~$\mathscr{D}$ is a $C^*$-subalgebra of~$\scrA$,
we have $a^{\frac{1}{2}}\in \mathscr{D}$.
Then $(a^{\frac{1}{2}})^{\frac{1}{2}} \equiv a^{\frac{1}{4}}\in \mathscr{D}$
by the same token,
and so on.
Thus, as~$\mathscr{D}$ is ultraweakly closed, $\ceil{a}\in\mathscr{D}$.

\emph{($\mathscr{D}\cap [0,1]_\scrA$ is directed)}\ 
Let~$a,b\in \mathscr{D}\cap[0,1]_\scrA$ be given.
We're looking for an element~$u\in \mathscr{D}\cap[0,1]_\scrA$
with $a\leq u$ and $b\leq u$.
Note that $\frac{1}{2}a + \frac{1}{2}b$
is in~$\mathscr{D}\cap[0,1]_{\scrA}$.
Define
$u:=\ceil{\frac{1}{2}a+\frac{1}{2}b}$.
Then  $u\in \mathscr{D}\cap[0,1]_\scrA$
by the previous point.
Now, 
as $\frac{1}{2}a \leq \frac{1}{2}a+\frac{1}{2}b \leq u$,
we have $a \leq \ceil{a} =\ceil{\frac{1}{2}a} \leq 
\ceil{ \frac{1}{2}a+\frac{1}{2}b} = u$.
Similarly, $b\leq u$.


\emph{($\mathscr{D}\cap [0,1]_\scrA$
has a greatest element, $c$)}\ 
As~$\mathscr{D}\cap[0,1]_\scrA$
is a directed subset of self-adjoint elements 
of~$\scrA$ bounded above by~$1$,
it has a supremum in~$\scrA_\mathrm{sa}$,
say~$c$.
As~$c$ is the ultraweak limit of~$(c)_{c\in \mathscr{D}\cap[0,1]_\scrA}$
and~$\mathscr{D}\cap[0,1]_\scrA$ is ultraweakly closed,
we have~$c\in \mathscr{D}\cap[0,1]_\scrA$.
Thus~$c$ is the greatest element of~$\mathscr{D}\cap[0,1]_\scrA$.

\emph{($c$ is a projection)}\ 
It suffices to show that~$c=\ceil{c}$ since~$\ceil{c}$ is a projection.
Since~$c\leq \ceil{c}$, it suffices to show that~$\ceil{c}\leq c$.
As before,~$c\in \mathscr{D}\cap[0,1]_\scrA$
entails~$\ceil{c}\in\mathscr{D}\cap[0,1]_\scrA$.
Thus~$\ceil{c}\leq c$, since~$c$ is the
greatest element of~$\mathscr{D}\cap[0,1]_\scrA$.
Hence~$c=\ceil{c}$ is a projection.

\emph{(for all $a\in \scrA$
we have: $a\in \mathscr{D}$ iff $ca=a$)}\ 
Since~$c\in \mathscr{D}$,
and~$\mathscr{D}$ is a two-sided ideal,
$ca\in \mathscr{D}$, and so $ca=a$ entails~$a\in\mathscr{D}$.
Thus we only need to show that~$a\in\mathscr{D}$
entails~$ca=a$.
Let~$a\in\mathscr{D}$
be given.
We must show that~$ca=a$.

If~$a\in [0,1]_\scrA$,
then this is clear:
$a\leq c$, since~$c$ is the greatest element
of~$\mathscr{D}\cap [0,1]_\scrA$,
and so~$ca=ac=a$ by Lemma~\ref{lem:projection-order}.

If~$a\in \scrA_{\mathrm{sa}}$
with~$a\neq 0$,
then $a\cdot\|a\|^{-1} \in [0,1]_\scrA\cap \mathscr{D}$,
and so $ca \|a\|^{-1} = a \|a\|^{-1}$,
which entails $ca = a$.

(For arbitrary $a\in \scrA$,)
we have $a= a_{\mathbb{R}} + i a_{\mathbb{I}}$,
where $a_\mathbb{R}=\frac{1}{2}(a+a^*)$
and $a_\mathbb{I} = \frac{1}{2i}(a-a^*)$
are self-adjoint elements of~$\mathscr{D}$.
Then~$ca_\mathbb{R}=a_\mathbb{R}$
and $ca_\mathbb{I}=a_\mathbb{I}$
by the previous paragraph.
Thus~$ca=ca_\mathbb{R}+ica_\mathbb{I}=a_\mathbb{R}+ia_\mathbb{I}=a$.

\emph{($c$ is central)}\ 
Let~$a\in\scrA$ be given.
We must show that~$ca=ac$.
Since~$\mathscr{D}$ is a two-sided ideal,
we have~$ac\in \mathscr{D}$,
and so~$c(ac)=ac$ by the previous point.
By a similar reasoning we get~$(ca)c=ca$.
Thus~$ac=ca$.
Thus~$c$ is central.

\emph{($\mathscr{D} = c\scrA$)}\ 
Clearly $c\scrA\subseteq\mathscr{D}$
since~$c\in\mathscr{D}$ and~$\mathscr{D}$ is an ideal.
On the other hand,
if~$a\in\mathscr{D}$,
then~$ca=a$
(as we saw),
and thus~$a\in c\scrA$.
Hence~$\mathscr{D} = c\scrA$.

\emph{(uniqueness)}\ 
Let~$c_1$ and~$c_2$ be central projections 
with~$c_1\scrA = \mathscr{D}=c_2\scrA$.
We must show that~$c_1=c_2$.

As~$c_2\in\mathscr{D}=c_1 \scrA$,
there is~$a_1\in \scrA$
with~$c_2 = c_1a_1$.
Then~$c_2 = c_2c_2^* = c_1a_1a_1^*c_1^*\leq 
c_1c_1^*\|a_1a_1^*\|=c_1\|a_1\|^2$.
Thus~$c_1c_2=c_2c_1=c_2$ by Lemma~\ref{lem:projection-order}.

Similarly, $c_2c_1 = c_1c_2 = c_1$, and so $c_1=c_1c_2=c_2$.

\emph{($c$ is the greatest projection of~$\mathscr{D}$)}\ 
Let~$p$ be a projection in~$\mathscr{D}$.
We must show that~$p\leq c$.
Since~$p$ is a projection,
we have $0\leq p\leq 1$, and so $p\in \mathscr{D}\cap [0,1]_\scrA$.
Thus, $p\leq c$, by definition of~$c$.
\end{point}
\end{point}
\end{document}

