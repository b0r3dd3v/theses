\documentclass[main]{subfiles}
\begin{document}
\section{$C^*$-algebras}
\begin{parsec}%
\begin{point}{Definition}%
A \define{$C^*$-algebra}
is a complex vector space~$\scrA$
endowed with
\begin{enumerate}
\item
a binary operation,
called \define{multiplication}
(and denoted as such),
which is associative, and linear in both coordinates;
\item
an element~$1$, called \define{unit},
such that $1\cdot a = a = a\cdot 1$
for all~$a\in \scrA$;
\item
a unary operation $(\,\cdot\,)^*$,
called \define{involution},
such that $(a^*)^*=a$,
$(ab)^*=b^*a^*$,
$(\lambda a)^* = \bar\lambda a^*$,
and $(a+b)^* = a^*+b^*$
for all~$a,b\in\scrA$ and~$\lambda\in \C$;
\item
a complete \define{norm} $\|\,\cdot\,\|$
such that
$\|ab\|\leq\|a\|\|b\|$
for all~$a,b\in\scrA$,
and 
\begin{equation*}
\label{eq:Cstar-identity}
\|a^*a\|\ =\ \|a\|^2
\end{equation*}
holds, which is called the \define{$C^*$-identity}.
\end{enumerate}
The $C^*$-algebra $\scrA$ is called \define{commutative}
if $ab=ba$ for all~$a,b\in\scrA$.
\end{point}
\begin{point}{Example}%
The set~$\C$ of \define{complex numbers}
forms a commutative  $C^*$-algebra
in which addition, (scalar) multiplication, and~$1$
have their usual meaning.
Involution is given by conjugation ($z^*=\bar{z}$),
and norm by modulus ($\|z\|=|z|$).
\end{point}
\begin{point}{Example}%
Let~$X$ be a compact Hausdorff space.
The set $\define{C(X)}$ of \define{continuous functions}
from~$\scrA$ to~$\C$
forms a commutative $C^*$-algebra
when addition, (scalar) multiplication, involution and~$1$ are
interpretted coordinatewise \grayed{(e.g.~$(f+g)(x)=f(x)+g(x)$)},
and the norm is taken to be 
$\|f\|=\sup_{x\in X} |f(x)|$
(the \define{sup-norm}).
\end{point}
\begin{point}{Example}%
The set~$\scrB(\scrH)$ of bounded operators
on a Hilbert space~$\scrH$ forms a $C^*$-algebra.
\end{point}
\begin{point}{Definitions}%
An element $a$ of a $C^*$-algebra $\scrA$ is called
\begin{enumerate}
\item \define{self-adjoint} if $a^* =a$;
\item \define{positive}
if $a\equiv b^*b$ for some $b\in \scrA$;
\item an \define{effect} if~$a$ and~$\define{a^\perp}:=1-a$ are positive;
\item a \define{projection} if $a=a^*a$;
\item \define{central} if $ab=ba$ for all~$b\in\scrA$.
\end{enumerate}
\end{point}
\begin{point}[ad-monotone]{Exercise}%
Show that~$a^*ba$
is positive
when~$b$ is a positive of a $C^*$-algebra~$\scrA$,
and $a\in \scrA$ is any element.
\end{point}
\end{parsec}

%
% geometric series 
%
\begin{parsec}%
\begin{point}%
Let us first study the invertible elements
of a $C^*$-algebra,
whose role 
is as important as it is technical.
This paragraph culminates in what is essentially
 \emph{spectral permanence} (\sref{spectral-permanence}):
the fact that if an element $a$ of a $C^*$-subalgebra $\scrB$
is invertible in~$\scrA$,
then~$a$ is already invertible in~$\scrB$,
see~\sref{inverse-permanence}.
\end{point}
\begin{point}[geometric]{Lemma}%
Let~$a$ be an element of a $C^*$-algebra~$\scrA$ with~$\|a\|<1$.
Then~$a^\perp=1-a$ has an inverse,
namely~$(a^\perp)^{-1}= \sum_{n=0}^\infty\, a^n$
(norm convergence).

\TODO{absolute convergence?}
\begin{point}{Proof}%
Note that
$(1-\|a\|)\,(1+\|a\|+\|a\|^2+\dotsb+\|a\|^N) \,=\, 1-\|a\|^{N+1}$,
and so 
\begin{equation*}
\sum_{n=0}^N \|a\|^n \ =\  \frac{1-\|a\|^{N+1}}{1-\|a\|}
\end{equation*}
for every~$N$.
Thus,
since $\|a\|^N$ converges to~$0$
(by~\TODO{} because $\|a\|<1$),
we  get $\sum_{n=0}^\infty \|a\|^n = (1-\|a\|)^{-1}$.

\begin{point}%
Note that $a^N$ norm converges to~$0$,
because $\|a\|^N$ converges to~$0$.
Also (but slightly less obvious),
$\sum_n a^n$ norm converges,
because~$\sum_n \|a\|^n$ converges.
\end{point}
\begin{point}%
Thus, taking the norm limit
on both sides of $(1-a)(1+a+a^2+\dotsb a^N) = 1-a^{N+1}$,
gives us $(1-a)(\sum_n a^n) = 1$.
Since we can derive $(\sum_n a^n)(1-a) = 1$
in a similar manner, 
we see that $\sum_n a^n$ is the inverse of~$1-a$.
\end{point}
\end{point}
\end{point}
\begin{point}{Exercise}
Let~$a$ be an element of a $C^*$-algebra~$\scrA$.
\begin{point}[spectrum-bounded]%
Show that $a-\lambda$ is invertible
for every~$\lambda\in\C$ with~$\|a\|< \left|\lambda\right|$.
\end{point}
\begin{point}%
Show that $a-b$ is invertible
when~$b\in\scrA$ is invertible and $\|a\| < \|b\|$.
\end{point}
\begin{point}%
Show that $U:=\{\ b\in\scrA\colon\ \text{$b$ is invertible}\ \}$
is an open subset of~$\scrA$.
\end{point}
\end{point}
\begin{point}[cstar-inv-continuous]{Lemma}%
Let~$\scrA$ be a $C^*$-algebra.
The assignment $a\mapsto a^{-1}$
gives a  continuous map
(from $\{\,b\in \scrA\colon\, \text{$b$ is invertible}\,\}$
to~$\scrA$.)
\begin{point}[cstar-inv-continuous-1]{Proof}
First we establish continuity at~$1$:
let~$a\in\scrA$ with $\|1-a\|\leq \frac{1}{2}$ be given;
we claim that~$a$ is invertible,
and~$\|1-a^{-1}\| \leq 2\|1-a\|$.

Indeed, since~$\|1-a\|\leq \frac{1}{2}<1$,
$a$ is invertible by~\sref{geometric},
and $a^{-1}=\sum_{n=0}^\infty (1-a)^n$.
Then~$\|1-a^{-1}\|=\|\sum_{n=1}^\infty (1-a)^n\|\leq \sum_{n=1}^\infty \|1-a\|^n
= \|1-a\|\, (1-\|1-a\|)^{-1}$.
Thus, as $\|1-a\|\leq\frac{1}{2}$,
we get $(1-\|1-a\|)^{-1}\leq 2$,
and so $\|1-a^{-1}\|\leq 2\|1-a\|$.
\begin{point}%
Let~$a$ be an invertible element of~$\scrA$,
and let~$b\in\scrA$ with~$\|a-b\|\leq\frac{1}{2}\|a^{-1}\|$.
We claim that~$b$ is invertible,
and~$\|a^{-1}-b^{-1}\|\leq 2\|a-b\|\,\|a^{-1}\|^2$.

Since $\|a-b\|\leq \frac{1}{2}\|a^{-1}\|$
we have
$\|1-a^{-1}b\|\leq \|a^{-1}\|\,\|a-b\|\leq \frac{1}{2}$.
By~\sref{cstar-inv-continuous-1}, $a^{-1}b$ is invertible,
and $\|1-(a^{-1}b)^{-1}\|\leq 2\|1-a^{-1}b\|\leq 2\|a-b\|\,\|a^{-1}\|$.
Hence $\|a^{-1}-b^{-1}\| = \|(1-(a^{-1}b)^{-1})a^{-1}\|
\leq \|1-(a^{-1}b)^{-1}\|\,\|a^{-1}\|\leq 2 \|a-b\|\,\|a^{-1}\|^2$.

(Based on Kadison--Ringrose Proposition 3.1.6.)
\end{point}
\end{point}
\end{point}
%
%	Towards spectral permanence
%
\begin{point}{Lemma}%
For a self-adjoint element~$a$ from a $C^*$-algebra,
$a-i$ is invertible.
\begin{point}{Proof}%
The trick
is to 
write~$a-i\equiv (a+ni)\,-\,(n+1)i$
for sufficiently large~$n$,
because  
then
$a-i$
is invertible provided that~$n+1 > \|a+ni\|$
by~\sref{spectrum-bounded}.
Indeed, for~$n$ such that~$\|a\|<2n+1$,
we have $\|a+ni\|^2 = \|(a+ni)^*(a+ni)\|
= \|a^2+n^2\|
\leq \|a\|^2+n^2 < 2n+1+n^2 = (n+1)^2$,
and so $\|a+ni\| < n+1$.

(Based on Kadison--Ringrose Proposition 4.1.1(ii).)
\end{point}
\begin{point}[spectrum-self-adjoint-real]{Exercise}%
Let~$a$ be a self-adjoint element of a $C^*$-algebra,
and let~$\lambda\in\C\backslash\R$.
Show that~$a-\lambda$ is invertible.
\end{point}
\end{point}
\begin{point}{Proposition}%
Let~$\scrA$ be a $C^*$-subalgebra
of a $C^*$-algebra $\scrB$.
Let~$a$ be a self-adjoint element of~$\scrA$,
which has an inverse, $a^{-1}$, in~$\scrB$.
Then~$a^{-1}\in\scrA$.
\begin{point}{Proof}%
While we do not know yet that~$a$ is invertible in~$\scrA$,
we do know that~$a+\nicefrac{i}{n}$ 
has an inverse $(a+\nicefrac{i}{n})^{-1}$ in~$\scrA$
by~\sref{spectrum-self-adjoint-real}
for each~$n$
(using that $a$ is self-adjoint.)
Since~$a+\nicefrac{i}{n}$ converges to~$a$ in~$\scrB$ as~$n$ increases,
we see that $(a+\nicefrac{i}{n})^{-1}$ converges to~$a^{-1}$
in~$\scrB$ by~\sref{cstar-inv-continuous}.
Thus, as all~$(a+\nicefrac{1}{n}i)^{-1}$ are in~$\scrA$,
and~$\scrA$ is closed in~$\scrB$,
we see that~$a^{-1}$ is in~$\scrA$.
\end{point}
\end{point}
\begin{point}[inverse-permanence]{Exercise}%
Show that the assumption that~$a$ is self-adjoint
can be dropped. 

(Hint: consider $a^*a$; c.f.~Conway Proposition VIII.1.14.)
\end{point}
\end{parsec}


\begin{parsec}%
\begin{point}%
We now turn to the \emph{spectrum} of an element of a $C^*$-algebra,
which not only 
generalises the notion of eigenvalue also to infinite dimensions,
but is important in the proof
of Gelfand's representation theorem too. \TODO{add ref.}
\end{point}
\begin{point}{Definition}%
The \define{spectrum} of an element $a$
of a $C^*$-algebra
is the set \define{$\spec(a)$}
of complex numbers~$\lambda$
for which~$a-\lambda$ is not invertible.
\begin{point}{Example}%
For a function $f\in C(X)$,
we have $\spec(f) = f(X)$.
\end{point}
\begin{point}{Example}%
For a matrix $A\in M_n$,
$\spec(A)$ is the set of eigenvalues of~$A$.
\end{point}
\end{point}
\begin{point}%
On first sight,
the spectrum $\spec(a)$
of an element~$a$ of a $C^*$-algebra~$\scrA$ 
depends not only on~$a$,
but also on the surrounding $C^*$-algebra~$\scrA$ for it determines
for which~$\lambda\in\C$ the operator $a-\lambda$ is invertible.
Thus we should perhaps write $\spec_\scrA(a)$ instead
of~$\spec(a)$.
However, such careful bookkeeping turns out 
be unnecessary
by the following result.
\end{point}
\begin{point}[spectral-permanence]{Theorem (Spectral Permanence)}%
Let~$\scrB$ be a $C^*$-subalgebra of a $C^*$-algebra $\scrA$.
Then~$\spec_{\scrA}(a)=\spec_\scrB(a)$
for every element~$a$ of~$\scrB$.
\begin{point}{Proof}%
Let~$a$ be an element of~$\scrB$,
and let~$\lambda\in \C$.
We must show that $a-\lambda$ is invertible in~$\scrA$
iff $a-\lambda$ is invertible in~$\scrB$.
Surely,
if $a-\lambda$ has an inverse $(a-\lambda)^{-1}$ in~$\scrB$,
then~$(a-\lambda)^{-1}$ is also an inverse of~$a-\lambda$ in~$\scrA$,
since~$\scrB\subseteq \scrA$.
The other, non-trivial, direction follows
directly from~\sref{inverse-permanence}.\qed%
\end{point}
\end{point}
\begin{point}{Proposition}%
For an element~$a$ of a $C^*$-algebra~$\scrA$,
we have
\begin{equation*}
\|a\|\,=\,\sup\{\,\left|\lambda\right|\colon \,\lambda\in \spec(a)\,\}.
\end{equation*}
\begin{point}{Proof}%
From~\sref{spectrum-bounded}
we see that~$|\lambda|\leq \|a\|$
for all~$\lambda\in\spec(a)$.
Thus we only need to show
that for every $\varepsilon>0$
there is~$\lambda\in\spec(a)$ with $\|a\|-|\lambda| <\varepsilon$.
\begin{point}%
The trick is to consider the power series
$z\sum_n (za)^n$.
On the one hand,
we know by~\TODO{divergence of the geometric series} 
that~$z\sum_n (za)^n$ should diverge
for some~$z\in\C$ with $\|za\| \geq 1$,
that is, $\left|z\right|^{-1}\leq \|a\|$.

On the other hand,
the holomorphic function~$f$ defined on
\begin{equation*}
G\ :=\ \{0\}\,\cup \,\{\,z^{-1}\colon\,z\notin \spec(a)\,\}
\end{equation*}
by $f(0)=0$ and $f(z)=(z^{-1}-a)^{-1}$ for $z\neq 0$
has a power series expansion around~$0$,
that is, $f(z)=\sum_n a_n z^n$ for some $a_1,a_2,\dotsc \in\scrA$.
By~\sref{geometric},
it's easy to see that~$f(z)=z \sum_n (za)^n$.
 
\TODO{finish}
\end{point}
\end{point}
\end{point}
\end{parsec}



%
%  Cauchy--Schwarz for positive functionals
%
\begin{parsec}[cstar-cs]%
\begin{point}{Lemma}%
Let~$\scrA$ be a $C^*$-algebra,
and let~$f\colon \scrA\to \C$ be a positive linear map.\\
Then, for all~$a,b\in\scrA$,\quad
$\left|f(a^*b)\right|^2 \ \leq\ f(a^*a)\,f(b^*b)$.
\end{point}
\begin{point}{Proof}%
\TODO{give; NB: it is not trivial that~$f$ is involutive}
\end{point}
\end{parsec}


%
% morphisms between C^*-algebras
%
\begin{parsec}
\begin{point}{Definition}
A linear map $f\colon \scrA \to \scrB$
between $C^*$-algebras
is called
\begin{enumerate}
\item
\define{\textbf{m}ultiplicative}
if $f(ab)=f(a)f(b)$ for all $a,b\in\scrA$;
\item
\define{\textbf{i}nvolutive}
if $f(a^*)=f(a)^*$ for all~$a\in\scrA$;
\item
\define{\textbf{p}ositive}
if $f(a)$ is positive
for every positive $a\in\scrA$, and
\item
\define{\textbf{u}nital}
if $f(1)=1$.
\end{enumerate}
\end{point}
\begin{point}%
We use the bold letters as abbreviations,
so for instance,
$f$ is \define{pu} if it is positive and unital,
and a \define{miu-map}
is a multiplicative, involutive, unital linear map between $C^*$-algebras,
(which is usually called a \define{unital $*$-homomorphism}.)
\end{point}
\end{parsec}


\begin{parsec}[gelfand]%
\begin{point}{Gelfand's Representation Theorem}%
Let~$\scrA$ be a commutative $C^*$-algebra.
\begin{enumerate}
\item
The \define{spectrum} of~$\scrA$, \define{$\spec(\scrA)$},
the set 
of miu-maps $\scrA\to \C$
endowed with the topology of pointwise convergence,
is a compact Hausdorff space.

\item
The \define{Gelfand transform},
the map $\gamma\colon \scrA\to C(\spec(\scrA))$
given by $\gamma(a)(\varphi)=\varphi(a)$,
is an isomorphism.
\end{enumerate}
\end{point}
\end{parsec}
%
% square root
%
\begin{parsec}[cstar-square]%
\begin{point}{Corollary}%
For each positive element~$a$ of a $C^*$-algebra~$\scrA$,
there is a unique positive element~\define{$\sqrt{a}$} of~$\scrA$
with $(\sqrt{a})^2 = a$.

\begin{point}[cstar-square-commutes]%
Moreover,
if $b\in \scrA$ commutes with~$a$,
then~$b$ commutes with~$\sqrt{a}$.
\end{point}
\end{point}
\end{parsec}
%
%
%
\begin{parsec}%
\begin{point}{Exercise}
Show that a positive map between $C^*$-algebras
is involutive.
\end{point}
\end{parsec}


%
% von Neumann algebras
%
\begin{parsec}[vna]%
\begin{point}{Definition}%
A $C^*$-algebra~$\scrA$
is a \define{von Neumann algebra}
when
\begin{enumerate}
\item
every bounded directed subset~$D$
of self-adjoint elements of~$\scrA$ (so $D\subseteq \sa{\scrA}$) 
has a supremum $\bigvee D$ in $\sa{\scrA}$, and
\item
if $a$ is a positive element of~$\scrA$
with $\omega(a)=0$ for every \emph{normal} (see below) positive 
linear map $\omega\colon \scrA\to \C$,
then~$a=0$.
\end{enumerate}
\begin{point}%
A positive linear map $\omega\colon \scrA\to \C$
is called \define{normal}
if $\omega(\bigvee D) = \bigvee_{d\in D} \omega(d)$
for every bounded directed subset of self-adjoint elements of~$D$
which has a supremum $\bigvee D$ in $\sa{\scrA}$.
\end{point}%
\begin{point}%
The \define{ultraweak topology} on $\scrA$
is the least topology on~$\scrA$
that makes all normal positive linear maps $\omega\colon \scrA\to \C$
continuous.
\end{point}
\end{point}
\end{parsec}
%
% multiplication turns suprema into ultraweak limits
%
\begin{parsec}[vanishing-effects]%
\begin{point}{Lemma}%
Let~$(x_\alpha)_\alpha$ be 
a net of effects of a von Neumann algebra~$\scrA$
which converges ultraweakly to~$0$.
Then $(x_\alpha a)_\alpha$ converges ultraweakly
to $0$ for every~$a\in\scrA$.
\end{point}
\begin{point}{Proof}%
Let~$\omega\colon \scrA\to \C$ be a normal positive linear map.
We have, for each~$\alpha$,
\begin{alignat*}{3}
\left|\,\omega(x_\alpha a)\,\right|^2
\ &=\ 
\left|\, \omega(\,\sqrt{x_\alpha}\,\sqrt{x_\alpha}\,a\,)\, \right|^2
\qquad&&\text{since $x_\alpha\geq 0$}\\
\ &\leq\ 
\omega(x_\alpha)\  \omega(\,a^* x_\alpha a\,) 
\qquad&&\text{by \sref{cstar-cs}}\\
\ &\leq\ 
\omega(x_\alpha)\ \omega(a^*a)
\qquad&&\text{since $x_\alpha\leq 1$}.
\end{alignat*}
Thus,
since $(\omega(x_\alpha))_\alpha$
converges to~$0$,
we see that $(\omega(x_\alpha a))_\alpha$
converges to~$0$,
and so $(x_\alpha a)_\alpha$ converges ultraweakly to~$0$.
\end{point}
\end{parsec}
\begin{parsec}%
\begin{point}{Exercise}
Let~$D$ be a bounded directed set of self-adjoint
elements of a von Neumann algebra~$\scrA$,
and let~$a\in \scrA$.
\begin{point}[vna-supremum-uwlimit]%
Show that the net~$(d)_{d\in D}$ converges ultraweakly to~$\bigvee D$.
\end{point}
\begin{point}[vna-supremum-mult]%
Use~\sref{vanishing-effects}
to show that $(da)_d$ converges ultraweakly to~$(\bigvee D)a$,
and that~$(a^*d)_d$ converges ultraweakly to~$a^* (\bigvee D)$.
\end{point}
\begin{point}[vna-supremum-commutes]%
Show that if~$ad=da$ for all~$d\in D$,
then $a(\bigvee D) = (\bigvee D)a $.
\end{point}
\end{point}
\end{parsec}
%
%  ad is normal
%
\begin{parsec}[ad-normal]%
\begin{point}{Proposition}%
Let~$a$ be an element of a von Neumann algebra~$\scrA$.
Then~$\bigvee_{d\in D} a^*\,d\,a = a^*\,(\bigvee D)\, a$
for every bounded directed subset~$D$ of self-adjoint
elements of~$\scrA$.
\end{point}
\begin{point}[ad-normal-1]{Proof}%
If~$a$ is invertible,
then the (by~\sref{ad-monotone}) order preserving map $b\mapsto a^*ba$
has an order preserving inverse (namely $b\mapsto (a^{-1})^* b a^{-1}$),
and therefor preserves all suprema.
\begin{point}%
The general case reduces to the case that~$a$ 
is invertible
in the following way.
There is (by~\sref{spectrum-bounded})
 $\lambda>0$ such that $\lambda+a$ is invertible.
Then as $d$ increases 
\begin{equation*}
a^*\,d\,a \ \equiv\  (\lambda+a)^*\,d\,(\lambda+a) \,-\,
 \lambda^2 \,-\, \lambda a^*d \,-\, \lambda da
\end{equation*}
converges ultraweakly
to~$a^* \,(\bigvee D)\,a$,
because $(\ (\lambda+a)^*\,d\,(\lambda+a)\ )_d$
converges ultraweakly to $(\lambda+a)^*\,(\bigvee D)\,(\lambda+a)$
by~\sref{ad-normal-1} and~\sref{vna-supremum-uwlimit},
and $(a^*d+da)_d$ converges ultraweakly to $a^*(\bigvee D)+(\bigvee D)a$
by~\sref{vna-supremum-mult}.
Since~$(a^*da)_d$ converges to~$\bigvee_{d\in D} a^*d a$ too,
we conclude that~$\bigvee_{d\in D} a^* \,d\, a = a^*\,(\bigvee D)\,a$.
\end{point}
\end{point}
\end{parsec}



\subsection{Projections}
Let us now turn to the projections in a von Neumann algebra.

\TODO{Supremum/infimum of projections}

\TODO{Relation between  $\floor{\cdot}$, $\ceil{\cdot}$ and NCPsU-maps}

\TODO{NCPsU-maps with sharp $f(1)$ as restriction category}

\TODO{Central carier and von Neumann--Murray equivalence (for Paschke.)}

\TODO{$\ceil{pqp}=p\cdot q$ (Sakai product) and counter-example non-projections}

\TODO{$\floor{aba}=\floor{a}\cap \floor{b}$}



\begin{parsec}[ad-contraposed]%
\begin{point}{Lemma}%
Let~$a$ be an element of a $C^*$-algebra~$\scrA$
with $\|a\|\leq 1$,
and let~$p$ and~$q$ be projections on~$\scrA$.
Then 
$a^* p a \leq q^\perp$
iff $paq=0$
iff  $aqa^*\leq p^\perp$.
\end{point}
\begin{point}{Proof}%
Suppose that~$a^*pa\leq q^\perp$.
Then we have $q a^*pa q \leq qq^\perp q = 0$
(see \sref{ad-monotone})
and so $paq=0$,
because $\|paq\|^2=\|(paq)^*paq\|=0$
by the $C^*$-identity.
Applying $(\,\cdot\,)^*$,
we get $qa^*p=0$, and so both $qa^* = qa^*p^\perp$
and $aq = p^\perp aq$, giving
us $aqa^* = p^\perp a q a^* p^\perp 
\leq p^\perp$,
where we used that $aqa^*\leq aa^*\leq \|aa^*\|=\|a\|^2\leq 1$.
By a similar reasoning,
we get $aqa^*\leq p^\perp \implies paq=0\implies a^*pa\leq q^\perp$.
\end{point}
\end{parsec}
\begin{parsec}%
\begin{point}{Exercise}%
Let~$a$ be an effect of a $C^*$-algebra~$\scrA$,
and~$p$ be a projection from~$\scrA$.
\begin{point}[projection-above-effect]%
Show that $a\leq p$
iff $p\sqrt{a} = \sqrt{a}$
iff $\sqrt{a}p = \sqrt{a}$
iff $p^\perp\sqrt{a} = 0$
iff $\sqrt{a}p^\perp = 0$
iff $a^2\leq p$
iff $p a  = a$
iff $ a p = a $
iff $p^\perp a  = 0$
iff $ap^\perp = 0$
iff $\sqrt{a}\leq p$.
\end{point}
\begin{point}[projection-below-effect]%
Show that $p\leq a$
iff $p \sqrt{a} = p$
iff $\sqrt{a} p = p$
iff $ p\sqrt{a}^\perp = 0$
iff $\sqrt{a}^\perp p = 0$
iff $p\leq a^2$
iff $ap=p$
iff $pa = p$
iff $pa^\perp =0$
iff $a^\perp p =0$
iff $p\leq \sqrt{a}$.
\end{point}
\end{point}
\begin{point}[projection-below-projection]{Exercise}%
Let~$p$ and~$q$ be projections from a $C^*$-algebra
with~$p\leq q$.\\
Show that~$q-p$ is a projection.
\end{point}
\end{parsec}

%
% Projections
%
\begin{parsec}[vna-ceil]%
\begin{point}{Proposition}%
Above every effect~$b$ of a von Neumann algebra~$\scrA$,
there is a smallest projection, \define{$\ceil{b}$},
called the \define{ceiling} of~$b$,
 given by $\ceil{b}=\bigvee_{n=0}^\infty b^{\nicefrac{1}{2^n}}$.
\begin{point}[vna-ceil-commutes]%
Moreover, if $a\in \scrA$ commutes with $b$,
then~$a$ commutes with~$\ceil{b}$.
\end{point}
\end{point}
\begin{point}{Proof}
Let~$p$ denote the supremum of~$0\leq b\leq b^{\nicefrac{1}{2}}\leq
b^{\nicefrac{1}{4}}\leq\dotsb\leq 1$.
\begin{point}[vna-ceil-point-1]%
To begin,
note that if~$a\in \scrA$
commutes with~$b$,
then~$a$ commutes with~$p$.
Indeed, for such~$a$ we have~$a\sqrt{b}=\sqrt{b}a$
by~\sref{cstar-square-commutes},
and so $a b^{\nicefrac{1}{2^n}} = b^{\nicefrac{1}{2^n}} a$
for each~$n$
by induction.
Thus~$ap=pa$ by~\sref{vna-supremum-commutes}.
\end{point}
\begin{point}%
Let us prove that~$p$ is a projection, c.q.~$p^2=p$. 
Since~$p\leq 1$, we already have $p^2\equiv \sqrt{p}p\sqrt{p}\leq p$
by~\sref{ad-monotone},
and so we only need to show that $p\leq p^2$. We have:
\begin{alignat*}{3}
 p^2 \ &=\  \textstyle \bigvee_m \sqrt{p} \,b^{\nicefrac{1}{2^m}} \,\sqrt{p}
\qquad&&\text{by \sref{ad-normal}} \\
&=\ \textstyle\bigvee_m b^{\nicefrac{1}{2^{m+1}}}\, p\,
b^{\nicefrac{1}{2^{m+1}}} 
\qquad&&\text{by \sref{vna-ceil-point-1} and \sref{cstar-square-commutes}} \\
&=\ \textstyle \bigvee_m \bigvee_n \, 
b^{\nicefrac{1}{2^{m+1}}}\, b^{\nicefrac{1}{2^n}}\,
b^{\nicefrac{1}{2^{m+1}}} \qquad && \text{by \sref{ad-normal}}
\end{alignat*}
Thus $p^2 \geq b^{\nicefrac{1}{2^k}}$
for each~$k$ (taking $n=m=k+1$,)
and so~$p^2 \geq p$.
\end{point}
\begin{point}%
It remains to be shown that~$p$ is the \emph{least} projection
above~$b$.
Let~$q$ be a projection in~$\scrA$ with $b\leq q$;
we must show that~$q\leq p$.
We have $b^{\nicefrac{1}{2}}\leq q$
by~\sref{projection-above-effect},
and so $b^{\nicefrac{1}{2^n}}\leq q$ for each~$n$ by induction.
Hence $p\leq q$.
\end{point}
\end{point}
\end{parsec}

%
%	floor
%
\begin{parsec}[vna-floor]%
\begin{point}{Proposition}%
Below every effect~$b$ of a von Neumann algebra~$\scrA$,
there is greatest projection, $\floor{b}$,
called the \define{floor} of~$b$,
given by~$\floor{b} = \bigwedge_{n=0}^\infty b^{2^{n}}$.
\begin{point}%
Moreover, if~$a\in \scrA$ commutes with~$b$,
then~$b$ commutes with~$\floor{b}$.
\end{point}
\end{point}
\begin{point}{Proof}%
Let~$p$ denote the infimum of $1\geq b\geq b^2 \geq b^4 \geq  \dotsb \geq 0$.
\begin{point}[vna-floor-point-1]%
If~$a\in \scrA$ commutes with~$b$,
then~$a$ commutes with~$p$.
Indeed, such~$a$ commutes with~$b^2$ (because
$ab^2 = bab = b^2a$,)
and so~$a$ commutes with~$b^{2^n}$ for each~$n$ by induction.
Thus~$a$ commutes with~$p\equiv\bigwedge_n b^{2^n}$ 
(by a variation on~\sref{vna-supremum-commutes}.)
\end{point}
\begin{point}%
To see that~$p$ is a projection, c.q.~$p^2=p$,
we only need to show that~$p\leq p^2$,
because we get $p^2\equiv \sqrt{p}\,p\,\sqrt{p}\leq p$
from $p\leq 1$ (using~\sref{ad-monotone}.)
Now, since
\begin{alignat*}{3}
p^2 \ &=\ \textstyle \bigwedge_m\  \sqrt{p}\, b^{2^m} \sqrt{p}\qquad
&&\text{by a variation on~\sref{ad-normal}}\\
&=\ \textstyle \bigwedge_m \ b^{2^{m-1}} p\, b^{2^{m-1}}\qquad
&&\text{by~\sref{vna-floor-point-1} and~\sref{cstar-square-commutes}}\\
&=\ \textstyle \bigwedge_m \bigwedge_n \ 
b^{2^{m-1}}\, b^{2^n}\, b^{2^{m-1}}\qquad
&&\text{by~\sref{ad-normal},}
\end{alignat*}
and $p\leq b^{2^{m-1}}\, b^{2^n}\,b^{2^{m-1}}$
for all~$n,m$, we get~$p\leq p^2$.
\end{point}
\begin{point}%
It remains to be shown that~$p$ is the greatest projection above~$b$.
Let~$q$ be a projection in~$\scrA$ with~$q\leq b$
we must show that~$q\leq p$.
Since~$q\leq b$,
we have~$q\leq b^2$ (by~\sref{projection-below-effect}),
and so~$q\leq b^{2^n}$ for each~$n$ by induction.
Thus~$q\leq p\equiv\bigwedge_n b^{2^n}$.
\end{point}
\end{point}
\end{parsec}
%
%
%
\begin{parsec}%
\begin{point}{Exercise}%
Let~$a,b$ be effects of a von Neumann algebra~$\scrA$,
and let~$\lambda\in [0,1]$.
\begin{point}%
Show that $\ceil{a}^\perp = \floor{a^\perp}$
and $\floor{a}^\perp = \ceil{a^\perp}$.
\end{point}
\begin{point}[vna-binary-supremum-projections]%
Show that~$\ceil{\lambda a} = \ceil{a}$
when~$\lambda\neq 0$.
Use this to prove that~$\ceil{\lambda a+\lambda^\perp b}$
is the supremum of~$\ceil{a}$ and~$\ceil{b}$
in the poset of projections of~$\scrA$
when~$\lambda\neq 0$ and~$\lambda\neq 1$.
\end{point}
\begin{point}[vna-floor-square]%
Show that $\floor{a}=\floor{a^2}$.
\end{point}
\end{point}
\end{parsec}

%
%	directed supremum of projections
%
\begin{parsec}%
\begin{point}[vna-directed-supremum-projections]{Lemma}%
The supremum of a directed set~$D$ of projections
from a von Neumann algebra~$\scrA$ is a projection.
\end{point}
\begin{point}{Proof}%
Writing $p=\bigvee D$,
we must show that $p^2=p$.
Note that $dp=d$ for all~$d\in D$
(by~\sref{projection-below-effect} because~$d\leq p$.)
Now, on the one hand, $(d)_{d\in D}$
converges ultraweakly to~$p$.
On the other hand,
$(dp)_{d\in D}$
converges ultraweakly to~$p^2$ by~\sref{vna-supremum-mult}.
Hence~$p=p^2$ by uniqueness of ultraweak limits.
\end{point}
\begin{point}{Exerise}%
Deduce from this result
 that every set~$A$ of projections from~$\scrA$
has a supremum $\define{\bigcup A}$
and an infimum $\define{\bigcap A}$
\emph{in the poset of projections from~$\scrA$}.\\
(Hint: use~\sref{vna-binary-supremum-projections},
and the fact that $p\mapsto p^\perp$ 
is an order isomorphism on the poset of projections on~$\scrA$.)
\end{point}
\end{parsec}
%
%
%
\begin{parsec}[floor-sequential-product]%
\begin{point}{Lemma}%
Let~$a,b$ be effects of a von Neumann algebra~$\scrA$.
Then~$\floor{\sqrt{a}b\sqrt{a}}$ is the greatest projection
below~$a$ and~$b$, that is, in symbols, 
$\floor{\sqrt{a}b\sqrt{a}}=\floor{a}\cap \floor{b}$.
\end{point}
\begin{point}{Proof}%
Surely, $\floor{\sqrt{a}b\sqrt{a}}\leq \sqrt{a}b\sqrt{a} \leq a$.
Let us prove that~$\floor{\sqrt{a}b\sqrt{a}}\leq b$.
To this end,
recall
that (by~\sref{projection-below-effect})
a projection~$e$ is below an effect~$c$
iff $ec=e$ iff $e\sqrt{c}=e$.
In particular,
since~$\floor{\sqrt{a}b\sqrt{a}}\leq \sqrt{a}b\sqrt{a}$ and 
$\floor{\sqrt{a}b\sqrt{a}}\leq a$,
we get
\begin{equation*}
\floor{\sqrt{a}b\sqrt{a}}
\ =\ \floor{\sqrt{a}b\sqrt{a}}\sqrt{a}b\sqrt{a}\floor{\sqrt{a}b\sqrt{a}} \ =\ 
\floor{\sqrt{a}b\sqrt{a}}b\floor{\sqrt{a}b\sqrt{a}},
\end{equation*}
and so $\floor{\sqrt{a}b\sqrt{a}}b^\perp\floor{\sqrt{a}b\sqrt{a}}=0$,
which implies that
$\floor{\sqrt{a}b\sqrt{a}}\leq b$ by~\sref{ad-contraposed}.
\begin{point}%
Now,
let~$e$ be a projection below~$a$ and~$b$,
that is, $e\sqrt{a}=e$ and~$eb=e$.
We must show that~$e\leq \floor{\sqrt{a}b\sqrt{a}}$,
or equivalently, $e\leq \sqrt{a}b\sqrt{a}$,
or put yet differently, $e\sqrt{a}b\sqrt{a}=e$.
But this is obvious: $e=e\sqrt{a}=eb\sqrt{a}=e\sqrt{a}b\sqrt{a}$.
\end{point}
\end{point}
\end{parsec}

\begin{parsec}%
\begin{point}%
Having seen that~$\floor{\sqrt{a}b\sqrt{a}} = \floor{a}\cap\floor{b}$
in~\sref{floor-sequential-product}
one might wonder whether
there is a similar expression for $\ceil{\sqrt{a}b\sqrt{a}}$.
If~$a$ and~$b$ are projection,
$\ceil{aba}$ turns out to coincide with the \define{Sasaki product},
$a\cap (a^\perp \cup b)$,
as we will show below.
\TODO{Reference for the Sasaki product.}
\TODO{Thank Kenta}
\end{point}
\begin{point}[floor-difference]{Lemma}%
Let~$p$ be a projection,
and let~$a$ be an effect of a von Neumann algebra
with $a\leq p$.
We have $p-\ceil{a}=\floor{p-a}$.
\end{point}
\begin{point}{Proof}%
We must show that $p-\ceil{a}$ is the greatest projection below $p-a$.
To begin, $p-\ceil{a}\leq p-a$,
because $a\leq \ceil{a}$.
Further, since~$a\leq p$, we have $\ceil{a}\leq p$,
and so~$p-\ceil{a}$ is a projection
(by~\sref{projection-below-projection}).
\begin{point}%
Let~$q$ be a projection below~$p-a$.
We must show that~$q\leq p-\ceil{a}$.
The trick is to note that~$a\leq p-q$.
Since~$p-q$ is a projection (by~\sref{projection-below-projection}
because $q\leq p-a\leq p$),
we have $\ceil{a}\leq p-q$,
and so $q\leq p-\ceil{a}$.
\begin{point}[ceil-sequential-product]{Lemma}%
For projections $p,q$ from a von Neumann algebra,
$\ceil{pqp}=p\cap (p^\perp \cup q)$.
\end{point}
\end{point}
\end{point}
\begin{point}[ceil-sequential-product-1]{Proof}%
Observe that $(\ p\cap (p^\perp \cup q)\ )^\perp 
= p^\perp \cup(p\cap q^\perp)$.
Since~$p^\perp$ and $p\cap q^\perp$ are disjoint,
we have $p^\perp \cup (p\cap q^\perp) = p^\perp + p\cap q^\perp$,
and so $p\cap (p^\perp \cup q) = p-p\cap q^\perp$.
\begin{point}%
By point~\sref{ceil-sequential-product-1}, 
it suffices to show that~$\ceil{pqp}=p- p\cap q^\perp$,
that is, $p-\ceil{pqp}=p\cap q^\perp$.
Since $p-\ceil{pqp} = \floor{p-pqp}$
by~\sref{floor-difference} and $\floor{pq^\perp p}=p\cap q^\perp$
by~\sref{floor-sequential-product} we are done.
\end{point}
\end{point}
\end{parsec}

%
% About maps between von Neumann algebras
%

\begin{parsec}%
\begin{point}{Proposition}%
For a cp-map~$f\colon \scrA\to\scrB$
 between $C^*$-algebras, and $a,b\in\scrA$, 
\begin{equation*}
f(b^*a)\,f(a^*b)\ \leq\ \|f(a^*a)\|\,f(b^*b).
\end{equation*}
\end{point}%
\begin{point}{Proof}%
\TODO{add}
\end{point}
\end{parsec}
%
%
%
\begin{parsec}%
\begin{point}{Exercise}%
Let~$f\colon \scrA\to\scrB$ be a ncpsu-map
between von Neumann algebras
with~$f(1)\leq 1$,
and let~$a\in \scrA$ be positive.
\begin{point}[cp-kadisons-ineq]%
Show that~$f(a)^2 \leq f(a^2)$.
\end{point}
\begin{point}%
Use this, and~\sref{cstar-sqrt-monotone},
to show that~$f(a^{\nicefrac{1}{2}}) \leq f(a)^{\nicefrac{1}{2}}$.
\end{point}
\begin{point}[cpsu-2nthroot]%
Go on, and show that $f(a^{\nicefrac{1}{2^n}})
\leq f(a)^{\nicefrac{1}{2^n}}$ for each~$n$.
\end{point}
\end{point}
\end{parsec}

%
%
%
\begin{parsec}%
\begin{point}{Proposition}%
Let $f\colon \scrA\to\scrB$ be a ncpsu-map
between von Neumann algebras.
Then $\ceil{f(a)}=\ceil{f(\ceil{a})}$
for every effect~$a$ from~$\scrA$.

\TODO{Use Kadison's inequality instead of complete positivity?}
\end{point}
\begin{point}{Proof}%
Since~$a\leq \ceil{a}$
we have $f(a)\leq f(\ceil{a})$,
and so~$\ceil{f(a)}\leq \ceil{f(\ceil{a})}$.
\begin{point}%
It remains to be shown that $\ceil{f(\ceil{a})}\leq \ceil{f(a)}$,
that is, $f(\ceil{a})\leq \ceil{f(a)}$.
Since  $\ceil{a}=\bigvee_n a^{\nicefrac{1}{2^n}}$ 
(by~\sref{vna-ceil})
and~$f$ is normal,
we have $f(\ceil{a})=\bigvee_n f(a^{\nicefrac{1}{2^n}})$.
Now, since $f(a^{\nicefrac{1}{2^n}})\leq f(a)^{\nicefrac{1}{2^n}}
\leq \ceil{f(a)}$
by~\sref{cpsu-2nthroot} for each~$n$,
we have~$f(\ceil{a})\leq \ceil{f(a)}$.
\end{point}
\end{point}
\end{parsec}
%
%
%
\begin{parsec}%
\begin{point}{Proposition}%
Let~$f\colon \scrA\to\scrB$ be a ncpsu-map
between von Neumann algebras.
Then~$\floor{f(a)}=\floor{f(\floor{a})}$
for every effect~$a$ from~$\scrA$.
\end{point}
\begin{point}{Proof}%
Since~$\floor{a}\leq a$,
we have~$\floor{f(\floor{a})}\leq \floor{f(a)}$.
Thus we only need to show that~$\floor{f(a)}\leq \floor{f(\floor{a})}$,
or equivalently, $\floor{f(a)}\leq f(\floor{a})$.
We have
\begin{equation*}
\floor{f(a)}
\ \stackrel{\sref{vna-floor-square}}{=}\ 
\floor{f(a)^2}
\ \stackrel{\sref{cp-kadisons-ineq}}{\leq}\  
\floor{f(a^2)} \ \leq\ \floor{f(a)},
\end{equation*}
and so~$\floor{f(a)}=\floor{f(a^2)}$.
By induction,
and similar reasoning,
we get~$\floor{f(a)}=\floor{f(a^{2^n})}\leq f(a^{2^n})$
for every~$n$,
and so
$\floor{f(a)}\leq \bigwedge_n f(a^{2^n})
= f(\bigwedge_n a^{2^n})=f(\floor{a})$,
where we used that~$f$ is normal,
and~$\floor{a}=\bigwedge_n a^{2^n}$ (see~\sref{vna-floor}).
\end{point}
\end{parsec}

\end{document}
