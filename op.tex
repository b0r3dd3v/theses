\documentclass[main]{subfiles}
\begin{document}
\chapter{Operator Algebras}
\TODO{Introduction}
\section{$C^*$-algebras}
\begin{parsec}%
\begin{point}{Definition}%
A \Define{$C^*$-algebra}
is a complex vector space~$\scrA$
endowed with
\begin{enumerate}
\item
a binary operation,
called \Define{multiplication}
(and denoted as such),
which is associative, and linear in both coordinates;
\item
an element~$1$, called \Define{unit},
such that $1\cdot a = a = a\cdot 1$
for all~$a\in \scrA$;
\item
a unary operation $(\,\cdot\,)^*$,
called \Define{involution},
such that $(a^*)^*=a$,
$(ab)^*=b^*a^*$,
$(\lambda a)^* = \bar\lambda a^*$,
and $(a+b)^* = a^*+b^*$
for all~$a,b\in\scrA$ and~$\lambda\in \C$;
\item
a complete \Define{norm} $\|\,\cdot\,\|$
such that
$\|ab\|\leq\|a\|\|b\|$
for all~$a,b\in\scrA$,
and 
\begin{equation*}
\label{eq:Cstar-identity}
\|a^*a\|\ =\ \|a\|^2
\end{equation*}
holds, which is called the \Define{$C^*$-identity}.
\end{enumerate}
The $C^*$-algebra $\scrA$ is called \Define{commutative}
if $ab=ba$ for all~$a,b\in\scrA$.
\end{point}
\begin{point}{Example}%
The set~$\C$ of \Define{complex numbers}
forms a commutative  $C^*$-algebra
in which addition, (scalar) multiplication, and~$1$
have their usual meaning.
Involution is given by conjugation ($z^*=\bar{z}$),
and norm by modulus ($\|z\|=|z|$).
\end{point}
\begin{point}{Example}%
Let~$X$ be a compact Hausdorff space.
The set $\Define{C(X)}$ of \Define{continuous functions}
from~$\scrA$ to~$\C$
forms a commutative $C^*$-algebra
when addition, (scalar) multiplication, involution and~$1$ are
interpretted coordinatewise \grayed{(e.g.~$(f+g)(x)=f(x)+g(x)$)},
and the norm is taken to be 
$\|f\|=\sup_{x\in X} |f(x)|$
(the \Define{sup-norm}).
\end{point}
\begin{point}{Example}%
The set~$\scrB(\scrH)$ of bounded operators
on a Hilbert space~$\scrH$ forms a $C^*$-algebra.
\end{point}
\begin{point}{Definitions}%
Given an element $a$ of a $C^*$-algebra $\scrA$, 
\begin{enumerate}
\item we say that $a$ is \Define{self-adjoint} if $a^* =a$, and
\item we write $\Define{\Real{a}}:= \frac{1}{2}(a+a^*)$
and $\Define{\Imag{a}}:=\frac{1}{2i}(a-a^*)$.
\end{enumerate}
The set of self-adjoint elements of~$\scrA$
is denoted by~$\sa{\scrA}$.
\end{point}
\begin{point}{Exercise}%
Let~$a$ be an element of a $C^*$-algebra.
\begin{enumerate}
\item 
Show that $\Real{a}$ and $\Imag{a}$ are self-adjoint,
and  $a= \Real{a}+i\Imag{a}$.
\item
Show that $\Real{(a^*)}=\Real{a}$ and $\Imag{(a^*)}=-\Imag{a}$.
\item 
Show that~$a$ is self-adjoint iff $\Real{a}=a$ iff $\Imag{a}=0$.
\item
Show that $a^*a$ is self-adjoint,
and  $a^*a=\Real{a}^2+\Imag{a}^2+i(\Real{a}\Imag{a}-\Imag{a}\Real{a})$.
\item
Give an example of an~$a$ with  $\Real{a}\Imag{a} \neq \Imag{a}\Real{a}$.
\item
Show that $a^*a+aa^* = 2(\Real{a}^2+\Imag{a}^2)$.
\end{enumerate}
\end{point}
\end{parsec}

%
% geometric series 
%
\begin{parsec}%
\begin{point}%
Let us first study the invertible elements
of a $C^*$-algebra,
whose role 
is as important as it is technical.
This paragraph culminates in what is essentially
 \emph{spectral permanence} (\sref{spectral-permanence}):
the fact that if an element $a$ of a $C^*$-subalgebra $\scrB$
is invertible in~$\scrA$,
then~$a$ is already invertible in~$\scrB$,
see~\sref{inverse-permanence}.
\end{point}
\begin{point}[geometric]{Lemma}%
Let~$a$ be an element of a $C^*$-algebra~$\scrA$ with~$\|a\|<1$.
Then~$a^\perp=1-a$ has an inverse,
namely~$(a^\perp)^{-1}= \sum_{n=0}^\infty\, a^n$
(norm convergence).
\begin{point}{Proof}%
Note that
$(1-\|a\|)\,(1+\|a\|+\|a\|^2+\dotsb+\|a\|^N) \,=\, 1-\|a\|^{N+1}$,
and so 
\begin{equation*}
\sum_{n=0}^N \|a\|^n \ =\  \frac{1-\|a\|^{N+1}}{1-\|a\|}
\end{equation*}
for every~$N$.
Thus,
since $\|a\|^N$ converges to~$0$
(by~\TODO{} because $\|a\|<1$),
we  get $\sum_{n=0}^\infty \|a\|^n = (1-\|a\|)^{-1}$.

\begin{point}%
Note that $a^N$ norm converges to~$0$,
because $\|a\|^N$ converges to~$0$.
Also (but slightly less obvious),
$\sum_n a^n$ norm converges,
because~$\sum_n \|a\|^n$ converges.
\end{point}
\begin{point}%
Thus, taking the norm limit
on both sides of $(1-a)(1+a+a^2+\dotsb a^N) = 1-a^{N+1}$,
gives us $(1-a)(\sum_n a^n) = 1$.
Since we can derive $(\sum_n a^n)(1-a) = 1$
in a similar manner, 
we see that $\sum_n a^n$ is the inverse of~$1-a$.
\end{point}
\end{point}
\end{point}
\begin{point}[spectrum-bounded]{Exercise}
Let~$a$ be an element of a $C^*$-algebra~$\scrA$.
\begin{enumerate}
\item
Show that $a-\lambda$ is invertible
for every~$\lambda\in\C$ with~$\|a\|< \left|\lambda\right|$.
\item
Show that $a-b$ is invertible
when~$b\in\scrA$ is invertible and $\|a\| < \|b\|$.
\item
Show that $U:=\{\ b\in\scrA\colon\ \text{$b$ is invertible}\ \}$
is an open subset of~$\scrA$.
\end{enumerate}
\end{point}
\begin{point}[harmonic-divergence]{Exercise}%
Let~$a$ be an element of a $C^*$-algebra $\scrA$ with $\|a\|>1$.
\begin{enumerate}
\item
Show that $1,\,a,\,a^2,\,a^3,\,\dotsc$ diverges.
\item
Show that $\sum_n a^n$ diverges.
\end{enumerate}
\end{point}
\begin{point}[cstar-inv-continuous]{Lemma}%
Let~$\scrA$ be a $C^*$-algebra.
The assignment $a\mapsto a^{-1}$
gives a  continuous map
(from $\{\,b\in \scrA\colon\, \text{$b$ is invertible}\,\}$
to~$\scrA$.)
\begin{point}[cstar-inv-continuous-1]{Proof}
First we establish continuity at~$1$:
let~$a\in\scrA$ with $\|1-a\|\leq \frac{1}{2}$ be given;
we claim that~$a$ is invertible,
and~$\|1-a^{-1}\| \leq 2\|1-a\|$.

Indeed, since~$\|1-a\|\leq \frac{1}{2}<1$,
$a$ is invertible by~\sref{geometric},
and $a^{-1}=\sum_{n=0}^\infty (1-a)^n$.
Then~$\|1-a^{-1}\|=\|\sum_{n=1}^\infty (1-a)^n\|\leq \sum_{n=1}^\infty \|1-a\|^n
= \|1-a\|\, (1-\|1-a\|)^{-1}$.
Thus, as $\|1-a\|\leq\frac{1}{2}$,
we get $(1-\|1-a\|)^{-1}\leq 2$,
and so $\|1-a^{-1}\|\leq 2\|1-a\|$.
\begin{point}%
Let~$a$ be an invertible element of~$\scrA$,
and let~$b\in\scrA$ with~$\|a-b\|\leq\frac{1}{2}\|a^{-1}\|$.
We claim that~$b$ is invertible,
and~$\|a^{-1}-b^{-1}\|\leq 2\|a-b\|\,\|a^{-1}\|^2$.

Since $\|a-b\|\leq \frac{1}{2}\|a^{-1}\|$
we have
$\|1-a^{-1}b\|\leq \|a^{-1}\|\,\|a-b\|\leq \frac{1}{2}$.
By~\sref{cstar-inv-continuous-1}, $a^{-1}b$ is invertible,
and $\|1-(a^{-1}b)^{-1}\|\leq 2\|1-a^{-1}b\|\leq 2\|a-b\|\,\|a^{-1}\|$.
Hence $\|a^{-1}-b^{-1}\| = \|(1-(a^{-1}b)^{-1})a^{-1}\|
\leq \|1-(a^{-1}b)^{-1}\|\,\|a^{-1}\|\leq 2 \|a-b\|\,\|a^{-1}\|^2$.

(Based on Kadison--Ringrose Proposition 3.1.6.)
\end{point}
\end{point}
\end{point}
%
%	Towards spectral permanence
%
\begin{point}{Lemma}%
For a self-adjoint element~$a$ from a $C^*$-algebra,
$a-i$ is invertible.
\begin{point}{Proof}%
The trick
is to 
write~$a-i\equiv (a+ni)\,-\,(n+1)i$
for sufficiently large~$n$,
because  
then
$a-i$
is invertible provided that~$n+1 > \|a+ni\|$
by~\sref{spectrum-bounded}.
Indeed, for~$n$ such that~$\|a\|<2n+1$,
we have $\|a+ni\|^2 = \|(a+ni)^*(a+ni)\|
= \|a^2+n^2\|
\leq \|a\|^2+n^2 < 2n+1+n^2 = (n+1)^2$,
and so $\|a+ni\| < n+1$.

(Based on Kadison--Ringrose Proposition 4.1.1(ii).)
\end{point}
\begin{point}[spectrum-self-adjoint-real]{Exercise}%
Let~$a$ be a self-adjoint element of a $C^*$-algebra.
\begin{enumerate}
\item
Show that~$a-\lambda$ is invertible for all $\lambda\in \C\backslash \R$.
\item
Show that $a^2-\lambda$ is invertible for all 
$\lambda\in \C\backslash[0,\infty)$.\\
(Hint: first prove that
 $a^2+1 \equiv (a+i)(a-i)$ is invertible.)

Conclude that $a^n-\lambda$ is invertible for all 
$\lambda\in\C\backslash[0,\infty)$ and \emph{even} $n\in\N$.
\item
Let~$n\in \N$ be \emph{odd}.
Show that $a^n-\lambda$ is invertible
for all~$\lambda\in \C\backslash[0,\infty)$
if and only if $a-\lambda$ is invertible
for all~$\lambda\in \C\backslash[0,\infty)$.\\
(Hint: show that
$a^n+1= \prod_{k=1}^n a+\zeta^{2k+1}$
where $\zeta=e^{\frac{\pi i}{n}}$.)
\end{enumerate}
\end{point}
\end{point}
\begin{point}{Proposition}%
Let~$\scrA$ be a $C^*$-subalgebra
of a $C^*$-algebra $\scrB$.
Let~$a$ be a self-adjoint element of~$\scrA$,
which has an inverse, $a^{-1}$, in~$\scrB$.
Then~$a^{-1}\in\scrA$.
\begin{point}{Proof}%
While we do not know yet that~$a$ is invertible in~$\scrA$,
we do know that~$a+\nicefrac{i}{n}$ 
has an inverse $(a+\nicefrac{i}{n})^{-1}$ in~$\scrA$
by~\sref{spectrum-self-adjoint-real}
for each~$n$
(using that $a$ is self-adjoint.)
Since~$a+\nicefrac{i}{n}$ converges to~$a$ in~$\scrB$ as~$n$ increases,
we see that $(a+\nicefrac{i}{n})^{-1}$ converges to~$a^{-1}$
in~$\scrB$ by~\sref{cstar-inv-continuous}.
Thus, as all~$(a+\nicefrac{1}{n}i)^{-1}$ are in~$\scrA$,
and~$\scrA$ is closed in~$\scrB$,
we see that~$a^{-1}$ is in~$\scrA$.
\end{point}
\begin{point}[inverse-permanence]{Exercise}%
Show that the assumption that~$a$ is self-adjoint
can be dropped. 

(Hint: consider $a^*a$; c.f.~Conway Proposition VIII.1.14.)
\end{point}
\end{point}
\begin{point}{Definition}%
The \Define{spectrum} of an element $a$
of a $C^*$-algebra
is the set \Define{$\spec(a)$}
of complex numbers~$\lambda$
for which~$a-\lambda$ is not invertible.
\begin{point}{Exercise}%
Verify the following examples.
\begin{enumerate}
\item
The spectrum of a continuous function~$f\colon X\to \R$
on a compact Hausdorff space~$X$
being an element of the $C^*$-algebra $C(X)$
is the image of~$f$, that is,
$\spec(f) = \{f(x)\colon x\in X\}$.
\item
The spectrum of a square matrix~$A$
from the $C^*$-algebra $M_n$
is the set of eigenvalues of~$A$.
\end{enumerate}
\end{point}
\begin{point}[spectrum-basic]{Exercise}%
Let~$a$ be an element of a $C^*$-algebra $\scrA$.
\begin{enumerate}
\item
Prove that $\spec(a)\subseteq \R$ when $a$ is self-adjoint
(see~\sref{spectrum-self-adjoint-real}).

The reverse implication also holds,
as we'll see later on in \TODO{}.
\item
Show that $\spec(a^2)\subseteq [0,\infty)$ when $a$ is self-adjoint
(see~\sref{spectrum-self-adjoint-real}).

\item
Show that $|\lambda|\leq \|a\|$ for all~$\lambda\in\spec(a)$
using~\sref{spectrum-bounded}.

In fact, we will see in~\sref{norm-spectrum},
that $\|a\|=\sup\{\left|\lambda\right|\colon \lambda\in \spec(a)\}$.
\item
Show that $\spec(a)$ is closed (using~\sref{spectrum-bounded}).
\item
Show that $\spec(a+z)=\{\lambda+z\colon \lambda\in\spec(a)\}$
for all~$z\in \C$.
\end{enumerate}
\end{point}
\end{point}
\begin{point}%
On first sight,
the spectrum $\spec(a)$
of an element~$a$ of a $C^*$-algebra~$\scrA$ 
depends not only on~$a$,
but also on the surrounding $C^*$-algebra~$\scrA$ for it determines
for which~$\lambda\in\C$ the operator $a-\lambda$ is invertible.
Thus we should perhaps write $\spec_\scrA(a)$ instead
of~$\spec(a)$.
However, such careful bookkeeping turns out 
be unnecessary
by the following result.
\end{point}
\begin{point}[spectral-permanence]{Theorem (Spectral Permanence)}%
Let~$\scrB$ be a $C^*$-subalgebra of a $C^*$-algebra $\scrA$.
Then~$\spec_{\scrA}(a)=\spec_\scrB(a)$
for every element~$a$ of~$\scrB$.
\begin{point}{Proof}%
Let~$a$ be an element of~$\scrB$,
and let~$\lambda\in \C$.
We must show that $a-\lambda$ is invertible in~$\scrA$
iff $a-\lambda$ is invertible in~$\scrB$.
Surely,
if $a-\lambda$ has an inverse $(a-\lambda)^{-1}$ in~$\scrB$,
then~$(a-\lambda)^{-1}$ is also an inverse of~$a-\lambda$ in~$\scrA$,
since~$\scrB\subseteq \scrA$.
The other, non-trivial, direction follows
directly from~\sref{inverse-permanence}.\qed%
\end{point}
\end{point}
\end{parsec}

\begin{parsec}%
\begin{point}%
The next order of business
is to show that the spectrum~$\spec(a)$ of an element~$a$
of a $C^*$-algebra contains enough points, so to speak.
One incarnation of this idea that you might have heard
is that~$\spec(a)$ is non-empty
(see~\sref{spectrum-non-empty}), but
we will need more,
and prove that  $\|a\|=\left|\lambda\right|$
for some~$\lambda\in\spec(a)$.
Somewhat baffling,
the canonical and seemingly
easiest way to derive this fact is by considering the power series
expansion of a cleverly chosen $\scrA$-valued function
(see~\sref{norm-spectrum}).
To this end,
we'll first quickly redevelop some complex analysis
for~$\scrA$-valued functions
(instead of $\C$-valued functions).
\end{point}
\begin{point}{Setting}%
Fix a $C^*$-algebra~$\scrA$ for the remainder of this paragraph.
For brevity,
we'll say that a \Define{function}
is a partially defined map $f\colon \C\to \mathscr{A}$
whose domain of definition $\dom(f)$ is an open subset of~$\C$.
Such a function is called \Define{holomorphic} at a point~$z\in \C$
if $f$ is defined on~$z$ (that is, $z\in \dom(f)$),
and 
\begin{equation*}
\frac{f(x)-f(y)}{x-y}
\end{equation*}
converges (with respect to the norm on~$\scrA$)
to some element~$f'(x)$ of~$\scrA$
as $y\in \dom(f)\backslash\{x\}$
converges to~$x$.

We say that~$f$ is \Define{holomorphic}
if~$f$ is holomorphic at~$x$ for all~$x\in \dom(f)$,
and the function $z\mapsto f'(z)$
with $\dom(f')=\dom(f)$
is its \Define{derivative}.
\end{point}
\begin{point}{Exercise}%
Verify the following examples of holomorphic functions.
\begin{enumerate}
\item
If~$f$ and $g$ are holomorphic functions with $\dom(f)=\dom(g)$,
then $f+g$ and $f\cdot g$ are holomorphic,
and $(f+g)'=f'+g'$ and $(f\cdot g)' = f'g+g'f$.

\item
The function~$f$ given by $f(z)=z$ and~$\dom(f)=\C$
is holomorphic, and $f'(z)=1$ for all $z\in\C$.

\item
Let~$a\in \scrA$. The constant function $f$ given by $f(z)=a$
for all~$z\in \C$ is holomorphic, and $f'(z)=0$ for all~$z\in \scrA$.

\item
Any polynomial,
that is, function~$f$ of the form $f(z)\equiv a_n z^n+\dotsb+a_1 z+a_0$
is holomorphic with $f'(z)=na_nz^{n-1}+\dotsb+2a_2z+a_1$.
\end{enumerate}
\end{point}
\TODO{Definition of polygonal paths}
\TODO{Definition of integration along these}
\begin{point}[goursat]{Goursat's Theorem}%
Let~$f$ be a holomorphic function,
and let~$T$ be a triangle whose interior
is entirely contained in~$\dom(f)$.
Then~$\int_T f = 0$.
\begin{point}[goursat-1]{Proof}%
Note that if~$f$ has a primitive,
that is, $f\equiv g'$ for some holomorphic function~$g$,
then it is clear that~$\int_T f=0$
by \TODO{the fundamental theorem of calculus}.
Although it is true that every holomorphic function
with simply connected domain has a primitive,
this result is not yet available 
(and in fact depends on this very theorem).
Instead we will approximate~$f$
by an affine function
(which does have a primitive)
using the derivative of~$f$.
But since such an approximation only
concerns a single point,
we first need to zoom in.
\begin{point}[goursat-2]%
If we split~$T$ into four similar triangles
$T^\text{i}$, $T^\text{ii}$,
$T^\text{iii}$, $T^\text{iv}$
(see picture~\TODO{})
we have $\smash{\int_Tf = \sum_{n={\text{i}}}^{\text{iv}} \int_{T^n}f}$.
There is $T'$ among
$T^\text{i}$, $T^\text{ii}$,
$T^\text{iii}$, $T^\text{iv}$
with 
 $\|\int_Tf\|\leq 4 \|\int_{T'} f\|$.
Clearly, $\length(T)=2\length(T')$.
Write~$T_0 := T$ and $T_1 := T'$. 

From this it is clear how to
 get a sequence of similar triangles $T_0, T_1, T_2, \dotsc$
with $\|\int_Tf\|\leq 4^n \|\int_{T_n} f\|$,
and $\length(T)=2^n\length(T_n)$.
\end{point}
\begin{point}%
If we pick a point on each triangle~$T_n$ 
we get a Cauchy sequence
that converges to some point~$z_0\in\C$
which lies in (or on) each of the triangles~$T_1,T_2,\dotsc$.
We can approximate $f$ by an affine
function at~$z_0$ as follows.
For $z\in \dom(f)$,
\begin{equation*}
f(z)\ = \ f(z_0)\,+\,f'(z_0)\,(z-z_0)\,+\,r(z)\,(z-z_0),
\end{equation*}
where~$r\colon \dom(f)\to \C$
is given by $r(z)=f'(z_0)-(f(z)-f(z_0))(z-z_0)^{-1}$ for $z\neq z_0$
and $r(z_0)=0$.
We see that~$r(z)$ converges to~$0$ as~$z\to z_0$.

Let~$\varepsilon >0$ be given.
There is~$\delta>0$
such that $z\in\dom(f)$
and $\|r(z)\|\leq \varepsilon$
for all~$z\in \C$ with $\|z-z_0\|<\delta$.
There is~$n$ such that the triangle~$T_n$ is contained
in the ball around~$z_0$ of radius~$\delta$.
Note that $\int_{T_n} f(z_0)+f'(z_0)(z-z_0)\,dz=0$
by the discussion in~\sref{goursat-1}, because
the integrated function is affine.
Thus
\begin{equation*}
\textstyle
\int_{T_n} f \  = \ \int_{T_n}r(z)\,(z-z_0)\,dz.
\end{equation*}
Note that for $z\in T_n$,
we have  $\|z-z_0\|\leq \length(T_n)$,
and $\|r(z)\|\leq \varepsilon$ (because $\|z-z_0\|\leq \delta$),
and so $\|r(z)(z-z_0)\|\leq \varepsilon\,\length(T_n)$.
Thus:
\begin{equation*}
\textstyle
\|\int_{T_n} f\| \  = \ \|\int_{T_n}r(z)\,(z-z_0)\,dz\|
\ \leq\ \varepsilon\length(T_n)^2.
\end{equation*}
Using the inequalities from~\sref{goursat-2},
we get
\begin{equation*}
\textstyle
\|\int_T f\|\ \leq\ 4^n\, \|\int_{T_n} f\|
\ \leq\ \varepsilon \,4^n\,\length(T_n)^2 
\ \equiv\ \varepsilon \length(T)^2.
\end{equation*}
Since~$\varepsilon>0$ was arbitrary,
we see that~$\int_T f=0$.\qed
\end{point}
\end{point}


(Proof is based on~\cite{moore1900}.)
\end{point}%
\begin{point}[cauchy-formula]{Theorem (Cauchy's Integral Formula)}%
Let~$f$ be a holomorphic $\scrA$-valued function.
Let~$p$ be a simple positively oriented 
polygon with $\interior(p)\subseteq\dom(f)$.
Then for $z_0\in \interior(p)$,
\begin{equation*}
f(z_0)\ = \ \frac{1}{2\pi i}\,\int_p \frac{f(z)}{z-z_0}\,dz
\end{equation*}
\begin{point}{Proof}%
Since~$\int_p \frac{f(z_0)}{z-z_0}\,dz
= 2\pi i f(z_0)$ by~\TODO{reason},
it suffices to show that
\begin{equation}
\label{eq:cauchy-formula-1}
\int_p \frac{f(z)-f(z_0)}{z-z_0}\,dz \ = \ 0.
\end{equation}
\begin{point}[cauchy-formula-1]%
Let~$\varepsilon>0$ be given.
Since~$f$ is holomorphic at~$z_0$
we can find $\delta>0$ with
$\|f(z)-f(z_0)\|\leq \|z-z_0\|$
for all~$z\in\dom(f)$ with $\|z-z_0\|\leq \delta$. 
\end{point}
\begin{point}%
To use~\sref{cauchy-formula-1},
we must restrict our attention to a smaller polygon.
Let~$q$ be a simple positively oriented polygon 
with $z_0\in \interior(q)$,  $\overline{q}\subseteq \interior(p)$,
$\length(q)\leq \varepsilon$,
and $\|z_0-z\|\leq \delta$ for all~$z\in \partial q$.
By~\sref{goursat}, we have
\begin{equation}
\label{eq:cauchy-formula-2}
\int_p \frac{f(z)-f(z_0)}{z-z_0}
\ = \ 
\int_q \frac{f(z)-f(z_0)}{z-z_0}.
\end{equation}
By~\sref{cauchy-formula-1}
we have
\begin{equation*}
\left\|\,\int_q \frac{f(z)-f(z_0)}{z-z_0}\,dz\,\right\|
\ \leq \ \length(q)\,\cdot\,
\sup_{z\in\partial q} \,\left\|\,\frac{f(z)-f(z_0)}{z-z_0}\,\right\|
\ \leq \ \varepsilon.
\end{equation*}
Since~$\varepsilon>0$ was arbitrary,
we get Eq.~\eqref{eq:cauchy-formula-1}
from Eq.~\eqref{eq:cauchy-formula-2}.\qed
\end{point}
\end{point}
\end{point}
\begin{point}[taylor]{Proposition}%
Let~$f$ be a holomorphic $\scrA$-valued function.
Let~$p$ be a simple positively oriented polygon 
with $\interior(p) \subseteq \dom(f)$.
Then for all~$w,z\in \interior(p)$
with $\|z-w\|<\inf_{u\in \partial p} \left| u-w \right|$,
we have:
\begin{equation*}
f(z)\ = \ 
\sum_{n=0}^\infty \ \frac{1}{2\pi i}\int_p \frac{f(u)}{(u-w)^{n+1}}\,du
\ (z-w)^n.
\end{equation*} 
\begin{point}{Proof}%
By~\sref{cauchy-formula} we have
\begin{alignat*}{3}
2\pi if(z)\ &=\  \int_p \frac{f(u)}{u-z}\,du
\ =\ 
  \int_p  \frac{f(u)}{u-w}\,\frac{1}{1-\frac{z-w}{u-w}}\,du
\end{alignat*}
Since~$\left|z-w\right|<\left|u-w\right|$
for~$u\in \partial p$,
we get, by~\sref{geometric},
\begin{equation*}
2\pi if(z) \ = \ 
  \int_p \frac{f(u)}{u-w}\, \sum_{n=0}^\infty 
\frac{(z-w)^n}{(u-w)^n}
 \,du\ = \ 
  \sum_{n=0}^\infty \ \int_p   \frac{f(u)}{(u-w)^{n+1}}du \ (z-w)^n,
\end{equation*}
where the interchange of ``$\sum$'' and ``$\int$''
was allowed by~\TODO{to add}.\qed
\end{point}
\end{point}
\begin{point}[norm-spectrum]{Proposition}%
For an element~$a$ of a $C^*$-algebra~$\scrA$,
we have
\begin{equation*}
\|a\|\,=\,\sup\{\,\left|\lambda\right|\colon 
\,\lambda\in \spec(a)\backslash\{0\}\,\}.
\end{equation*}
\begin{point}{Proof}%
Write~$r=
\sup\{\left|\,\lambda\right|\colon\, \lambda\in \spec(a)\backslash\{0\}\,\}$.
Since~$\left|\lambda\right| \leq \|a\|$
for all~$\lambda\in\spec(a)$
(\sref{spectrum-bounded})
we see that~$r\leq \|a\|$.
Thus we only need to show that~$\|a\|\leq r$. 

Let~$\varepsilon>0$ be given.
It suffices to show that~$\|a\|\leq (1+\varepsilon)\,r$.
\begin{point}%
The trick is to consider
the power series expansion
around~$0$ of the holomorphic function~$f$ defined
on~$G:=\{\,z\in \C\colon 1-az\text{ is invertible}\,\}$ 
by  $f(z)=z(1-az)^{-1}$.
\end{point}
\begin{point}%
Indeed, we have $f(z) = \sum_n a^nz^{n+1}$
for all~$z\in \C$ with $\left|z\right|\|a\|<1$
because for such~$z$
we have $\sum_n (az)^n=(1-az)^{-1}$
by~\sref{geometric},
and thus~$f(z)=z(1-az)^{-1}=z\sum_n (az)^n = \sum_n a^nz^{n+1}$.
\end{point}
\begin{point}[norm-spectrum-2]%
Moreover,
we know by~\sref{harmonic-divergence}
that for every $z\in\C$ with $\left|z\right|\|a\|>1$
the series $\sum_n(az)^n$ 
and thus $\sum_n a^n{z}^{n+1}$ diverges.
\end{point}
\begin{point}%
Let~$R$ denote the distance of~$0$ to
the border of~$G$,
that is, 
$R= \inf\{\left|\lambda\right|\in \C\colon \lambda\notin G\}$.
We claim that~$R^{-1}=r$.
To begin,
recall that $\lambda\notin G$ iff $1-a\lambda$ is invertible.
Since clearly~$0\in G$,
we have $\lambda\notin G$ iff $\lambda\neq 0$ and $\lambda^{-1}-a$ 
is invertible, that is, $\lambda^{-1}\in \spec(a)\backslash\{0\}$.
Thus we see that $R^{-1}=r$.
\end{point}
\begin{point}[norm-spectrum-3]%
We know by~\sref{rigid-expansion}
that the expansion $f(z)=\sum_na^nz^{n+1}$
must be valid not only for~$z\in\C$ with $\left|z\right|\|a\|<1$,
but for all~$z\in\C$ with 
$\|z\|< R$,
that is, $\left|z\right|r\equiv \left|z\right| R^{-1} < 1$.
In particular,
for any~$z$ with $\left|z\right|\|a\|>1$ 
(see~\sref{norm-spectrum-2})
we cannot have $\|z\| r <1$,
and so we must have $\left|z\right| r \geq 1$.
Multiplying by~$\|a\|$,
we see that $\|a\|\leq \|a\|\left|z\right|r$.
Since we can choose~$z$ such that  $\left|z\right|\|a\|\leq 1+\varepsilon$,
we see that $\|a\|\leq \|a\|\left|z\right|r \leq (1+\varepsilon)r $,
and so we are done.\qed
\end{point}
\end{point}
\end{point}
\begin{point}[spectrum-non-empty]{Exercise}%
Given an element~$a$ of a $C^*$-algebra show that
\begin{enumerate}
\item $\spec(a)\neq \varnothing$;
\item $\spec(a) =\{\lambda\}$ iff $a=\lambda$ for every $\lambda \in\C$.
\end{enumerate}
\end{point}
\end{parsec}
\begin{parsec}%
\begin{point}{Theorem (Gelfand--Mazur)}%
Let~$\scrA$ be a $C^*$-algebra in which every non-zero element
has an inverse, but $0\neq 1$.
Then~$\scrA = \C$.
\begin{point}{Proof}%
Let~$a\in\scrA$.
Since~$\spec(a)\neq \varnothing$ by~\sref{spectrum-non-empty},
there is~$\lambda\in \scrA$
such that~$a-\lambda$ is not invertible.
Since every non-zero element in~$\scrA$ has an inverse in~$\scrA$
by assumption,
we have $a-\lambda=0$, and so $a=\lambda$.\qed
\end{point}
\end{point}
\end{parsec}
\begin{parsec}%
\begin{point}%
To apply this version of Gelfand--Mazur,
we study the positive elements 
in a $C^*$-algebra.
Usually,
elements of the form $a^*a$ are defined to be positive,
but at this stage a definition (\sref{cstar-positive}) based
on the following observation is more convenient.
\end{point}
\begin{point}[real-pos-ineq]{Exercise}%
Show that 
$\left|\,\lambda-t\,\right| \,\leq\, t$ iff  $\lambda \in[0,2t]$,
where $\lambda,t\in\R$.
\end{point}
\begin{point}[pos-spectrum]{Proposition}%
For a self-adjoint element $a$ from a $C^*$-algebra,
and $t\in [0,\infty]$, 
\begin{equation*}
\|a-t\|\,\leq\, t\qquad\iff\qquad \spec(a)\subseteq [0,2t].
\end{equation*}%
\begin{point}{Proof}%
To begin, note that~$\spec(a-t)=\spec(a)-t\subseteq \R$ 
by~\sref{spectrum-basic},
because~$a$ is self-adjoint.
Thus $\|a-t\|=\sup\{\,\left|\lambda-t\right|\colon \lambda\in \spec(a)\,\}$
by~\sref{norm-spectrum}.
Hence $\|a-t\|\leq t$
iff $\left|\lambda-t\right|\leq t$ for all~$\lambda\in\spec(a)$
iff $\spec(a)\subseteq [0,2t]$ (by \sref{real-pos-ineq}).\qed
\end{point}
\begin{point}{Exercise}%
Show
(using~\sref{pos-spectrum} and~\sref{spectrum-basic})
that
for any self-adjoint element $a$ of a $C^*$-algebra~$\scrA$,
the following are equivalent.
\begin{enumerate}
\item 
\label{cstar-pos-1}
$\|a-t\|\leq t$
for some $t\geq \frac{1}{2}\|a\|$;
\item 
\label{cstar-pos-2}
$\|a-t\|\leq t$
for all $t\geq \frac{1}{2}\|a\|$;
\item 
\label{cstar-pos-3}
$\spec(a)\subseteq[0,\infty)$.
\end{enumerate}
\end{point}
\end{point}
\begin{point}[cstar-positive]{Definition}%
Let $\scrA$ be a $C^*$-algebra.
We say that $a\in \scrA$
is \Define{positive} if $a^*=a$ and  $\|a-t\|\leq t$
for some $t\geq \frac{1}{2}\|a\|$.
We denote the set of positive elements of~$\scrA$ by~$\Define{\pos{\scrA}}$,
and write $a\leq b$ for $a,b\in\scrA$ when $b-a$ is positive.
\begin{point}{Exercise}%
Let~$\scrA$ be a $C^*$-algebra.
\begin{enumerate}
\item
Show that~$\pos{\scrA}$ is a \emph{cone}:
$0\in \pos{\scrA}$,
$a+b\in \pos{\scrA}$ for all $a,b\in\pos{\scrA}$,
and
$\lambda a\in \pos{\scrA}$  
for all $a\in \pos{\scrA}$ and $\lambda\in [0,\infty)$.
Show that~$\pos{\scrA}$ is closed,
and~$1\in\pos{\scrA}$.
Conclude that~$\leq$ is a partial order on~$\scrA$,
and that~$\sa{\scrA}$ is an ordered vector space.
\item
Let~$a$ be a self-adjoint element of~$\scrA$.
Show that $-\|a\|\leq a \leq \|a\|$.
(Thus, $a$ is an \emph{order unit} of~$\sa{\scrA}$.)
In fact, prove that
 $-\lambda \leq a\leq \lambda$
iff $\|a\|\leq \lambda$,
for $\lambda\in [0,\infty)$.
Conclude that $\|a\| = \inf\{ \lambda \in \R\colon 
-\lambda \leq a\leq \lambda\}$.
(Thus $\sa{\scrA}$ is a \emph{complete Archimedean order unit space}
see~\TODO{}.)

Show that $0\leq a \leq b$ entails $\|a\|\leq \|b\|$
for $a,b\in\sa{\scrA}$.

\item
Give an example of positive elements $a$ and~$b$
from a $C^*$-algebra
such that $ab$ is not positive.

\item 
Show that $a^2$ is positive for every self-adjoint element~$a$ of~$\scrA$.

Show that $a^n$ is positive for \emph{even} $n\in \N$ and~$a\in\sa{\scrA}$.

Show that $a^n$ is positive iff $a$ is positive for \emph{odd} $n\in \N$
and $a\in\sa{\scrA}$.

Show that $a^n$ is positive
for every positive $a$ from~$\scrA$ and~$n\in \N$.
\end{enumerate}
\end{point}
\end{point}
\begin{point}[prod-spec]{Lemma}%
For elements $a$ and $b$ from a $C^*$-algebra,
we have
\begin{equation*}
\spec(ab)\backslash\{0\}\ =\ \spec(ba)\backslash\{0\}.
\end{equation*}
\begin{point}{Proof}%
Let~$\lambda\in \C$ with $\lambda\neq 0$ be given.
We must show that $\lambda - ab$ is invertible
iff $\lambda - ba$ is invertible.
Suppose that $\lambda-ab$ is invertible.
Then using the equality$a(\lambda-ba)=(\lambda-ab)a$
one sees that $(1+b(\lambda-ab)^{-1}a)(\lambda-ba)=\lambda$.
Since similarly $(\lambda-ba)(1+b(\lambda-ab)^{-1}a)=\lambda$,
we see that $\lambda^{-1}(1+b(\lambda-ab)a)$
is the inverse of~$\lambda-ba$.\qed
\end{point}
\end{point}
\begin{point}[astara-non-neggative]{Lemma}%
We have $a^*a  \leq 0\implies a=0$
for every element~$a$ of a $C^*$-algebra.
\begin{point}{Proof}%
Suppose that $a^*a\leq 0$.
Then~$\spec(a^*a)\subseteq (-\infty,0]$, almost by definition,
and so $\spec(aa^*)\subseteq (-\infty,0]$ by~\sref{prod-spec},
giving $aa^*\leq 0$.
Thus $a^*a+aa^*\leq 0$.

But on the other hand, 
$a^*a+aa^* = 2(\Real{a}^2 + \Imag{a}^2) \geq 0$,
and so~$a^*a+aa^*=0$.
Then $0\geq a^*a=-aa^*\geq 0$ gives $a^*a=0$,
and $a=0$.\qed
\end{point}
\end{point}
\end{parsec}

\begin{parsec}%
\begin{point}{Lemma}%
Let $a$ be an element of a $C^*$-algebra $\scrA$
with $0\leq a\leq 1$.
Then there is a unique element~$b\in\scrA$ 
with, $0\leq b\leq 1$,
$ab=ba$,
and~$(1-b)^2 = 1-a$.
To be more specific,
$b$ is the limit of
the sequence $b_0\leq b_1\leq \dotsb$
given by $b_0=0$ and $b_{n+1} = \frac{1}{2}(a+b_n^2)$.
Moreover,
if~$c\in\scrA$ commutes with~$a$, then~$c$ commutes with~$b$,
and if in addition $a\leq 1-c^2$ and $c^*=c$,
we have $b\leq 1-c$.
\begin{point}{Proof}%
When discussing $b_n$ it 
is convenient to write~$b_n \equiv q_n(a)$
where~$q_0,q_1,\dotsc$ are the polynomials over~$\R$ given by
$q_0=0$ and $q_{n+1}=\frac{1}{2}(x + q_n^2)$.
For example,
we have~$b_n\geq 0$, 
because all coefficients of~$q_n$ are all positive,
and $a,a^2,a^3,\dotsc$ are positive by~\sref{cstar-pos-power}.
With a similar argument we can see that
 $b_0 \leq b_1\leq b_2\leq \dotsb$.
Indeed, 
the coefficients of~$q_{n+1}-q_n$
are positive,
by induction,
because
\begin{alignat*}{3}
q_{n+2}-q_{n+1} \ &=\ \textstyle \frac{1}{2}(x+ q_{n+1}^2)
\,-\, \textstyle\frac{1}{2}(x+q_n^2) \\
&=\ \textstyle\frac{1}{2}(q_{n+1}^2- q_n^2) \\
&=\ \textstyle\frac{1}{2}(q_{n+1}+q_n)(q_{n+1}-q_n) \\
&=\ (q_n+\textstyle\frac{1}{2}(q_{n+1}-q_n))(q_{n+1}-q_n),
\end{alignat*}
has positive coefficients
if~$q_{n+1}-q_n$ has positive coefficients,
and $q_1-q_0\equiv \frac{1}{2}x$ clearly has positive coefficients.
Hence~$b_{n+1}-b_{n} = q_{n+1}(a)- q_n(a)$ is positive.
(Note that we have carefully avoided
using the fact here that the product of positive 
commuting elements is positive,
which is not available to us until~\sref{ineq-square-root}.)

Let us now show that~$b_1\leq b_2\leq \dotsb$ converges.
Let~$n\geq N$ from~$\N$ be given.
Since the coefficients of $q_n-q_N$ are positive,
and $\|a\|\leq 1$,
the triangle inequality gives us
$\|b_n-b_N\|\equiv \|(q_n-q_N)(a)\|\leq q_n(1)-q_N(1)$,
and
so it suffices to 
show that the ascending sequence
 $q_0(1)\leq q_1(1)\leq \dotsb$
of real numbers
converges,
c.q.~is bounded.
Indeed,
we have $q_n(1)\leq 1$,
by induction,
because $q_{n+1}(1)\equiv \frac{1}{2}(1+q_n(1)^2)
\leq 1$ if $q_n(1)\leq 1$,
and clearly $0\equiv q_0(1)\leq 1$.

Let~$b$ be the limit of $b_0\leq b_1\leq\dotsb$.
Then~$b$ being the limit of positive elements
is positive
(see~\sref{positive-norm-closed}),
and if $c\in \scrA$ commutes with~$a$,
then $c$ commutes with all powers of~$a$,
and therefore with all~$b_n$,
and thus with~$b$.
Further, 
from the recurrence relation $q_{n+1} = \frac{1}{2}(a+q_n^2)$
we get $b=\frac{1}{2}(a+b^2)$,
and so $-a = -2b+b^2$, 
giving us  $(1-b)^2 = 1-2b+b^2 = 1-a$.

Let us prove that~$b\leq 1$.
To begin, note that~$\|b_n\|\leq 1$ for all~$n$, by induction,
because, $0\equiv \|b_0\|\leq 1$,
and if $\|b_n\|\leq 1$, then $\|b_{n+1}\|\leq \frac{1}{2}(\|a\|+\|b_n\|^2)
\leq 1$, since $\|a\|\leq 1$.
Since~$b_n\geq 0$, we get $-1\leq b_n\leq 1$ for all~$n$,
and so $b\leq 1$.

\begin{point}[square-commuting-monotone]%
Let us take a step back for the moment.
From what we have proven so far
we see that each positive $c\in\scrA$
is of the form $c\equiv d^2$ for some positive~$d\in\scrA$
which commutes with all~$e\in \scrA$ that commute with~$c$.

From this we can see that $c_1c_2\geq 0$
for  
 $c_1,c_2 \in\pos{\scrA}$
with $c_1c_2 = c_2c_1$.
Indeed, writing $c_i\equiv d_i^2$ with $d_i$ as above,
we have $d_1c_2=c_2d_1$ (because $c_1c_2=c_2c_1$), and thus 
$d_1d_2=d_2d_1$. It follows that $d_1d_2$ is self-adjoint,
and $c_1c_2 = (d_1d_2)^2$. Hence $c_1c_2\geq 0$.

We will also need the following corollary.
For~$c,d\in\pos{\scrA}$ with $c\leq d$ and $cd=dc$,
we have $c^2\leq d^2$.
Indeed, $d^2-c^2 \equiv d(d-c)+c(d-c)$
is positive by the previous paragraph.
\end{point}
\begin{point}[ineq-square-root]%
Let~$c\in\sa{\scrA}$ be such that~$ca=ac$ and  $a\leq 1-c^2$.
We must show that $b\leq 1-c$.
Of course,
since~$b$ is the limit of $b_1,b_2,\dotsc$,
it suffices to show that~$b_n\leq 1-c$,
and we'll do this by induction.
Since $0\leq c^2 \leq 1-a$,
 we have $\|c\|^2\leq \|1-a\|\leq 1$,
and so $-1\leq c\leq 1$.
Thus $b_0\equiv 0\leq 1-c$.
Now, suppose that~$b_n\leq 1-c$ for some~$n$.
Then $b_{n+1} = \frac{1}{2}(a+b_n^2)
\leq \frac{1}{2}( (1-c^2)+(1-c)^2) = 1-c$,
where we have used that $b_n^2 \leq (1-c)^2$,
because $b_n\leq 1-c$
by~\sref{square-commuting-monotone}.
\begin{point}%
We can now show that~$b$ is unique.
Let~$b'\in \scrA$ with $0\leq b'\leq 1$,
 $b'a=ab'$ and $(1-b')^2=1-a$ be given;
we must prove that $b'=b$.
Note that $b'\leq 1$,
because $\|1-b'\|^2=\|1-a\|\leq 1$,

From $a=1-(1-b')^2$,
we immediately get $b \leq 1-(1-b')=b'$ by~\sref{ineq-square-root}.
For the other direction,
note that
$(1-b')^2= (1-b)^2 \equiv (1-b'+(b'-b))^2 = (1-b')^2+2(1-b')(b'-b)+(b'-b)^2$,
which gives $0=2(1-b')(b'-b)+(b'-b)^2$.
Now, since~$1-b'$ and $b'-b$ are positive,
and commute, we see that $(1-b')(b'-b)$ is positive 
by~\sref{ineq-square-root}, and so 
 $0=2(1-b')(b'-b)+(b'-b)^2\geq (b'-b)^2 \geq 0$,
which entails $(b'-b)^2=0$, and so $\|(b'-b)^2\|=\|b'-b\|^2=0$,
yielding $b=b'$.\qed
\end{point}
\end{point}
\TODO{Thank Sander}
\end{point}
\end{point}
\begin{point}[sqrt]{Exercise}%
Let~$a$ be a positive element of a $C^*$-algebra~$\scrA$.
Show that there is a unique 
positive element of~$\scrA$
denoted by $\Define{\sqrt{a}}$ with $\smash{\sqrt{a}^2}=a$
and $a\sqrt{a}=\sqrt{a}a$.
Show that if~$c\in\scrA$ commutes with~$a$,
then $c\sqrt{a}=\sqrt{a}c$,
and if in addition $c^*=c$ and $c^2\leq a$,
then $c\leq \sqrt{a}$.
\end{point}
\begin{point}{Definition}
Given a self-adjoint element~$a$ of a $C^*$-algebra $\scrA$,
we write
\begin{equation*}
\textstyle
\Define{\left|a\right|}\ :=\ \sqrt{a^2}
\qquad
\Define{\pos{a}}\ :=\ \frac{1}{2}(\left|a\right| + a)
\qquad
\Define{a_{-}}\ :=\ \frac{1}{2}(\left|a\right| - a).
\end{equation*}
We call $a_+$ the \Define{positive part} of~$a$,
and $a_-$ the \Define{negative part}.
\end{point}
\begin{point}{Exercise}%
Let~$a$ be a self-adjoint element of a
 $C^*$-algebra $\scrA$.
\begin{enumerate}
\item
Show that $-\left|a\right| \leq a \leq \left| a \right|$,
and $\|\,\left|a\right|\,\|= \|a\|$.
\item
Prove that $a_+$ and $a_-$ are positive,  $a=a_+-a_-$
and $a_+a_-=a_-a_+=0$.
\item
One should not read too much into the notation
$\left|\,\cdot\,\right|$:
give an example of
self-adjoint elements~$a$ and~$b$ of a $C^*$-algebra with
 $\left|a+b\right|\nleq \left|a\right|+ \left|b\right|$.

(Hint: one may take  
$a=\frac{1}{2}\left(\begin{smallmatrix}1 & 1 \\ 1 & 1\end{smallmatrix}\right)$
and $b=-\left(\begin{smallmatrix}1 & 0 \\ 0 & 0 \end{smallmatrix}\right)$.)
\end{enumerate}
\end{point}
\begin{point}{Lemma}%
Given an element $a$ of a $C^*$-algebra $\scrA$,
we have $a^*a\geq 0$.
\begin{point}{Proof}%
Writing $b:=a((a^*a)_-)^{\nicefrac{1}{2}}$,
we have $b^*b=-((a^*a)_-)^2\leq 0$,
and so $b=0$ by~\sref{astara-non-neggative}.
Hence~$a^*a_-=0$ giving us $a^*a=(a^*a)_+\geq 0$.\qed
\end{point}
\end{point}
\end{parsec}

\begin{parsec}%
\begin{point}%
Now that we have have a firm grip
on the positive elements of a $C^*$-algebra,
we turn to the representation
of (commutative) $C^*$-algebras.
The key is the existence of enough (multiplicative)
positive functionals.
\end{point}
\begin{point}{Definition}%
An \Define{order ideal}
of a $C^*$-algebra~$\scrA$
is a linear subspace~$I$ of~$\scrA$
with $b\in I\implies b^*\in I$
and $b\in I\cap\pos{\scrA}\implies [-b,b]\subseteq I$.

If in addition $a\in I\cap\sa{\scrA} \implies \left|a\right|\in I$,
we say that~$I$ is a \Define{Riesz ideal}.
\end{point}
\begin{point}{Lemma}%
Let~$I$ be maximal among order ideals
of a  $C^*$-algebra~$\scrA$ with~$1\notin I$.
Then there is a pu-map $f\colon \scrA\to \C$
with $\ker(f)=I$.
\begin{point}{Proof}%
Form the quotient vector space $\scrA/I$
with quotient map $q\colon \scrA\to \scrA/I$.
Note that since~$1\notin I$
we have $q(1)\neq 0$
and so we may regard~$\C$ 
to be a linear subspace of~$\scrA/I$
via $\lambda\mapsto q(\lambda)$.
We will, in fact, show that~$\C=\scrA/I$.

But let us first put an order on~$\scrA/I$:
we say that $\mathfrak{a}\in \scrA/I$ is positive
if $\mathfrak{a}\equiv q(a)$ for some~$a\in\pos{\scrA}$,
and write $\mathfrak{a}\leq \mathfrak{b}$ 
if $\mathfrak{b}-\mathfrak{a}$ is positive
for $\mathfrak{a},\mathfrak{b}\in\scrA/I$.
Note that the definition of ``order ideal'' is such
that if both~$\mathfrak{a}$ and $-\mathfrak{a}$ are positive,
then~$\mathfrak{a}=0$.
We leave it to the reader to verify 
that~$\scrA/I$ becomes a partially ordered vector space
with the order defined above.
There is, however,
one detail to which I want to draw you attention,
namely that a scalar $\lambda$ is positive in~$\scrA/I$
iff $\lambda$ is positive in~$\C$.
Indeed, if~$\lambda\geq 0$ in~$\C$,
then $\lambda\geq 0$ in~$\scrA$, and so~$\lambda \geq 0$ in~$\scrA/I$.
On the other hand,
if~$\lambda\geq 0$ in~$\scrA/I$, but~$\lambda\leq 0$ in~$\C$,
then $\lambda\leq 0$ in~$\scrA/I$,
and so $\lambda=0$.
This detail
has the desirable consequence
that once we have shown that~$\scrA/I=\C$,
we automatically get that~$q\colon \scrA\to\C$ is positive.

\begin{point}[pos-hahn-banach-1]%
Let~$a\in \sa{\scrA}$ be given.
Define~$\alpha := \inf\{\,\lambda\in\R\colon\, q(a)\leq \lambda\,\}$.
Note that $-\|a\| \leq \alpha\leq \|a\|$.
We will prove that~$q(a)=\alpha$
by considering the order ideal
\TODO{Double check this proof,
because it is simpler than the one given by Kadison---he first 
shows that $\scrA/I$ is total and Archimedean.}
\begin{equation*}
J\ := \ \{\,b\in \scrA\colon\, \exists m,n\in \Z\,[\ 
m(\alpha-q(a)) \,\leq\, q(\Real{b}),q(\Imag{b})\,\leq\, n(\alpha-q(a))\ ]\,\}.
\end{equation*}
We claim that $1\notin I$.
Indeed, suppose not---towards a contradiction.
Then there is~$n\in \Z$
with $1\leq n(\alpha-q(a))$.
What can we say about~$n$?
If~$n<0$,
then $0\geq \frac{1}{n}\geq \alpha-q(a)$,
so~$\alpha-\frac{1}{n} \leq q(a)$,
but $q(a)\leq \alpha+\varepsilon$
for every~$\varepsilon>0$,
and so~$\alpha-\frac{1}{n}\leq q(a)\leq \alpha-\frac{1}{2n}
\leq \alpha-\frac{1}{n}$,
which implies $\frac{1}{2n}=0$,
which is absurd.
If $n=0$,
then we get $1\leq n(\alpha-q(a))\equiv 0$, which is absurd.
If $n> 0$,
then $\frac{1}{n}\leq \alpha-q(a)$,
or in other words,
 $q(a) \leq \alpha - \nicefrac{1}{n}$,
giving $\alpha \leq \alpha-\nicefrac{1}{n}$
by definition of~$\alpha$,
which is absurd.
Hence~$1\notin J$.

But then since~$I\subseteq J$,
we get~$I=J$, by maximality of~$I$.
Thus, as $\alpha-a\in J$, we have $\alpha-a\in I$,
and so $q(a)=\alpha$, as desired.
\end{point}
\begin{point}%
Let~$a\in \scrA$ be given.
Then~$a=\Real{a}+i\Imag{a}$.
By~\sref{pos-hahn-banach-1},
there are $\alpha,\beta\in \R$ with $q(\Real{a})=\alpha$,
and $q(\Imag{a})=\beta$.
Thus~$q(a)=\alpha+i\beta$.
Hence~$\scrA/I=\C$.
Since the quotient map $q\colon \scrA\to \scrA/I\equiv \C$
is pu, and $\ker(q)=I$, we are done.\qed
\end{point}
\end{point}
\end{point}
\begin{point}%
Let~$\scrA$ be a $C^*$-algebra,
and let~$f\colon \scrA\to \C$ be a pu-map
\TODO{finish}

\end{point}
\end{parsec}


%
%  Cauchy--Schwarz for positive functionals
%
\begin{parsec}[cstar-cs]%
\begin{point}{Lemma}%
Let~$\scrA$ be a $C^*$-algebra,
and let~$f\colon \scrA\to \C$ be a positive linear map.\\
Then, for all~$a,b\in\scrA$,\quad
$\left|f(a^*b)\right|^2 \ \leq\ f(a^*a)\,f(b^*b)$.
\end{point}
\begin{point}{Proof}%
\TODO{give; NB: it is not trivial that~$f$ is involutive}
\end{point}
\end{parsec}


%
% morphisms between C^*-algebras
%
\begin{parsec}
\begin{point}{Definition}
A linear map $f\colon \scrA \to \scrB$
between $C^*$-algebras
is called
\begin{enumerate}
\item
\Define{\textbf{m}ultiplicative}
if $f(ab)=f(a)f(b)$ for all $a,b\in\scrA$;
\item
\Define{\textbf{i}nvolutive}
if $f(a^*)=f(a)^*$ for all~$a\in\scrA$;
\item
\Define{\textbf{p}ositive}
if $f(a)$ is positive
for every positive $a\in\scrA$, and
\item
\Define{\textbf{u}nital}
if $f(1)=1$.
\end{enumerate}
\end{point}
\begin{point}%
We use the bold letters as abbreviations,
so for instance,
$f$ is \Define{pu} if it is positive and unital,
and a \Define{miu-map}
is a multiplicative, involutive, unital linear map between $C^*$-algebras,
(which is usually called a \Define{unital $*$-homomorphism}.)
\end{point}
\end{parsec}


\begin{parsec}[gelfand]%
\begin{point}{Gelfand's Representation Theorem}%
Let~$\scrA$ be a commutative $C^*$-algebra.
\begin{enumerate}
\item
The \Define{spectrum} of~$\scrA$, \Define{$\spec(\scrA)$},
the set 
of miu-maps $\scrA\to \C$
endowed with the topology of pointwise convergence,
is a compact Hausdorff space.

\item
The \Define{Gelfand transform},
the map $\gamma\colon \scrA\to C(\spec(\scrA))$
given by $\gamma(a)(\varphi)=\varphi(a)$,
is an isomorphism.
\end{enumerate}
\end{point}
\end{parsec}
%
% square root
%
\begin{parsec}[cstar-square]%
\begin{point}{Corollary}%
For each positive element~$a$ of a $C^*$-algebra~$\scrA$,
there is a unique positive element~\Define{$\sqrt{a}$} of~$\scrA$
with $(\sqrt{a})^2 = a$.

\begin{point}[cstar-square-commutes]%
Moreover,
if $b\in \scrA$ commutes with~$a$,
then~$b$ commutes with~$\sqrt{a}$.
\end{point}
\begin{point}[ad-monotone]{Exercise}%
Show that~$a^*ba$
is positive
when~$b$ is a positive of a $C^*$-algebra~$\scrA$,
and $a\in \scrA$ is any element.
\TODO{Move this down}
\end{point}
\end{point}
\end{parsec}
%
%
%
\begin{parsec}%
\begin{point}{Exercise}
Show that a positive map between $C^*$-algebras
is involutive.
\end{point}
\end{parsec}

\begin{parsec}%
\begin{point}%
We now turn to quotients of $C^*$-algebras.
\TODO{Do we need quotients of $C^*$-algebras?}
\end{point}
\begin{point}{Definition}%
An \Define{ideal} of a $C^*$-algebra~$\scrA$
is linear subspace~$\scrD$ of~$\scrA$
such that	
\begin{enumerate}
\item $ad,da\in \scrD$ for all $a\in \scrA$ and $d\in \scrD$, and
\item $d^* \in \scrD$ for all $d\in \scrD$.
\end{enumerate}
\begin{point}{Remark}%
The second requirement turns out to be redundant
(see~\TODO{}),
and is therefor omitted in the literature.
\end{point}
\end{point}
\end{parsec}


\section{Von Neumann algebras}
%
% von Neumann algebras
%
\begin{parsec}[vna]%
\begin{point}{Definition}%
A $C^*$-algebra~$\scrA$
is a \Define{von Neumann algebra}
when
\begin{enumerate}
\item
every bounded directed subset~$D$
of self-adjoint elements of~$\scrA$ (so $D\subseteq \sa{\scrA}$) 
has a supremum $\bigvee D$ in $\sa{\scrA}$, and
\item
if $a$ is a positive element of~$\scrA$
with $\omega(a)=0$ for every \emph{normal} (see below) positive 
linear map $\omega\colon \scrA\to \C$,
then~$a=0$.
\end{enumerate}
\begin{point}%
A positive linear map $\omega\colon \scrA\to \C$
is called \Define{normal}
if $\omega(\bigvee D) = \bigvee_{d\in D} \omega(d)$
for every bounded directed subset of self-adjoint elements of~$D$
which has a supremum $\bigvee D$ in $\sa{\scrA}$.
\end{point}%
\begin{point}%
The \Define{ultraweak topology} on $\scrA$
is the least topology on~$\scrA$
that makes all normal positive linear maps $\omega\colon \scrA\to \C$
continuous.
\end{point}
\end{point}
\end{parsec}
%
% multiplication turns suprema into ultraweak limits
%
\begin{parsec}[vanishing-effects]%
\begin{point}{Lemma}%
Let~$(x_\alpha)_\alpha$ be 
a net of effects of a von Neumann algebra~$\scrA$
which converges ultraweakly to~$0$.
Then $(x_\alpha a)_\alpha$ converges ultraweakly
to $0$ for every~$a\in\scrA$.
\end{point}
\begin{point}{Proof}%
Let~$\omega\colon \scrA\to \C$ be a normal positive linear map.
We have, for each~$\alpha$,
\begin{alignat*}{3}
\left|\,\omega(x_\alpha a)\,\right|^2
\ &=\ 
\left|\, \omega(\,\sqrt{x_\alpha}\,\sqrt{x_\alpha}\,a\,)\, \right|^2
\qquad&&\text{since $x_\alpha\geq 0$}\\
\ &\leq\ 
\omega(x_\alpha)\  \omega(\,a^* x_\alpha a\,) 
\qquad&&\text{by \sref{cstar-cs}}\\
\ &\leq\ 
\omega(x_\alpha)\ \omega(a^*a)
\qquad&&\text{since $x_\alpha\leq 1$}.
\end{alignat*}
Thus,
since $(\omega(x_\alpha))_\alpha$
converges to~$0$,
we see that $(\omega(x_\alpha a))_\alpha$
converges to~$0$,
and so $(x_\alpha a)_\alpha$ converges ultraweakly to~$0$.
\end{point}
\end{parsec}
\begin{parsec}%
\begin{point}{Exercise}
Let~$D$ be a bounded directed set of self-adjoint
elements of a von Neumann algebra~$\scrA$,
and let~$a\in \scrA$.
\begin{point}[vna-supremum-uwlimit]%
Show that the net~$(d)_{d\in D}$ converges ultraweakly to~$\bigvee D$.
\end{point}
\begin{point}[vna-supremum-mult]%
Use~\sref{vanishing-effects}
to show that $(da)_d$ converges ultraweakly to~$(\bigvee D)a$,
and that~$(a^*d)_d$ converges ultraweakly to~$a^* (\bigvee D)$.
\end{point}
\begin{point}[vna-supremum-commutes]%
Show that if~$ad=da$ for all~$d\in D$,
then $a(\bigvee D) = (\bigvee D)a $.
\end{point}
\end{point}
\end{parsec}
%
%  ad is normal
%
\begin{parsec}[ad-normal]%
\begin{point}{Proposition}%
Let~$a$ be an element of a von Neumann algebra~$\scrA$.
Then~$\bigvee_{d\in D} a^*\,d\,a = a^*\,(\bigvee D)\, a$
for every bounded directed subset~$D$ of self-adjoint
elements of~$\scrA$.
\end{point}
\begin{point}[ad-normal-1]{Proof}%
If~$a$ is invertible,
then the (by~\sref{ad-monotone}) order preserving map $b\mapsto a^*ba$
has an order preserving inverse (namely $b\mapsto (a^{-1})^* b a^{-1}$),
and therefor preserves all suprema.
\begin{point}%
The general case reduces to the case that~$a$ 
is invertible
in the following way.
There is (by~\sref{spectrum-bounded})
 $\lambda>0$ such that $\lambda+a$ is invertible.
Then as $d$ increases 
\begin{equation*}
a^*\,d\,a \ \equiv\  (\lambda+a)^*\,d\,(\lambda+a) \,-\,
 \lambda^2 \,-\, \lambda a^*d \,-\, \lambda da
\end{equation*}
converges ultraweakly
to~$a^* \,(\bigvee D)\,a$,
because $(\ (\lambda+a)^*\,d\,(\lambda+a)\ )_d$
converges ultraweakly to $(\lambda+a)^*\,(\bigvee D)\,(\lambda+a)$
by~\sref{ad-normal-1} and~\sref{vna-supremum-uwlimit},
and $(a^*d+da)_d$ converges ultraweakly to $a^*(\bigvee D)+(\bigvee D)a$
by~\sref{vna-supremum-mult}.
Since~$(a^*da)_d$ converges to~$\bigvee_{d\in D} a^*d a$ too,
we conclude that~$\bigvee_{d\in D} a^* \,d\, a = a^*\,(\bigvee D)\,a$.
\end{point}
\end{point}
\end{parsec}



\subsection{Projections}
Let us now turn to the projections in a von Neumann algebra.

\TODO{Supremum/infimum of projections}

\TODO{Relation between  $\floor{\cdot}$, $\ceil{\cdot}$ and NCPsU-maps}

\TODO{NCPsU-maps with sharp $f(1)$ as restriction category}

\TODO{Central carier and von Neumann--Murray equivalence (for Paschke.)}

\TODO{$\ceil{pqp}=p\cdot q$ (Sakai product) and counter-example non-projections}

\TODO{$\floor{aba}=\floor{a}\cap \floor{b}$}



\begin{parsec}[ad-contraposed]%
\begin{point}{Lemma}%
Let~$a$ be an element of a $C^*$-algebra~$\scrA$
with $\|a\|\leq 1$,
and let~$p$ and~$q$ be projections on~$\scrA$.
Then 
$a^* p a \leq q^\perp$
iff $paq=0$
iff  $aqa^*\leq p^\perp$.
\end{point}
\begin{point}{Proof}%
Suppose that~$a^*pa\leq q^\perp$.
Then we have $q a^*pa q \leq qq^\perp q = 0$
(see \sref{ad-monotone})
and so $paq=0$,
because $\|paq\|^2=\|(paq)^*paq\|=0$
by the $C^*$-identity.
Applying $(\,\cdot\,)^*$,
we get $qa^*p=0$, and so both $qa^* = qa^*p^\perp$
and $aq = p^\perp aq$, giving
us $aqa^* = p^\perp a q a^* p^\perp 
\leq p^\perp$,
where we used that $aqa^*\leq aa^*\leq \|aa^*\|=\|a\|^2\leq 1$.
By a similar reasoning,
we get $aqa^*\leq p^\perp \implies paq=0\implies a^*pa\leq q^\perp$.
\end{point}
\end{parsec}
\begin{parsec}%
\begin{point}{Exercise}%
Let~$a$ be an effect of a $C^*$-algebra~$\scrA$,
and~$p$ be a projection from~$\scrA$.
\begin{point}[projection-above-effect]%
Show that $a\leq p$
iff $p\sqrt{a} = \sqrt{a}$
iff $\sqrt{a}p = \sqrt{a}$
iff $p^\perp\sqrt{a} = 0$
iff $\sqrt{a}p^\perp = 0$
iff $a^2\leq p$
iff $p a  = a$
iff $ a p = a $
iff $p^\perp a  = 0$
iff $ap^\perp = 0$
iff $\sqrt{a}\leq p$.
\end{point}
\begin{point}[projection-below-effect]%
Show that $p\leq a$
iff $p \sqrt{a} = p$
iff $\sqrt{a} p = p$
iff $ p\sqrt{a}^\perp = 0$
iff $\sqrt{a}^\perp p = 0$
iff $p\leq a^2$
iff $ap=p$
iff $pa = p$
iff $pa^\perp =0$
iff $a^\perp p =0$
iff $p\leq \sqrt{a}$.
\end{point}
\end{point}
\begin{point}[projection-below-projection]{Exercise}%
Let~$p$ and~$q$ be projections from a $C^*$-algebra
with~$p\leq q$.\\
Show that~$q-p$ is a projection.
\end{point}
\end{parsec}

%
% Projections
%
\begin{parsec}[vna-ceil]%
\begin{point}{Proposition}%
Above every effect~$b$ of a von Neumann algebra~$\scrA$,
there is a smallest projection, \Define{$\ceil{b}$},
called the \Define{ceiling} of~$b$,
 given by $\ceil{b}=\bigvee_{n=0}^\infty b^{\nicefrac{1}{2^n}}$.
\begin{point}[vna-ceil-commutes]%
Moreover, if $a\in \scrA$ commutes with $b$,
then~$a$ commutes with~$\ceil{b}$.
\end{point}
\end{point}
\begin{point}{Proof}
Let~$p$ denote the supremum of~$0\leq b\leq b^{\nicefrac{1}{2}}\leq
b^{\nicefrac{1}{4}}\leq\dotsb\leq 1$.
\begin{point}[vna-ceil-point-1]%
To begin,
note that if~$a\in \scrA$
commutes with~$b$,
then~$a$ commutes with~$p$.
Indeed, for such~$a$ we have~$a\sqrt{b}=\sqrt{b}a$
by~\sref{cstar-square-commutes},
and so $a b^{\nicefrac{1}{2^n}} = b^{\nicefrac{1}{2^n}} a$
for each~$n$
by induction.
Thus~$ap=pa$ by~\sref{vna-supremum-commutes}.
\end{point}
\begin{point}%
Let us prove that~$p$ is a projection, c.q.~$p^2=p$. 
Since~$p\leq 1$, we already have $p^2\equiv \sqrt{p}p\sqrt{p}\leq p$
by~\sref{ad-monotone},
and so we only need to show that $p\leq p^2$. We have:
\begin{alignat*}{3}
 p^2 \ &=\  \textstyle \bigvee_m \sqrt{p} \,b^{\nicefrac{1}{2^m}} \,\sqrt{p}
\qquad&&\text{by \sref{ad-normal}} \\
&=\ \textstyle\bigvee_m b^{\nicefrac{1}{2^{m+1}}}\, p\,
b^{\nicefrac{1}{2^{m+1}}} 
\qquad&&\text{by \sref{vna-ceil-point-1} and \sref{cstar-square-commutes}} \\
&=\ \textstyle \bigvee_m \bigvee_n \, 
b^{\nicefrac{1}{2^{m+1}}}\, b^{\nicefrac{1}{2^n}}\,
b^{\nicefrac{1}{2^{m+1}}} \qquad && \text{by \sref{ad-normal}}
\end{alignat*}
Thus $p^2 \geq b^{\nicefrac{1}{2^k}}$
for each~$k$ (taking $n=m=k+1$,)
and so~$p^2 \geq p$.
\end{point}
\begin{point}%
It remains to be shown that~$p$ is the \emph{least} projection
above~$b$.
Let~$q$ be a projection in~$\scrA$ with $b\leq q$;
we must show that~$q\leq p$.
We have $b^{\nicefrac{1}{2}}\leq q$
by~\sref{projection-above-effect},
and so $b^{\nicefrac{1}{2^n}}\leq q$ for each~$n$ by induction.
Hence $p\leq q$.
\end{point}
\end{point}
\end{parsec}

%
%	floor
%
\begin{parsec}[vna-floor]%
\begin{point}{Proposition}%
Below every effect~$b$ of a von Neumann algebra~$\scrA$,
there is greatest projection, $\floor{b}$,
called the \Define{floor} of~$b$,
given by~$\floor{b} = \bigwedge_{n=0}^\infty b^{2^{n}}$.
\begin{point}%
Moreover, if~$a\in \scrA$ commutes with~$b$,
then~$b$ commutes with~$\floor{b}$.
\end{point}
\end{point}
\begin{point}{Proof}%
Let~$p$ denote the infimum of $1\geq b\geq b^2 \geq b^4 \geq  \dotsb \geq 0$.
\begin{point}[vna-floor-point-1]%
If~$a\in \scrA$ commutes with~$b$,
then~$a$ commutes with~$p$.
Indeed, such~$a$ commutes with~$b^2$ (because
$ab^2 = bab = b^2a$,)
and so~$a$ commutes with~$b^{2^n}$ for each~$n$ by induction.
Thus~$a$ commutes with~$p\equiv\bigwedge_n b^{2^n}$ 
(by a variation on~\sref{vna-supremum-commutes}.)
\end{point}
\begin{point}%
To see that~$p$ is a projection, c.q.~$p^2=p$,
we only need to show that~$p\leq p^2$,
because we get $p^2\equiv \sqrt{p}\,p\,\sqrt{p}\leq p$
from $p\leq 1$ (using~\sref{ad-monotone}.)
Now, since
\begin{alignat*}{3}
p^2 \ &=\ \textstyle \bigwedge_m\  \sqrt{p}\, b^{2^m} \sqrt{p}\qquad
&&\text{by a variation on~\sref{ad-normal}}\\
&=\ \textstyle \bigwedge_m \ b^{2^{m-1}} p\, b^{2^{m-1}}\qquad
&&\text{by~\sref{vna-floor-point-1} and~\sref{cstar-square-commutes}}\\
&=\ \textstyle \bigwedge_m \bigwedge_n \ 
b^{2^{m-1}}\, b^{2^n}\, b^{2^{m-1}}\qquad
&&\text{by~\sref{ad-normal},}
\end{alignat*}
and $p\leq b^{2^{m-1}}\, b^{2^n}\,b^{2^{m-1}}$
for all~$n,m$, we get~$p\leq p^2$.
\end{point}
\begin{point}%
It remains to be shown that~$p$ is the greatest projection above~$b$.
Let~$q$ be a projection in~$\scrA$ with~$q\leq b$
we must show that~$q\leq p$.
Since~$q\leq b$,
we have~$q\leq b^2$ (by~\sref{projection-below-effect}),
and so~$q\leq b^{2^n}$ for each~$n$ by induction.
Thus~$q\leq p\equiv\bigwedge_n b^{2^n}$.
\end{point}
\end{point}
\end{parsec}
%
%
%
\begin{parsec}%
\begin{point}{Exercise}%
Let~$a,b$ be effects of a von Neumann algebra~$\scrA$,
and let~$\lambda\in [0,1]$.
\begin{point}%
Show that $\ceil{a}^\perp = \floor{a^\perp}$
and $\floor{a}^\perp = \ceil{a^\perp}$.
\end{point}
\begin{point}[vna-binary-supremum-projections]%
Show that~$\ceil{\lambda a} = \ceil{a}$
when~$\lambda\neq 0$.
Use this to prove that~$\ceil{\lambda a+\lambda^\perp b}$
is the supremum of~$\ceil{a}$ and~$\ceil{b}$
in the poset of projections of~$\scrA$
when~$\lambda\neq 0$ and~$\lambda\neq 1$.
\end{point}
\begin{point}[vna-floor-square]%
Show that $\floor{a}=\floor{a^2}$.
\end{point}
\end{point}
\end{parsec}

%
%	directed supremum of projections
%
\begin{parsec}%
\begin{point}[vna-directed-supremum-projections]{Lemma}%
The supremum of a directed set~$D$ of projections
from a von Neumann algebra~$\scrA$ is a projection.
\end{point}
\begin{point}{Proof}%
Writing $p=\bigvee D$,
we must show that $p^2=p$.
Note that $dp=d$ for all~$d\in D$
(by~\sref{projection-below-effect} because~$d\leq p$.)
Now, on the one hand, $(d)_{d\in D}$
converges ultraweakly to~$p$.
On the other hand,
$(dp)_{d\in D}$
converges ultraweakly to~$p^2$ by~\sref{vna-supremum-mult}.
Hence~$p=p^2$ by uniqueness of ultraweak limits.
\end{point}
\begin{point}{Exerise}%
Deduce from this result
 that every set~$A$ of projections from~$\scrA$
has a supremum $\Define{\bigcup A}$
and an infimum $\Define{\bigcap A}$
\emph{in the poset of projections from~$\scrA$}.\\
(Hint: use~\sref{vna-binary-supremum-projections},
and the fact that $p\mapsto p^\perp$ 
is an order isomorphism on the poset of projections on~$\scrA$.)
\end{point}
\end{parsec}
%
%
%
\begin{parsec}[floor-sequential-product]%
\begin{point}{Lemma}%
Let~$a,b$ be effects of a von Neumann algebra~$\scrA$.
Then~$\floor{\sqrt{a}b\sqrt{a}}$ is the greatest projection
below~$a$ and~$b$, that is, in symbols, 
$\floor{\sqrt{a}b\sqrt{a}}=\floor{a}\cap \floor{b}$.
\end{point}
\begin{point}{Proof}%
Surely, $\floor{\sqrt{a}b\sqrt{a}}\leq \sqrt{a}b\sqrt{a} \leq a$.
Let us prove that~$\floor{\sqrt{a}b\sqrt{a}}\leq b$.
To this end,
recall
that (by~\sref{projection-below-effect})
a projection~$e$ is below an effect~$c$
iff $ec=e$ iff $e\sqrt{c}=e$.
In particular,
since~$\floor{\sqrt{a}b\sqrt{a}}\leq \sqrt{a}b\sqrt{a}$ and 
$\floor{\sqrt{a}b\sqrt{a}}\leq a$,
we get
\begin{equation*}
\floor{\sqrt{a}b\sqrt{a}}
\ =\ \floor{\sqrt{a}b\sqrt{a}}\sqrt{a}b\sqrt{a}\floor{\sqrt{a}b\sqrt{a}} \ =\ 
\floor{\sqrt{a}b\sqrt{a}}b\floor{\sqrt{a}b\sqrt{a}},
\end{equation*}
and so $\floor{\sqrt{a}b\sqrt{a}}b^\perp\floor{\sqrt{a}b\sqrt{a}}=0$,
which implies that
$\floor{\sqrt{a}b\sqrt{a}}\leq b$ by~\sref{ad-contraposed}.
\begin{point}%
Now,
let~$e$ be a projection below~$a$ and~$b$,
that is, $e\sqrt{a}=e$ and~$eb=e$.
We must show that~$e\leq \floor{\sqrt{a}b\sqrt{a}}$,
or equivalently, $e\leq \sqrt{a}b\sqrt{a}$,
or put yet differently, $e\sqrt{a}b\sqrt{a}=e$.
But this is obvious: $e=e\sqrt{a}=eb\sqrt{a}=e\sqrt{a}b\sqrt{a}$.
\end{point}
\end{point}
\end{parsec}

\begin{parsec}%
\begin{point}%
Having seen that~$\floor{\sqrt{a}b\sqrt{a}} = \floor{a}\cap\floor{b}$
in~\sref{floor-sequential-product}
one might wonder whether
there is a similar expression for $\ceil{\sqrt{a}b\sqrt{a}}$.
If~$a$ and~$b$ are projection,
$\ceil{aba}$ turns out to coincide with the \Define{Sasaki product},
$a\cap (a^\perp \cup b)$,
as we will show below.
\TODO{Reference for the Sasaki product.}
\TODO{Thank Kenta}
\end{point}
\begin{point}[floor-difference]{Lemma}%
Let~$p$ be a projection,
and let~$a$ be an effect of a von Neumann algebra
with $a\leq p$.
We have $p-\ceil{a}=\floor{p-a}$.
\end{point}
\begin{point}{Proof}%
We must show that $p-\ceil{a}$ is the greatest projection below $p-a$.
To begin, $p-\ceil{a}\leq p-a$,
because $a\leq \ceil{a}$.
Further, since~$a\leq p$, we have $\ceil{a}\leq p$,
and so~$p-\ceil{a}$ is a projection
(by~\sref{projection-below-projection}).
\begin{point}%
Let~$q$ be a projection below~$p-a$.
We must show that~$q\leq p-\ceil{a}$.
The trick is to note that~$a\leq p-q$.
Since~$p-q$ is a projection (by~\sref{projection-below-projection}
because $q\leq p-a\leq p$),
we have $\ceil{a}\leq p-q$,
and so $q\leq p-\ceil{a}$.
\begin{point}[ceil-sequential-product]{Lemma}%
For projections $p,q$ from a von Neumann algebra,
$\ceil{pqp}=p\cap (p^\perp \cup q)$.
\end{point}
\end{point}
\end{point}
\begin{point}[ceil-sequential-product-1]{Proof}%
Observe that $(\ p\cap (p^\perp \cup q)\ )^\perp 
= p^\perp \cup(p\cap q^\perp)$.
Since~$p^\perp$ and $p\cap q^\perp$ are disjoint,
we have $p^\perp \cup (p\cap q^\perp) = p^\perp + p\cap q^\perp$,
and so $p\cap (p^\perp \cup q) = p-p\cap q^\perp$.
\begin{point}%
By point~\sref{ceil-sequential-product-1}, 
it suffices to show that~$\ceil{pqp}=p- p\cap q^\perp$,
that is, $p-\ceil{pqp}=p\cap q^\perp$.
Since $p-\ceil{pqp} = \floor{p-pqp}$
by~\sref{floor-difference} and $\floor{pq^\perp p}=p\cap q^\perp$
by~\sref{floor-sequential-product} we are done.
\end{point}
\end{point}
\end{parsec}

%
% About maps between von Neumann algebras
%

\begin{parsec}%
\begin{point}{Proposition}%
For a cp-map~$f\colon \scrA\to\scrB$
 between $C^*$-algebras, and $a,b\in\scrA$, 
\begin{equation*}
f(b^*a)\,f(a^*b)\ \leq\ \|f(a^*a)\|\,f(b^*b).
\end{equation*}
\end{point}%
\begin{point}{Proof}%
\TODO{add}
\end{point}
\end{parsec}
%
%
%
\begin{parsec}%
\begin{point}{Exercise}%
Let~$f\colon \scrA\to\scrB$ be a ncpsu-map
between von Neumann algebras
with~$f(1)\leq 1$,
and let~$a\in \scrA$ be positive.
\begin{point}[cp-kadisons-ineq]%
Show that~$f(a)^2 \leq f(a^2)$.
\end{point}
\begin{point}%
Use this, and~\sref{cstar-sqrt-monotone},
to show that~$f(a^{\nicefrac{1}{2}}) \leq f(a)^{\nicefrac{1}{2}}$.
\end{point}
\begin{point}[cpsu-2nthroot]%
Go on, and show that $f(a^{\nicefrac{1}{2^n}})
\leq f(a)^{\nicefrac{1}{2^n}}$ for each~$n$.
\end{point}
\end{point}
\end{parsec}

%
%
%
\begin{parsec}%
\begin{point}{Proposition}%
Let $f\colon \scrA\to\scrB$ be a ncpsu-map
between von Neumann algebras.
Then $\ceil{f(a)}=\ceil{f(\ceil{a})}$
for every effect~$a$ from~$\scrA$.

\TODO{Use Kadison's inequality instead of complete positivity?}
\end{point}
\begin{point}{Proof}%
Since~$a\leq \ceil{a}$
we have $f(a)\leq f(\ceil{a})$,
and so~$\ceil{f(a)}\leq \ceil{f(\ceil{a})}$.
\begin{point}%
It remains to be shown that $\ceil{f(\ceil{a})}\leq \ceil{f(a)}$,
that is, $f(\ceil{a})\leq \ceil{f(a)}$.
Since  $\ceil{a}=\bigvee_n a^{\nicefrac{1}{2^n}}$ 
(by~\sref{vna-ceil})
and~$f$ is normal,
we have $f(\ceil{a})=\bigvee_n f(a^{\nicefrac{1}{2^n}})$.
Now, since $f(a^{\nicefrac{1}{2^n}})\leq f(a)^{\nicefrac{1}{2^n}}
\leq \ceil{f(a)}$
by~\sref{cpsu-2nthroot} for each~$n$,
we have~$f(\ceil{a})\leq \ceil{f(a)}$.
\end{point}
\end{point}
\end{parsec}
%
%
%
\begin{parsec}%
\begin{point}{Proposition}%
Let~$f\colon \scrA\to\scrB$ be a ncpsu-map
between von Neumann algebras.
Then~$\floor{f(a)}=\floor{f(\floor{a})}$
for every effect~$a$ from~$\scrA$.
\end{point}
\begin{point}{Proof}%
Since~$\floor{a}\leq a$,
we have~$\floor{f(\floor{a})}\leq \floor{f(a)}$.
Thus we only need to show that~$\floor{f(a)}\leq \floor{f(\floor{a})}$,
or equivalently, $\floor{f(a)}\leq f(\floor{a})$.
We have
\begin{equation*}
\floor{f(a)}
\ \stackrel{\sref{vna-floor-square}}{=}\ 
\floor{f(a)^2}
\ \stackrel{\sref{cp-kadisons-ineq}}{\leq}\  
\floor{f(a^2)} \ \leq\ \floor{f(a)},
\end{equation*}
and so~$\floor{f(a)}=\floor{f(a^2)}$.
By induction,
and similar reasoning,
we get~$\floor{f(a)}=\floor{f(a^{2^n})}\leq f(a^{2^n})$
for every~$n$,
and so
$\floor{f(a)}\leq \bigwedge_n f(a^{2^n})
= f(\bigwedge_n a^{2^n})=f(\floor{a})$,
where we used that~$f$ is normal,
and~$\floor{a}=\bigwedge_n a^{2^n}$ (see~\sref{vna-floor}).
\end{point}
\end{parsec}

\begin{parsec}%
\begin{point}%
Parsec about commutative $C^*$-algebras:
\end{point}
\begin{point}[ccstar-proj]{Theorem}%
The projections~$\Proj(\scrA)$ of a commutative $C^*$-algebra~$\scrA$
form a Boolean algebra.
If~$\scrA$ is monotone complete,
then~$\Proj(\scrA)$ is a complete Boolean algebra.
\end{point}
\end{parsec}

\begin{parsec}%
\begin{point}%
Let us now turn to quotients of von Neumann algebras.
Recall that given a norm closed two-sided ideal~$\scrD$
of a $C^*$-algebra $\scrA$
we can form the quotient $\scrA/\scrD$,
(which is again a $C^*$-algebra),
and the quotient map $q\colon \scrA\to \scrA/\scrD$
which is a \textsc{miu}-map.
If~$\scrA$ is a von Neumann algebra,
then~$\scrA/\scrD$ might not be a von Neumann algebra,
either because~$\scrA/\scrD$ is not be monotone complete 
(see~\sref{vn-quotient-not-monotone-complete}),
or because~$\scrA/\scrD$ does not have a separating set of normal states
(see~\TODO{}).
However, if~$\scrD$ is ultraweakly closed,
then~$\scrA/\scrD$ is a von Neumann algebra,
as one might have suspected.
To prove this,
we need the somewhat surprising
fact that every ultraweakly closed
ideal~$\scrD$ is of the form $\scrD\equiv c\scrA$,
where~$c$ is a central projection~$c$ of~$\scrA$.
(The quotient~$\scrA/c\scrA$ is then simply~$c^\perp\scrA$.)
\TODO{connection between uw-closed ideals and central projections}
\TODO{universal property for \textsc{n(c)p(s)(u)}-maps}
\end{point}
\begin{point}[vn-quotient-not-monotone-complete]{Example}%
The quotient of a von Neumann algebra
by an closed ideal
need not be a von Neumann algebra:
we will show that $\ell^\infty/c_0$
is not monotone complete,
where~$\ell^\infty$ is the von Neumann algebra
of bounded sequences,
and~$c_0\subseteq \ell^\infty$
is the norm closed ideal of
sequences which converge to~$0$.
By~\sref{ccstar-proj}
it suffices to show that the Boolean algebra~$\Proj(\ell^\infty/c_0)$
of projections of~$\ell^\infty/c_0$ is not complete.
\begin{point}%
We claim that $\Proj(\ell^\infty/c_0)$
is isomorphic to the Boolean algebra
 $\wp(\N)/\wp_{fin}(\N)$
of subsets of~$\N$ modulo 
the filter~$\wp_{fin}(\N)$ of finite subsets.

It is easy to see that the assignment $A\mapsto [\mathbf{1}_A]_{c_0}$
(where $\mathbf{1}_A$ is the indicator function of~$A$)
gives a Boolean algebra homomorphism 
$f\colon \wp(\N)\to \Proj(\ell^\infty/c_0)$,
that the kernel of~$f$
is $\wp_{fin}(\N)$
(because for $A\subseteq \N$
we have $\mathbf{1}_A\in c_0$ iff $A$ is finite).
It remains to be shown that~$f$ is surjective,
which requires some fiddling.

Let~$\alpha\in \ell^\infty$
be
such that $[\alpha]_{c_0}$ is a projection in $\ell^\infty/c_0$.
We claim that
$\mathbf{1}_A - \alpha \in c_0$ (and so $\alpha=f(A)$)
for some~$A\subseteq \N$.
Note that since $[\alpha]_{c_0}$ is self-adjoint,
we have $[\alpha]_{c_0}=(\,[\alpha]_{c_0}\,)_\R = [\,\alpha_\R\,]_{c_0}$,
and so we may assume without loss of generality
that~$\alpha$ is self-adjoint
(replacing $\alpha$ by $\alpha_\R$ is necessary).
Define $A=\{n\in\N\colon \left|1-\alpha(n)\right|<\frac{1}{2}\}$.

Let~$\varepsilon>0$ with $\varepsilon<\nicefrac{1}{2}$ be given.
We must find~$N\in\N$ with 
$\left| \mathbf{1}_A(n)-\alpha(n)\right|\leq \varepsilon$
for all~$n\geq N$.
Since~$[\alpha]_{c_0}$ is a projection,
$\alpha-\alpha^2\in c_0$,
and so
there is~$N\in \N$
with $\left|\alpha(n)\right| \,\left| 1-\alpha(n)\right|
\,\equiv\, \left| \alpha(n) - \alpha(n)^2 \right| \leq 
\nicefrac{1}{2}\,\varepsilon < \nicefrac{1}{4}$
for all~$n\geq N$.

Let~$n\geq N$ be given.
Note that either 
$\left|1-\alpha(n)\right|\geq \nicefrac{1}{2}$
or 
$\left|\alpha(n)\right|\geq \nicefrac{1}{2}$.
If~$\left|1-\alpha(n)\right|\geq\nicefrac{1}{2}$,
then $\mathbf{1}_A(n)=0$
(by definition of~$A$),
and so $\left|\mathbf{1}_A(n)-\alpha(n)\right|\equiv \left|\alpha(n)\right| 
\leq 2 \,\left|\alpha(n)\right|\,\left| 1-\alpha(n)\right|
\leq \varepsilon$.
On the other hand,
if  $\left|\alpha(n)\right| \geq \nicefrac{1}{2}$,
then $\left|1-\alpha(n)\right| < \nicefrac{1}{2}$
(because otherwise $\left|\alpha(n)\right|\left|1-\alpha(n)\right|
\geq \nicefrac{1}{4}$),
so $\mathbf{1}_A(n)=1$,
and thus
$\left|\mathbf{1}_A(n)-\alpha(n)\right|
\equiv \left|1-\alpha(n)\right|
\leq 2 \left|\alpha(n)\right|\left|1-\alpha(n)\right|
\leq \varepsilon$.

Hence $\mathbf{1}_A - \alpha \in c_0$,
and so~$f$ is surjective.
It follows that $\Proj(\ell^\infty/c_0)$
is isomorphic to $\wp(\N)/\wp_{fin}(\N)$.
\end{point}
\begin{point}%
We claim that the Boolean algebra~$\wp(\N)/\wp_{fin}(\N)$
is not complete.
To see this,
find a partition of~$\N$ into infinite subsets
$A_1,A_2,\dotsc$.
We claim that~$A_1,A_2,\dotsc$ has no supremum in~$\wp(\N)/\wp_{fin}(\N)$
because there is no minimal upper bound.
Indeed,
let~$A$ be an upper bound of~$A_1,A_2,\dotsc$ in~$\wp(\N)/\wp_{fin}(\N)$,
that is, $A_n\backslash A$ is finite for every~$n$;
we will define an upper bound~$A'$ of $A_1,A_2,\dotsc$
which is strictly below~$A$ in~$\wp(\N)/\wp_{fin}(\N)$.
Since~$A_n$ is infinite,
and~$A_n\backslash A$ is finite,
we can pick $a_n\in A_n\cap A$ for each~$n$.
Then~$A':=A \backslash \{a_1,a_2,a_3,\dotsc\}$
is an upper bound for~$A_1,A_2,\dotsc$,
because $A_n\backslash A' = (A_n\backslash A)\cup\{a_n\}$ is finite
for each~$n$,
and~$A'$ is strictly below~$A$ in~$\wp(\N)/\wp_{fin}(\N)$,
because $A'\backslash A$ is infinite.
Hence~$\wp(\N)/\wp_{fin}(\N)$
is not complete.
\end{point}
\begin{point}%
\TODO{connection with $\beta\N\backslash\N$
being non-Stonean.}
\end{point}
\end{point}
\begin{point}{Proposition}%
\label{prop:weakly-closed-ideal}
For every ultraweakly closed two-sided
ideal~$\mathscr{D}$ of a von Neumann algebra~$\scrA$
there is a unique central projection~$c\in\scrA$
such that $\mathscr{D} = c\scrA$.

Moreover, $c$ is the greatest projection in~$\mathscr{D}$.
\begin{point}{Proof}%
\emph{(if $a\in \mathscr{D}\cap [0,1]_{\scrA}$, 
then $\ceil{a}\in\mathscr{D}$)}\ 
Let~$a\in\mathscr{D}$ with $0\leq a \leq 1$
be given.
Recall that $\ceil{a}$
is the ultraweak limit of $a,\ a^{\frac{1}{2}},\ a^{\frac{1}{4}},\ \dotsc$.
Since~$\mathscr{D}$ is a $C^*$-subalgebra of~$\scrA$,
we have $a^{\frac{1}{2}}\in \mathscr{D}$.
Then $(a^{\frac{1}{2}})^{\frac{1}{2}} \equiv a^{\frac{1}{4}}\in \mathscr{D}$
by the same token,
and so on.
Thus, as~$\mathscr{D}$ is ultraweakly closed, $\ceil{a}\in\mathscr{D}$.

\emph{($\mathscr{D}\cap [0,1]_\scrA$ is directed)}\ 
Let~$a,b\in \mathscr{D}\cap[0,1]_\scrA$ be given.
We're looking for an element~$u\in \mathscr{D}\cap[0,1]_\scrA$
with $a\leq u$ and $b\leq u$.
Note that $\frac{1}{2}a + \frac{1}{2}b$
is in~$\mathscr{D}\cap[0,1]_{\scrA}$.
Define
$u:=\ceil{\frac{1}{2}a+\frac{1}{2}b}$.
Then  $u\in \mathscr{D}\cap[0,1]_\scrA$
by the previous point.
Now, 
as $\frac{1}{2}a \leq \frac{1}{2}a+\frac{1}{2}b \leq u$,
we have $a \leq \ceil{a} =\ceil{\frac{1}{2}a} \leq 
\ceil{ \frac{1}{2}a+\frac{1}{2}b} = u$.
Similarly, $b\leq u$.


\emph{($\mathscr{D}\cap [0,1]_\scrA$
has a greatest element, $c$)}\ 
As~$\mathscr{D}\cap[0,1]_\scrA$
is a directed subset of self-adjoint elements 
of~$\scrA$ bounded above by~$1$,
it has a supremum in~$\scrA_\mathrm{sa}$,
say~$c$.
As~$c$ is the ultraweak limit of~$(c)_{c\in \mathscr{D}\cap[0,1]_\scrA}$
and~$\mathscr{D}\cap[0,1]_\scrA$ is ultraweakly closed,
we have~$c\in \mathscr{D}\cap[0,1]_\scrA$.
Thus~$c$ is the greatest element of~$\mathscr{D}\cap[0,1]_\scrA$.

\emph{($c$ is a projection)}\ 
It suffices to show that~$c=\ceil{c}$ since~$\ceil{c}$ is a projection.
Since~$c\leq \ceil{c}$, it suffices to show that~$\ceil{c}\leq c$.
As before,~$c\in \mathscr{D}\cap[0,1]_\scrA$
entails~$\ceil{c}\in\mathscr{D}\cap[0,1]_\scrA$.
Thus~$\ceil{c}\leq c$, since~$c$ is the
greatest element of~$\mathscr{D}\cap[0,1]_\scrA$.
Hence~$c=\ceil{c}$ is a projection.

\emph{(for all $a\in \scrA$
we have: $a\in \mathscr{D}$ iff $ca=a$)}\ 
Since~$c\in \mathscr{D}$,
and~$\mathscr{D}$ is a two-sided ideal,
$ca\in \mathscr{D}$, and so $ca=a$ entails~$a\in\mathscr{D}$.
Thus we only need to show that~$a\in\mathscr{D}$
entails~$ca=a$.
Let~$a\in\mathscr{D}$
be given.
We must show that~$ca=a$.

If~$a\in [0,1]_\scrA$,
then this is clear:
$a\leq c$, since~$c$ is the greatest element
of~$\mathscr{D}\cap [0,1]_\scrA$,
and so~$ca=ac=a$ by Lemma~\ref{lem:projection-order}.

If~$a\in \scrA_{\mathrm{sa}}$
with~$a\neq 0$,
then $a\cdot\|a\|^{-1} \in [0,1]_\scrA\cap \mathscr{D}$,
and so $ca \|a\|^{-1} = a \|a\|^{-1}$,
which entails $ca = a$.

(For arbitrary $a\in \scrA$,)
we have $a= a_{\mathbb{R}} + i a_{\mathbb{I}}$,
where $a_\mathbb{R}=\frac{1}{2}(a+a^*)$
and $a_\mathbb{I} = \frac{1}{2i}(a-a^*)$
are self-adjoint elements of~$\mathscr{D}$.
Then~$ca_\mathbb{R}=a_\mathbb{R}$
and $ca_\mathbb{I}=a_\mathbb{I}$
by the previous paragraph.
Thus~$ca=ca_\mathbb{R}+ica_\mathbb{I}=a_\mathbb{R}+ia_\mathbb{I}=a$.

\emph{($c$ is central)}\ 
Let~$a\in\scrA$ be given.
We must show that~$ca=ac$.
Since~$\mathscr{D}$ is a two-sided ideal,
we have~$ac\in \mathscr{D}$,
and so~$c(ac)=ac$ by the previous point.
By a similar reasoning we get~$(ca)c=ca$.
Thus~$ac=ca$.
Thus~$c$ is central.

\emph{($\mathscr{D} = c\scrA$)}\ 
Clearly $c\scrA\subseteq\mathscr{D}$
since~$c\in\mathscr{D}$ and~$\mathscr{D}$ is an ideal.
On the other hand,
if~$a\in\mathscr{D}$,
then~$ca=a$
(as we saw),
and thus~$a\in c\scrA$.
Hence~$\mathscr{D} = c\scrA$.

\emph{(uniqueness)}\ 
Let~$c_1$ and~$c_2$ be central projections 
with~$c_1\scrA = \mathscr{D}=c_2\scrA$.
We must show that~$c_1=c_2$.

As~$c_2\in\mathscr{D}=c_1 \scrA$,
there is~$a_1\in \scrA$
with~$c_2 = c_1a_1$.
Then~$c_2 = c_2c_2^* = c_1a_1a_1^*c_1^*\leq 
c_1c_1^*\|a_1a_1^*\|=c_1\|a_1\|^2$.
Thus~$c_1c_2=c_2c_1=c_2$ by Lemma~\ref{lem:projection-order}.

Similarly, $c_2c_1 = c_1c_2 = c_1$, and so $c_1=c_1c_2=c_2$.

\emph{($c$ is the greatest projection of~$\mathscr{D}$)}\ 
Let~$p$ be a projection in~$\mathscr{D}$.
We must show that~$p\leq c$.
Since~$p$ is a projection,
we have $0\leq p\leq 1$, and so $p\in \mathscr{D}\cap [0,1]_\scrA$.
Thus, $p\leq c$, by definition of~$c$.
\end{point}
\end{point}


\end{parsec}
\end{document}
