\documentclass[b5page]{book}
\input{common}
\externaldocument{a}
\externaldocument{b}

\author{Abraham Westerbaan \and Bas Westerbaan}

\title{
    {\large Solutions of Exercises from and Errata to} \\
    \emph{The Category of Von Neumann Algebras}\\
    {\large and}\\
    \emph{Dagger and Dilation\\ {\large in the Category of Von Neumann Algebras}}}

\begin{document}

\maketitle

\begin{erratum}{physics-stinespring}%
The second part of the exercise starts with
    ``Conclude that any quantum channel~$\Phi\colon \scrB(\scrK) \to \scrB(\scrH)$ \ldots''.
This should have read
    ``Conclude that any quantum channel~$\Phi$ from~$\scrH$ to itself \ldots''
\end{erratum}
\begin{erratum}{ess-uniq-pur}%
The third-to-last sentence reads
``Derive from the latter
that for each~$y \in \scrK'$ and rank-one projector~$e \in \scrH$,
there is a~$y' \in \scrK'$
with~$U_0 (e \otimes y) = e \otimes y'$.''
This should have been
``Derive from the latter
that for each~$y \in \scrK'$ and unit vector~$e \in \scrH$,
there is a~$y' \in \scrK'$
with~$U_0 (e \otimes y) = e \otimes y'$.''.
\end{erratum}
\begin{erratum}{moved-dfn-selfdual}%
    A pre-Hilbert~$\scrB$-module~$X$ is \Define{self dual}
    if every bounded~$\scrB$-linear~$\tau \colon X \to \scrB$
    is of the form~$\tau(x) = \langle t, x\rangle$ for some~$t \in X$.
In print the condition that~$\tau$ should be bounded
        was accidentally lost when it was moved from~\sref{dils-selfdual}.
\end{erratum}
\begin{erratum}{dils-uniform-spaces-basics}%
The assumption  that the net~$x_\alpha$ is Cauchy in point 3
    is superfluous.
\end{erratum}
\begin{erratum}{hilbmod-adjoint-exists}%
The map~$T$ should be presumed to be bounded.
\end{erratum}
\begin{erratum}{hilmod-fixed-on-V}%
The C$^*$-algebra~$\scrB$ isn't assumed to be a von Neumann algebra,
    which it should have been (for otherwise~\sref{dils-completion} wouldn't
    be applicable.)
\end{erratum}
\clearpage
\begin{solution}{physics-stinespring}%
To prove the first statement,
let~$\varphi \colon \scrB(\scrH) \to \scrB(\scrK)$ be any ncp-map.
If~$\varphi=0$ then~$\scrK'=0$ and~$V=0$ does the job,
        so for the other case, assume~$\varphi \neq 0$.
    By~\sref{stinespring-theorem}
        there is a Hilbert space~$\scrH'$,
        a bounded operator~$W \colon \scrH \to \scrH'$ and an
        nmiu-map~$\varrho \colon \scrB(\scrH) \to \scrB(\scrH')$
        such that~$\varphi = \ad_W \after \varrho$.
Clearly~$\varrho \neq 0$.
    By~\sref{nmiu-between-type-I}
        there is a Hilbert space~$\scrK'$
        and a unitary~$U \colon \scrH' \to \scrH \otimes \scrK'$
        with~$\varrho(A) = U^* (A \otimes 1) U$
         for all~$A \in \scrB(\scrH)$.
Define~$V \equiv UW$.
    Then~$\varphi(A) = W^* \varrho(A) W = W^*U^* (A \otimes 1) UW
        =  V^* (A \otimes 1 ) V$, as desired.

Before we can continue with the second statement,
    we need to understand the relationship
    between quantum channels and ncpu-maps.
This relationship is best understood with
    predual characterization of von Neumann algebras
    due to Sakai~\cite{sakai}, which we have been avoiding.
The characterization is as thus:
    a C$^*$-algebra~$\scrA$ is a von Neumann algebra
    if and only if it is isomorphic to the dual of a Banach space.
Then this Banach space is unique up-to-isomoprhism
    as it must be isomorphic to the space of normal functionals on~$\scrA$
    (denoted by~$\scrA_*$)
    and is appropriately called the \emph{predual}~of~$\scrA$.
Any normal linear map~$\varphi\colon \scrA \to \scrB$
    between von Neumann algebras~$\scrA$ and~$\scrB$
    yields a linear map~$\varphi_*\colon \scrB_* \to \scrA_*$
    via~$\varphi_*(\omega) = \omega \after \varphi$.
In the other direction, any linear map~$\varphi_* \colon \scrB_* \to \scrA_*$
    gives rise to a normal linear map~$\varphi\colon \scrA \to \scrB$
    by defining~$\varphi(a)(\omega) = \varphi_*(\omega)(a)$
    where we identified~$\scrA \equiv (\scrA_*)^*$.
Clearly~$\varphi$ is positive precisely
    if~$\varphi_*$ maps positive functionals to positive functionals.

A normal state~$\omega\colon \scrB(\scrH) \to \C$
    is precisely of the form~$\omega(a) = \TR[\rho a]$ for some density
        matrix~$\rho$ over~$\scrH$.
Thus the predual of~$\scrB(\scrH)$ can be identified
    with the set of trace-class operators over~$\scrH$.
Let~$\varphi_*$ be a linear map from the density operators
    on~$\scrH$ to those on~$\scrK$.
The map~$\varphi_*$ is completely positive in its usual sense
    if the corresponding map~$\varphi$ is completely positive.
Furthermore~$\varphi$ is unital if and only if~$\varphi_*$
    is trace-preserving.

To prove the second statement,
    let~$\Phi$ be any quantum channel
    mapping density matrices over~$\scrH$ to those of~$\scrH$ again.
(Note: in the printed version of the thesis
    the exercise incorrectly
    assumes~$\Phi$ to map density matrices over~$\scrH$
    to those over some other Hilbert space~$\scrK$.)
It follows from the previous, that there is a unique
        ncpu-map~$\varphi\colon \scrB(\scrH) \to \scrB(\scrH)$ with
\begin{equation*}
    \TR[ \Phi(\rho) A] \ = \ \TR[\rho \varphi(A)]
        \quad\text{for any density matrix~$\rho\in \scrB(\scrH)$}.
\end{equation*}
See also~\cite{tomamichel} for a more direct approach.
By the first part if the exercise,
    we know that there is a Hilbert space~$\scrK'$
    and a bounded operator~$V \colon \scrH \to \scrH \otimes \scrK'$
    with~$\varphi (A) = V^* (A \otimes 1) V$.
Tracing back the definition of~$V$, we see that~$V$
    is an isometry because~$\varphi$ is unital.
Pick any orthonormal bases~$E$ and~$F$ of~$\scrH$ and~$\scrK'$
    respectively.
We may assume, without loss of generality,
    that~$\scrK'$ is not zero-dimensional
    by setting~$\scrK' =\C$ and~$V = 0$
    in the case that~$\Phi = 0$.
Pick any~$f_0 \in F$
    and any unitary~$U\colon \scrH \otimes \scrK' \to \scrH \otimes \scrK'$
    with~$U^* x \otimes f_0 = V x$,
    which exists as~$V$ is an isometry.
Now we compute
\begin{align*}
    \TR [\varphi(A) \rho ]
    & \ = \ \TR[\rho V^* (A \otimes 1) V] \\
    & \ = \ \sum_{e \in E} \langle V \rho e, (A \otimes 1) V e \rangle \\
    & \ = \ \sum_{e \in E}
    \bigl\langle U^* (\rho \otimes 1) \,e\otimes f_0 ,
    \ (A \otimes 1) U^* \,e\otimes f_0 \bigr\rangle. \\
\intertext{Inserting~$\ketbra{f_0}{f_0}$
    in the previous,
    we may sum over all~$f \in F$ and get}
     \TR[\varphi(A) \rho] &\ = \ \sum_{\substack{e \in E \\ f\in F}}
    \bigl\langle U^* (\rho \otimes \ketbra{f_0}{f_0}) \,e\otimes f ,
    \ (A \otimes 1) U^* \,e\otimes f \bigr\rangle \\
    & \ = \ \sum_{\substack{e \in E \\ f\in F}}
    \bigl\langle
    (U^* (e\otimes f)) , \ 
    U^* (\rho \otimes \ketbra{f_0}{f_0})U \,
    (A \otimes 1) \,(U (e\otimes f)) \bigr\rangle \\
    & \ = \ 
    \TR \bigl[
    U^* (\rho \otimes \ketbra{f_0}{f_0})U \,
    (A \otimes 1)  \bigr] \\
& \ = \ 
\TR \bigl[ A   \TR\nolimits_{\scrK'}[ U^* (\rho \otimes \ketbra{f_0}{f_0} ) U] \bigr].
\end{align*}
This show that indeed~$\Phi(\rho)
    = \TR_{\scrK'}[ U^* (\rho \otimes \ketbra{v_0}{v_0})U]$
    as desired with~$v_0 \equiv f_0$.
\end{solution}
\begin{solution}{kraus-exercise}%
Let~$\varphi\colon \scrB(\scrH) \to \scrB(\scrK)$
    be any ncp-map.
By~\sref{physics-stinespring}
    there is a Hilbert space~$\scrK'$
    and a bounded operator~$V\colon \scrK \to \scrH \otimes \scrK'$
    with~$\varphi(A) = V^* (A \otimes 1) V$.
Let~$E$ be any orthonormal basis of~$\scrK'$.
    Then~$1 = \sum_{e\in E} \ketbra{e}{e}$
        where the sum converges ultraweakly
        and so by ultraweak continuity of~$\ad_V$ (\sref{ad-normal})
        and~$B \mapsto A\otimes B$ (\sref{tensor-simple-facts}), we see
    \begin{equation}\label{kraus-exc-eq1}
        \varphi(A) \ =\  V^* \Bigl(A \otimes \sum_{e\in E} \ketbra{e}{e}\Bigr) V
        ) \ =\  \sum_{e \in E} V^* (A \otimes \ketbra{e}{e}) V.
    \end{equation}
For~$e\in E$, define~$P_e \colon \scrH \otimes \scrK' \to \scrH$
    by~$P_e \equiv 1\otimes \bra{e}$,
    i.e.~$P_e(x \otimes y) = x \langle e, y\rangle$.
Define~$V_e \equiv P_e V$.
    Note that~$P_e^*AP_e = A \otimes\ketbra{e}{e}$ and so
\begin{alignat*}{2}
    \varphi(A)
    &\ = \  \sum_{e \in E} V^* (A \otimes \ketbra{e}{e} ) V &\qquad&
    \text{by \eqref{kraus-exc-eq1}} \\
    &\ = \  \sum_{e \in E} V^* P_e^*A P_e V \\
    &\ = \  \sum_{e \in E} V_e^* A V_e,
\end{alignat*}
as desired.
From the special case~$A=1$, we see
    that~$\sum_{e \in E} V_e^*V_e = \varphi(1)$
    and so the partial sums of~$\sum_{e \in E} V_e^* V_e$ are bounded.

For the final part, assume~$\scrH$ and~$\scrK$ are finite dimensional.
Recall that the standard Stinespring dilation space (say~$\scrK''$)
    for~$\varphi$ is constructed using a completion
    and quotient of~$\scrB(\scrH)\odot \scrK$.
As~$\scrB(\scrH)\odot \scrK$ is finite dimensional
    it is already complete.
    Hence~$\scrK''$ has dimension at most~$(\dim\scrH)^2( \dim\scrK)$.
By construction~$\scrH \otimes \scrK' \cong \scrK''$,
    hence~$\dim \scrK' \leq (\dim \scrH )(\dim \scrK)$.
Recall~$E$ is a basis of~$\scrK'$
    and so there are indeed at most~$(\dim \scrH )(\dim \scrK)$
        Kraus operators.
\end{solution}
\begin{solution}{exc-chris-univ-prop}%
We will show that~$U\colon \mathsf{Rep} \to \mathsf{Rep}_{\mathrm{cp}}$
    has a left-adjoint by demonstrating the universal mapping property.
    Let~$\varphi\colon \scrA \to \scrB(\scrH)$ be any object of~$\mathsf{Rep}_{\mathrm{cp}}$.
    Pick any minimal Stinespring dilation~$(\scrK, \varrho, V)$ of~$\varphi$.
The map~$\varrho\colon \scrA\to \scrB(\scrK)$ is an object
        of~$\mathsf{Rep}$.
Clearly~$\ad_V \after \varrho \after \id = \varphi$
    and so~$\eta_\varphi\equiv (\id,V)\colon \varphi \to U\varrho$
        is a morphism in~$\mathsf{Rep}_{\mathrm{cp}}$.
We will show that for each~$f\colon \varphi \to U\varrho'$
        in~$\mathsf{Rep}_{\mathrm{cp}}$,
    there is a unique~$f'\colon \varrho \to \varrho'$
    in~$\mathsf{Rep}$ with~$Uf' \after \eta_\varphi = f$.
This is sufficient to show that~$U$
    has a left adjoint.

    So let~$f\colon \varphi\to U\varrho'$ be any morphism
        in~$\mathsf{Rep}_{\mathrm{cp}}$.
Say~$\varrho'\colon \scrA' \to \scrB(\scrK')$.
    Then~$f \equiv (m', V')$ consists of
    a nmiu-map~$m'\colon \scrA \to \scrA'$
    and bounded operator~$V' \colon \scrH \to \scrK'$
    with~$\ad_{V'} \after \varrho' \after m' = \varphi$.
By~\sref{dils-univ-stinespring}
    there is a unique bounded operator~$S\colon \scrK \to \scrK'$
        with~$SV = V'$ and~$\varrho = \ad_S \after \varrho' \after m'$.
This turns~$f' \equiv(m',S)$ into a
    morphism~$\varrho \to \varrho'$ in~$\mathsf{Rep}$.
Furthermore~$Uf' \after \eta_\varphi
                = (m' \after \id, SV) = (m',V') = f$.
To show uniqueness, assume
        there is some~$f'' \colon \varrho \to \varrho'$
        in~$\mathsf{Rep}$
        with~$Uf'' \after \eta_\varphi = f$.
Say~$f'' = (m'',S'')$.
    Then~$(m',V') = f = Uf' \after \eta_\varphi = (m'', S''V)$.
So~$m''=m'$ and~$V' = S''V$.
The fact that~$f''$ is a morphism in~$\mathsf{Rep}$
    is
    equivalent to~$\ad_{S''} \after \varrho' \after m'' = \varrho$.
Thus~$\ad_{S''} \after \varrho' \after m' = \varrho$.
By uniqueness of~$S$, we get~$S'' = S$.
    Hence~$f''=(m'',S'') = (m',S) = f'$, as desired.
\end{solution}
\begin{solution}{ess-uniq-pur}%
Let~$\varphi\colon \scrB(\scrH) \to \scrB(\scrK)$ be any ncp-map.
As in the description of the exercise,
    let~$\scrK$ be a Hilbert space
    and~$V,W\colon \scrK \to \scrH \otimes \scrK'$
    be bounded operators
    with~$V^* (a \otimes 1) V = \varphi(a) = W^* (a\otimes 1) W$.
Write~$\scrV$ for the closed linear span
    of~$\{(a \otimes 1) V x; \ a \in \scrB(\scrH),\ x \in \scrK\}$
        in~$\scrH\otimes \scrK'$
and similarly~$\scrW$ for that
    of~$\{(a \otimes 1) W x; \ a \in \scrB(\scrH),\ x \in \scrK\}$.
Note that for any~$n\in \N$, ~$x_1,\ldots, x_n \in \scrK$
    and~$a_1, \ldots, a_n \in \scrB(\scrH)$ we have
\begin{align*}
    \bigl\| \sum_i (a_i\otimes1) V x_i \bigr\|^2
    &\ = \ 
     \sum_{i,j} \langle x_i,\, V^* ((a_i^*a_j) \otimes 1) V x_j\rangle \\
    &\ = \ 
     \sum_{i,j} \langle x_i,\, W^* ((a_i^*a_j) \otimes 1) W x_j\rangle \\
     &\ = \ 
    \bigl\| \sum_i (a_i\otimes1) W x_i \bigr\|^2.
\end{align*}
Thus there is a unique unitary~$U_0\colon \scrW \to \scrV$
    fixed by~$U_0 (a \otimes 1) W x = U_0 (a \otimes 1) V x$.
We see~$U_0 W = V$ by setting~$a=1$.
Furthermore
    \begin{equation*}
        (\alpha \otimes 1) U_0 (a \otimes 1) W x
        \ = \ ((\alpha a)  \otimes 1) V x
        \ = \ U_0 (\alpha  \otimes 1 )(a  \otimes 1) W x
    \end{equation*}
    for any~$\alpha,a \in \scrB(\scrH)$ and~$x \in \scrK$,
    hence~$(\alpha \otimes 1) U_0 = U_0 (\alpha \otimes 1)$.

For any~$a \in \scrB(\scrH)$,
    the operator~$a \otimes 1 \in \scrB(\scrH \otimes \scrK')$
    restricts to~$\scrB(\scrW)$.
Pick an orthonormal basis~$E$ of~$\scrH$
    and some~$e_0 \in E$.
    Note that~$(\ketbra{e_0}{e_0} \otimes 1) \scrW = e_0 \otimes \scrW'$
    for some closed subspace~$\scrW' \subseteq \scrK'$.
In fact, for any~$e \in E$
    we have~$e \otimes \scrW'
    = (\ketbra{e}{e_0} \otimes 1) (e_0 \otimes \scrW')
    = (\ketbra{e}{e_0}\otimes 1)  (1 \otimes \ketbra{e_0}{e_0}) \scrW
    = (\ketbra{e}{e} T \otimes 1)  \scrW = (\ketbra{e}{e} \otimes 1) \scrW$,
    where~$T$ is the unitary on~$\scrH$ that only swaps~$e$ and~$e_0$.
Hence~$\scrW = \scrH \otimes \scrW'$.
Similarly~$\scrV = \scrH \otimes \scrV'$
    for some closed subspace~$\scrV' \subseteq \scrK'$.

For any non-zero~$w \in \scrW'$ and unit-vector~$x \in \scrH$,
    we have~$U_0 (x \otimes w)
        = U_0 (\ketbra{x}{x} \otimes 1)( x\otimes w)
        = (\ketbra{x}{x} \otimes 1) U_0 (x\otimes w)$
        so~$U_0 (x \otimes w) = x \otimes y$ for some~$y \in \scrV'$.
Clearly~$\| w \| = \| x \otimes w\|=\| U_0 (x\otimes w) \|
        = \|x \otimes y\| = \|y\|$,
        so there is a unique unitary~$U_1\colon \scrW' \to \scrV'$
        with~$U_0 (x \otimes w) = x \otimes U_1 w$.
        It follows~$U_0 = 1 \otimes U_1$.

As~$\scrV$ and~$\scrW$ are isomorphic, they have the same dimension
    and so do~$\scrV^\perp$ and~$\scrW$.
Consequently, there is an unitary~$U\colon \scrK' \to \scrK'$
    extending~$U_1$.
We have~$V = (1\otimes U) W
    =   (1 \otimes U_1) W
     = U_0 W = V$ as desired.
\end{solution}
\begin{solution}{paschke-basics}%
We cover the points in order.
\begin{enumerate}
\item
Let~$\varrho \colon \scrA \to \scrB$ be a mniu-map.
Assume there are nmiu~$\varrho'\colon \scrA \to \scrP'$
    and ncp~$h'\colon \scrP' \to \scrB$
        with~$h' \after \varrho' = \varrho$.
We have to show there is a unique map~$\sigma\colon \scrP \to \scrB$
    with~$\id \after \sigma= h'$ and~$h' \after \varrho' = \varrho$.
        Clearly~$\sigma\equiv h' $ fits the bill.

\item
Let~$(\scrP,\varrho,h)$ be any Paschke dilation.
        We will show that~$(\scrP, \id, h)$ is a Paschke dilation of~$h$.
To this end, let~$\varrho'\colon \scrA \to \scrP'$
        be any nmiu-map and~$h'\colon \scrP' \to \scrB$
        be any ncp-map with~$h' \after \varrho' = h$.
Consider~$\varrho' \after \varrho$ and~$h'$.
    By the universal property of the original dilation,
            there is a unique ncp-map~$\sigma \colon \scrP' \to \scrP$
                with~$\sigma\after\varrho'\after\varrho = \varrho$
                and~$h \after\sigma = h'$.
Furthermore~$\id\colon \scrP \to \scrP$
    is the unique ncp-map
        with~$\id \after \varrho = \varrho$
        and~$h \after \id = h$.
Now~$(\sigma \after \varrho') \after \varrho = \varrho$
    and~$h \after (\sigma \after \varrho') = h' \after \varrho' = h$,
        so~$\sigma \after \varrho' = \id$.
We are are halfway demonstrating that~$\sigma$ is also the mediating map
        for our dilation of~$h$.
It remains to be shown that~$\sigma$ is the unique ncp-map
    with~$\sigma \after \varrho' = \id$
        and~$h \after \sigma = h'$.
So assume there is a ncp-map~$\sigma'\colon \scrP' \to \scrP$
    with~$h \after \sigma' = h'$ and~$\sigma' \after \varrho' = \id$.
    Clearly~$\sigma' \after\varrho' \after\varrho =\varrho$
        and so by uniqueness of~$\sigma$ as the mediating map
        for the orignal dilation,
        we see~$\sigma' = \sigma$, as desired.
    \item

    Let~$
        \left(\begin{smallmatrix}\varphi_1\\\varphi_2 \end{smallmatrix} \right)
        \colon \scrA \to \scrB_1 \oplus \scrB_2$
        be any ncp-map.
    Pick Paschke dilations~$(\scrP_i, \varrho_i, h_i)$
            of~$\varphi_i$ for~$i=1,2$.
        We will show that~$(\scrP_1 \oplus \scrP_2, 
        \left(\begin{smallmatrix}\varrho_1\\\varrho_2 \end{smallmatrix} \right),
            h_1 \oplus h_2 )$
            is a Paschke dilation of~$
    \left(\begin{smallmatrix}\varphi_1\\\varphi_2 \end{smallmatrix} \right)$.
Clearly~$h_1 \oplus h_2 \after 
        \left(\begin{smallmatrix}\varrho_1\\\varrho_2 \end{smallmatrix} \right)=
        (\begin{smallmatrix}h_1 \after\varrho_1\\h_2 \after \varrho_2 \end{smallmatrix} )
            = 
    \left(\begin{smallmatrix}\varphi_1\\\varphi_2 \end{smallmatrix} \right) $.
Let~$\varrho'\colon \scrA \to \scrP'$ be any nmiu-map
    and~$
    \left(\begin{smallmatrix}h_1\\ h_2\end{smallmatrix} \right) 
        \colon \scrP' \to \scrB_1 \oplus \scrB_2$
        any ncp-map with~$
    \left(\begin{smallmatrix}h_1\\ h_2\end{smallmatrix} \right)  \after
        \varrho' = 
    \left(\begin{smallmatrix}\varphi_1\\ \varphi_2\end{smallmatrix} \right) $.
Note~$h_i \after \varrho' = \varphi_i$
    (for~$i=1,2$)
    and so there is a unique~$\sigma_i\colon \scrP' \to \scrP_i$
    with~$\sigma_i \after \varrho' = \varrho_i$
    and~$h_i \after \sigma_i = h_i'$.
We will show that~$
    \left(\begin{smallmatrix}\sigma_1\\ \sigma_2\end{smallmatrix} \right) 
        \colon \scrP' \to \scrP_1\oplus \scrP_2$
        is the unique mediating map.
Clearly~$
    \left(\begin{smallmatrix}\sigma_1\\ \sigma_2\end{smallmatrix} \right) 
        \after \varrho' = 
    \bigl(\begin{smallmatrix}\sigma_1 \after \varrho'\\ \sigma_2 \after \varrho' \end{smallmatrix} \bigr) =
    \left(\begin{smallmatrix}\varrho_1\\ \varrho_2 \end{smallmatrix} \right) $
and~$(h_1 \oplus h_2) \after
\bigl( \begin{smallmatrix} \sigma_1\\ \sigma_2 \end{smallmatrix} \bigr)
    =
\bigl( \begin{smallmatrix}
h'_1 \after \sigma_1\\
h'_2 \after \sigma_2
\end{smallmatrix} \bigr) =
\bigl( \begin{smallmatrix}
h_1 \\
h_2
\end{smallmatrix} \bigr)$.
To show uniqueness of~$
( \begin{smallmatrix}
\sigma_1\\
\sigma_2
\end{smallmatrix})$,
assume
there is ncp-map$
    \bigl(\begin{smallmatrix}\sigma'_1\\ \sigma'_2\end{smallmatrix} \bigr) 
        \colon \scrP' \to \scrP_1\oplus \scrP_2$
    such that~$ \bigl(\begin{smallmatrix}\sigma'_1\\ \sigma'_2\end{smallmatrix} \bigr) 
        \after \varrho'
        = 
    \bigl(\begin{smallmatrix}\varrho_1\\ \varrho_2 \end{smallmatrix} \bigr) $
and~$(h_1 \oplus h_2) \after
\bigl( \begin{smallmatrix} \sigma'_1\\ \sigma'_2 \end{smallmatrix} \bigr)
    =
\bigl( \begin{smallmatrix}
h_1 \\
h_2
\end{smallmatrix} \bigr)$.
Then~$h_i \after \sigma_i' = h_i$ and~$\sigma_i' \after \varrho' = \varrho_i$
    for~$i=1,2$ and so~$\sigma_i=\sigma_i'$ by the uniqueness
    of the seperate~$\sigma_i$.
    Thus indeed~$
( \begin{smallmatrix}
\sigma_1\\
\sigma_2
\end{smallmatrix}) =
\bigl( \begin{smallmatrix}
\sigma'_1\\
\sigma'_2
\end{smallmatrix}\bigr)$.

\item
Let~$\varphi\colon \scrA \to \scrB$ be any ncp-map
    with Paschke dilation~$(\scrP, \varrho, h)$.
Assume~$\lambda \in \R, \lambda > 0$.
We will show~$(\scrP, \varrho, \lambda h)$
    is a Paschke dilation of~$\lambda \varphi$.
Clearly~$\lambda h \after \varrho = \lambda \varphi$.
To this end, assume~$\varrho'\colon \scrA \to \scrP'$ is a nmiu-map
    and~$h' \colon \scrP' \to \scrB$ is an ncp-map
    with~$h' \after \varrho' = \lambda \varphi$.
Then~$\lambda^{-1} h' \after \varrho' = \varphi $.
Thus there is a unique~$\sigma\colon \scrP' \to \scrP$
    with~$\sigma \after \varrho' = \varrho$
    and~$h \after \sigma = \lambda^{-1} h'$.
Clearly~$\lambda h \after \sigma = h'$ and so~$\sigma$
    also serves as the unique mediating map
    for the dilation of~$\lambda \varphi$.
\end{enumerate}
\end{solution}
\spacingfix
\begin{solution}{module-seminorm}%
Let~$X$ be a right~$\scrB$-module
with~$\scrB$-valued inner product~$\langle \,\cdot\,,\,\cdot\,\rangle$
    for some C$^*$-algebra~$\scrB$.
Using the C$^*$-identity, ~\sref{module-CS} and the definition
    of~$\|\,\cdot\,\|$ on~$X$, we
    get~$ \| \langle x, y\rangle\|^2
        = \| \langle x, y\rangle^* \langle x, y\rangle\|
        = \| \langle y,x \rangle\langle x,y\rangle \|
        \leq \bigl\| \|\langle x,x\rangle\| \langle y, y \rangle \bigr\|
        = \| x\|^2 \|y\|^2$,
        so indeed~$\|\langle x, y \rangle \| \leq \|x\|\|y\|$.

    Now we will show~$\|x\| \equiv \| \langle x,x\rangle\|^{\frac{1}{2}}$
    is a seminorm on~$X$.
    Clearly~$\|x\| \geq 0$ for any~$x \in X$.
For any~$\lambda \in \C$ and~$x \in X$
    we have~$\langle \lambda x, \lambda x \rangle
        = \overline\lambda \langle x, x \rangle \lambda
        = | \lambda |^2 \langle x,x\rangle$,
    hence~$
        \|\lambda x\|=
       \|\lambda^2 \langle x, x \rangle \|^{\frac{1}{2}} =
        |\lambda|  \|x\| $.
Next, for any~$x,y \in X$ we have
\begin{alignat*}{2}
    \| x + y \|^2 & \ = \  \| \langle x + y, x+y\rangle \| \\
    & \ \leq \ \| \langle x,x\rangle\| 
        + \| \langle y,y\rangle\|
        + \| \langle x, y \rangle \|
        + \| \langle x, y \rangle^* \| \\
    & \ = \ \|x\|^2 + \|y\|^2 + 2\|\langle x,y\rangle\| \\
    & \ \leq \ \|x\|^2 + \|y\|^2 + 2\|x\|\|y\| \\
    & \ =\ (\|x\| + \|y\|)^2
\end{alignat*}
and thus~$\|\,\cdot\,\|$ is indeed a seminorm.

Finally, we will show~$\|x \cdot b\| \leq \|x\|\|b\|$
    for any~$b\in \scrB$ and~$x \in X$.
As~$\langle x,x\rangle$ is positive,
    we have~$\langle x,x \rangle  \leq \|\langle x,x\rangle \|
            = \|x\|^2$.
Also recall~$a \mapsto b^* a b$ is clearly positive.
Thus~$\|x\cdot b\|^2 \equiv \|\langle xb, xb\rangle \|
        = \| b^* \langle x, x \rangle b\|
        \leq  \bigl\|
        \|x\|^2
        b^*b
        \bigr\|
        = \|b\|^2 \|x\|^2$ as desired.
\end{solution}
\begin{solution}{hilbmod-polarization}%
Let~$B$ be any~$\scrB$-sesquilinear form on a pre-Hilbert~$\scrB$-module~$X$
    for some C$^*$-algebra~$\scrB$.
    Distributing~$B$ in~$\sum_{k=0}^3 i^k B(i^k x+y, i^k x+y)$
    we get 16 terms
    consisting of four of each~$B(x,x)$, $B(y,y)$, $B(x,y)$ and $B(y,x)$
    with the following coefficients.
    \begin{center}
        \begin{tabular}{c|rrrr}
        & $B(x,x)$ & $B(y,y)$ & $B(x,y)$ & $B(y,x)$\\ \hline
        $k\,=\,0$ & $1$ & $1$ & $1$ & $1$ \\
        $k\,=\,1$ & $i\cdot (-i)\cdot i\,=\,i$ & $i$ & $i \cdot (-i)\,=\,1$ & $i^2 \,=\, -1$ \\
        $k\,=\,2$ & $(-1)^3\,=\,-1 $&$ -1 $&$ (-1)^2 \,=\,1$&$ (-1)^2\,=\,1$ \\
            $k\,=\,3$ & $(-i) \cdot i \cdot (-i)\,=\,-i $&$ -i $&$ (-i)\cdot i\,=\, 1$&$ (-i)^2\,=\,-1 $\\
    \end{tabular}
\end{center}
    Note that the coefficients in
    every column sum to~$0$, except for the coefficients for~$B(x,y)$ which
    sum to~$4$.
    Hence~$ \sum_{k=0}^3 i^k B(i^k x+y, i^k x+y) = 4B(x,y)$.
\end{solution}
\begin{solution}{exc-subbase}%
    Let~$X$ be a set together with a subbase~$B$.
    Write~$\Phi$ for the filter generated by~$B$.
    Note~$B \subseteq \Phi$.
    We will show~$(X,\Phi)$ is a uniform space, by proving
        its axioms in order.
\begin{enumerate}
    \item
        By construction~$\Phi$ is a filter.
    \item
        Pick any~$\varepsilon \in \Phi$.
        We have to show~$\Delta\equiv\{(x,x); \ x\in X\} \subseteq \varepsilon$.
        By definition of~$\Phi$, there
        are~$\varepsilon_1, \ldots, \varepsilon_n \in B$
        with~$\varepsilon_1 \cap \ldots \cap \varepsilon_n \subseteq \varepsilon$.
    By definition of a base, we have~$\Delta \subseteq \varepsilon_i$
        for each~$1 \leq i \leq n$
        and so~$\Delta \subseteq \varepsilon_1 \cap \ldots
        \cap \varepsilon_n \subseteq\varepsilon$ as well.
    \item
        Pick any~$\varepsilon \in \Phi$.
    By definition of~$\Phi$, there
        are~$\varepsilon_1, \ldots, \varepsilon_n \in B$
        with~$\varepsilon_1 \cap \ldots \cap
        \varepsilon_n \subseteq \varepsilon$.
    As~$B$ is a base, there are~$\delta_1, \ldots, \delta_n$
     with~$\delta_i \after \delta_i \subseteq \varepsilon_i$
        for~$1 \leq i \leq n$.
    Define~$\delta = \delta_1 \cap \ldots \cap \delta_n$.
        Then~$\delta \after \delta
            \subseteq \bigcap_{i,j} \delta_i \after \delta_j
            \subseteq \bigcap_i \delta_i \subseteq 
            \bigcap_i \varepsilon_i \subseteq \varepsilon$.
\item
        Pick any~$\varepsilon \in \Phi$.
    By definition of~$\Phi$, there
        are~$\varepsilon_1, \ldots, \varepsilon_n \in B$
        with~$\varepsilon_1 \cap \ldots \cap
        \varepsilon_n \subseteq \varepsilon$.
    As~$B$ is a base, there are~$\delta_1, \ldots, \delta_n$
        with~$\delta_i^{-1} \subseteq \varepsilon_i$.
    Define~$\delta = \delta_1 \cap \ldots \cap \delta_n$.
        Then~$\delta^{-1} =
            \bigcap_{i} \delta_i^{-1}  \subseteq
            \bigcap_i \varepsilon_i \subseteq \varepsilon$.
\end{enumerate}
    Thus indeed, $(X, \Phi)$ is a uniform space.
\end{solution}
\begin{solution}{dils-uniform-spaces-basics}%
We prove the subexercises in order.
\begin{enumerate}
\item
First we will show that equivalence of Cauchy nets is an equivalence
    relation.
As for every entourage~$\varepsilon$ we have~$x \mathrel\varepsilon x$,
    we see that every Cauchy net is equivalent to itself.
Assume~$(x_\alpha)_\alpha \sim (y_\beta)_\beta$.
        We will show~$(y_\beta)_\beta \sim (y_\alpha)_\alpha$.
Let~$\varepsilon$ be some entourage.
    There is some entourage~$\delta$ with~$\delta^{-1}\subseteq \varepsilon$.
        By assumption there are~$\alpha_0$ and~$\beta_0$
        such that~$x_\alpha \mathrel{\delta} y_\beta$
        for all~$\alpha \geq \alpha_0$ and~$\beta \geq \beta_0$.
    But then~$y_\beta \mathrel{\varepsilon} x_\alpha$
        for~$\alpha \geq \alpha_0$ and~$\beta \geq\beta_0$.
        Hence~$(y_\beta)_\beta \sim (x_\alpha)_\alpha$.
    To prove transitivity,
assume we are given Cauchy nets~$(x_\alpha)_\alpha \sim (y_\beta)_\beta 
            \sim (z_\gamma)_\gamma$.
Let~$\varepsilon$ be some entourage.
There is an entourage~$\delta$ with~$\delta \after \delta \subseteq \varepsilon$.
There are~$\alpha_0, \beta_0, \gamma_0$
    such that~$x_\alpha \mathrel\delta y_\beta $
            and~$y_\beta \mathrel\delta z_\gamma $
            for~$\alpha \geq \alpha_0$, $\beta \geq \beta_0$
            and~$\gamma \geq \gamma_0$.
        Hence~$x_\alpha \mathrel\varepsilon z_\gamma$ for such~$\alpha$ and~$\gamma$, which shows~$(x_\alpha)_\alpha \sim (z_\gamma)_\gamma$.

Next, assume that~$(x_\alpha)_\alpha$ is a subnet
        of a Cauchy net~$(y_\alpha)_\alpha$.
    To show~$(x_\alpha)_\alpha \sim (y_\alpha)_\alpha$,
            assume~$\varepsilon$ is some entourage.
    By the definition of Cauchy net,
            there is some~$\alpha_0$
            such that~$x_\alpha \mathrel{\varepsilon} x_\beta$
            for all~$\alpha,\beta \geq \alpha_0$.
    In particular~$x_\alpha \mathrel{\varepsilon} y_\beta$
        for all~$\alpha, \beta \geq \alpha_0$
        which shows~$(x_\alpha)_\alpha \sim (x_\beta)_\beta$.

\item
Assume~$(x_\alpha)_\alpha \sim (y_\beta)_\beta$
    and~$x_\alpha \to x$.
To prove $y_\alpha \to x$, pick any entourage~$\varepsilon$.
Pick~$\delta$ such that~$\delta^2 \subseteq \varepsilon$.
There are~$\alpha_0$ and~$\beta_0$
    such that~$y_\beta \mathrel\delta x_\alpha$
        and~$x_\alpha \mathrel\delta x$
        for all~$\alpha \geq \alpha_0 $ and~$\beta \geq \beta_0$.
    Then~$y_\beta \mathrel\varepsilon x$ for all~$\beta \geq \beta_0$,
        whence~$y_\beta \to x$.

\item
    Assume~$(x_\alpha)_\alpha \to x$ and~$(x_\alpha)_\alpha \to y$
            in some Hausdorff uniform space.
    Let~$\varepsilon$ be any entourage.
        Pick~$\delta$ and~$\delta'$ with~$\delta^2 \subseteq \varepsilon$
        and~$\delta'\subseteq \delta^{-1}$.
    There is an~$\alpha_0$ such that~$x_\alpha \mathrel\delta x$
        and~$x_\alpha \mathrel{\delta'} y$
        for all~$\alpha \geq \alpha_0$.
    Thus~$x \mathrel\varepsilon y$.
    As our space is Hausdorff the previous implies~$x=y$.
\item
    Let~$f\colon X\to Y$ be a continuous map between uniform spaces.
    Assume~$x_\alpha \to x$ in~$X$.
    Let~$\varepsilon$ be any entourage of~$Y$.
By continuity there is a~$\delta$
    such that~$x \mathrel\delta y$ implies~$f(x) \mathrel{\varepsilon} f(y)$
    for any~$y \in Y$.
There is an~$\alpha_0$ such that~$x \mathrel{\delta} x_\alpha$
    for all~$\alpha \geq \alpha_0$.
For those~$\alpha$ we also have~$f(x) \mathrel{\varepsilon} f(x_\alpha)$,
    which shows~$f(x_\alpha) \to f(x)$.
\item
    Let~$f\colon X\to Y$ be a uniformly continuous map
        between uniform spaces.
Let~$(x_\alpha)_\alpha$ and~$(y_\beta)_\beta$
    be nets of~$X$
    such that for each entourage~$\varepsilon$ of~$X$
        there are~$\alpha_0,\beta_0$ with~$x_\alpha \mathrel\varepsilon y_\beta$
        for all~$\alpha\geq\alpha_0$ and~$\beta \geq \beta_0$.
The map~$f$ preserves this relation between the nets
    in the following way.
Let~$\varepsilon$ be any entourage of~$Y$
By uniform continuity there is a~$\delta$
    such that~$x \mathrel\delta y$ implies~$f(x) \mathrel\varepsilon f(y)$.
There are~$\alpha_0$ and~$\beta_0$
    with~$x_\alpha \mathrel\delta y_\beta$ for all~$\alpha \geq\alpha_0$
    and~$\beta \geq\beta_0$.
    Hence~$f(x_\alpha) \mathrel\varepsilon f(y_\beta)$
        for such~$\alpha,\beta$.

From the previous it follows that~$f$
    preserves Cauchy nets (by setting~$x_\alpha=y_\alpha$)
    and that it preserves equivalence between Cauchy nets.
\item
Let~$D \subseteq X$ be a dense subset of a uniform space~$X$.
Let~$x \in X$ be any point.
Pick for every~$\varepsilon \in \Phi$
    an element~$d_\varepsilon \in D$
    with~$x \mathrel\varepsilon d_\varepsilon$.
Clearly~$(d_\varepsilon)_{\varepsilon\in\Phi}$ is a net with inverse
inclusion. We have~$d_\varepsilon \to x$
    as~$d_\delta \mathrel\varepsilon x$
    whenever~$\delta \subseteq \varepsilon$.
\item
Assume~$f,g\colon X \to Y$ are continuous maps between uniform
    spaces that agree on a dense subset~$D \subseteq X$.
Let~$x\in X$ be any point.
Pick a net~$x_\alpha$ from~$D$ with~$x_\alpha \to x$.
Then~$f(x) = f(\lim_\alpha x_\alpha) = \lim_\alpha f(x_\alpha)
    =  \lim_\alpha g(x_\alpha) = g(\lim_\alpha x_\alpha) = g(x)$.
    Hence~$f=g$.
\end{enumerate}
\end{solution}
\spacingfix
\begin{solution}{dils-product-uniformity}%
Write~$B \equiv \{ \hat\varepsilon; \ \varepsilon \in \Phi_i;\ i \in I\}$.
First we show~$B$ is a subbase,
    i.e.~that is satisfies conditions 2, 3 and 4
    of~\sref{dils-dfn-uniformity}.
Let~$\hat\varepsilon$ be an arbitrary element of~$B$
    and~$i \in I$ denote the index element with~$\varepsilon \in \Phi_i$.
    Assume~$(x_i)_{i \in I} \in \Pi_i X_i$.
Clearly~$x_i \mathrel\varepsilon x_i$
    and so~$(x_i)_i \mathrel{\hat\varepsilon} (x_i)_i$.
    Thus~$B$ satisfies condition 2 of~\sref{dils-dfn-uniformity}.
Pick a~$\delta \in \Phi_i$ with~$\delta^2 \subseteq \varepsilon$.
    Then~${\hat\delta}^2 =\widehat{\delta^2} \subseteq \hat{\varepsilon}$
    and so~$B$ satisfies condition 3 of~\sref{dils-dfn-uniformity}.
Now let~$\delta$ denote an entourage of~$X_i$
    with~$\delta^{-1} \subseteq \varepsilon$.
    Then~$\hat{\delta}^{-1} = \widehat{\delta^{-1}}
        \subseteq \hat{\varepsilon}$
        and so~$B$ also satisfies condition 4 of~\sref{dils-dfn-uniformity}.

Next we show that the projectors~$\pi_i \colon \prod_i X_i \to X_i$
    are uniformly continuous.
    Assume~$i_0 \in I$ and~$\varepsilon$ is an entourage of~$X_{i_0}$.
Define~$\delta \equiv \hat\varepsilon$.
    Let~$(x_i)_i$ and~$(y_i)_i$
        from~$\prod_i X_i$ be given
        with~$(x_i)_i \mathrel\delta (y_i)_i$.
    Then~$x_{i_0} \mathrel\varepsilon y_{i_0}$.
    Thus~$\pi_{i_0}$ is indeed uniformly continuous.

To show~$(\pi_i)_{i}$ is a categorical product,
    assume we are given a uniform space~$Y$ together
        with uniformly continuous maps~$f_i \colon Y \to X_i$
            for each~$i \in I$.
We have to show that there is a unique uniformly continuous 
    map~$f\colon Y \to \prod_i X_i$
        with~$\pi_i \after f = f_i$ for all~$i \in I$.
    Define~$f$ by~$(f(y))_i \equiv f_i (y)$.
    Clearly~$\pi_i \after f = f_i$.

    To show~$f$ is uniformly continuous,
        pick any entourage~$\varepsilon$ of~$\prod_i X_i$.
        By definition, there are~$i_1, \ldots, i_n$
            and~$\varepsilon_1, \ldots, \varepsilon_n$
            with~$\varepsilon_j \in \Phi_{i_j}$
            and~$\bigcap_j \widehat{\varepsilon_j} \subseteq \varepsilon$.
    For each~$1 \leq j \leq n$
        pick an entourage~$\delta_j$ of~$Y$
        such that~$x \mathrel\delta_j y$
        implies~$f_{i_j}(x) \mathrel{\varepsilon_j} f_{i_j}(y)$.
Define~$\delta \equiv \bigcap_j \delta_j$
    Assume~$x \mathrel\delta y$.
    Then for each~$1 \leq j \leq n$
        we have~$f_{i_j}(x) \mathrel{\varepsilon_j} f_{i_j}(y)$
            and so~$f(x) \mathrel{\widehat{\varepsilon_j}} f(y)$,
            hence~$f(x) \mathrel\varepsilon f(y)$.
        Thus~$f$ is uniformly continuous.

To show uniqueness of~$f$, assume there is a uniformly continuous
    map~$f'\colon Y \to \prod_i X_i$ with~$\pi_i \after f' = f_i$.
Then~$(f'(y))_i = f_i(y) = (f(y))_i$ for every~$y \in Y$
    and so~$f' = f$.
\end{solution}
\begin{solution}{ultranormscalar}%
    Let~$\scrB$ be a von Neumann algebra and~$X$
        a right $\scrB$-module with~$\scrB$-valued inner product.
    We will show that~$x \mapsto xb$ is ultranorm continuous
        for any~$b \in \scrB$.
    It is sufficient to show it is ultranorm continuous at~$0$,
        so assume~$x_\alpha \to 0$ ultranorm for some net~$x_\alpha$ in~$X$.
Let~$f\colon \scrB \to \C$ be any np-map.
    Then~$\|x_\alpha b\|_f^2  
        = f([x_\alpha b, x_\alpha b])
        = f(b^* [x_\alpha , x_\alpha ]b)
        \leq \|b^*b\| f([x_\alpha, x_\alpha])
        = \|b\|^2 \|x_\alpha \|_f^2 \to 0$
        thus~$x_\alpha b \to 0$ ultranorm as well.
\end{solution}
\begin{solution}{mod-projelabs}%
For brevity, write~$p \equiv \langle e,e\rangle$.
Note~$\| e p - e\|^2
    = \| e (1-p) \|^2
    = \langle e (1 - p), e (1-p) \rangle
    = (1-p) \langle e,e\rangle (1-p)
    = (1-p) p (1-p) = 0$.
Thus~$ep - e= 0$ and so~$ep = e$ as desired.
\end{solution}
\begin{solution}{mod-parseval}%
Let~$X$ be a pre-Hilbert~$\scrB$-module for a von Neumann algebra~$\scrB$
    with orthonormal basis~$E \subseteq X$.
Assume~$x \in X$.
By definition of orthonormal basis,
    we know~$x = \sum_{e \in E} e \langle e,x\rangle$
    where the sum converges ultranorm.
That is: $\sum_{e \in S} e \langle e,x\rangle \to x$
    as~$S$ ranges over the finite subsets of~$E$.
    By~\sref{innerprod-ultraweak}
        we
        see~$
        \bigl\langle
        \sum_{e \in S} e \langle e,x\rangle,
        \sum_{e \in S} e \langle e,x\rangle \bigr\rangle
        \to \langle x, x\rangle $ ultraweakly.
Thus~$\sum_{e \in S} \langle x,e\rangle\langle e, x\rangle
    = \sum_{e,d \in S} \langle x,e\rangle\langle e,d\rangle\langle d, x\rangle
    =
        \bigl\langle
        \sum_{e \in S} e \langle e,x\rangle,
        \sum_{e \in S} e \langle e,x\rangle \bigr\rangle
        \to \langle x, x\rangle $ ultraweakly, as desired.
\end{solution}
\begin{solution}{hilbmod-adjoint-exists}%
Let~$T\colon X\to Y$ be a bounded~$\scrB$-linear map between Hilbert~$\scrB$-modules.
Assume~$X$ is self dual.
For any~$y \in Y$, the map~$x \mapsto \langle y, Tx\rangle$
    is~$\scrB$-linear and bounded
    and so by self-duality of~$X$,
    there is a~$t_y \in X$
    with~$\langle t_y, x \rangle = \langle y, Tx\rangle$
    for all~$x \in X$.
For any~$z,y \in Y$ and~$x \in X$,
        we have~$\langle t_z + t_y, x\rangle
            = \langle t_z, x\rangle + \langle t_y, x\rangle
            = \langle z, Tx\rangle + \langle y, Tx \rangle
            = \langle z + y, Tx \rangle
            = \langle t_{z+y}, x\rangle$.
        Thus~$t_z + t_y = t_{z+y}$
For any~$\lambda \in \C$, $y \in Y$ and~$x \in X$
    we have~$\langle \lambda t_y, x \rangle
        =  \langle \lambda y, T x\rangle
        = \langle t_{\lambda y}, x \rangle$
        and so~$\lambda t_y = t_{\lambda y}$.
Hence~$T^* y \equiv t_y$ defines a linear map from~$Y$ to~$X$
    with~$\langle y, Tx\rangle = \langle t_y, x\rangle
    \equiv \langle T^*y, x \rangle$ for all~$x\in X$ and~$y \in Y$.
So~$T^*$ is the adjoint of~$T$.
\end{solution}
\begin{solution}{hilmod-fixed-on-V}%
    Let~$V$ be a right~$\scrB$-module with~$\scrB$-valued inner product
        for some von Neumann algebra~$\scrB$.
    Write~$\eta\colon V \to X$ for the ultranorm completion of~$V$
        from~\sref{dils-completion}.
    Let~$T \in \scrB^a(X)$ be given
        with~$\langle \hat{x}, T \hat{x} \rangle \geq 0$
        for all~$x \in V$.
    We have to show~$T \geq 0$.
    Let~$x \in X$ be an arbitrary vector.
    As all vector states on~$\scrB^a(X)$ are order separating
        by~\sref{hilbmod-denseordersep},
        it is sufficient to show~$\langle x, Tx \rangle \geq 0$.
As the image of~$V$ under~$\eta$ is ultranorm dense in~$X$,
    we can find find a net~$x_\alpha$ with~$\widehat{x_\alpha} \to x$.
Then by~\sref{innerprod-ultraweak}
    we get~$\langle x, Tx\rangle = \uwlim_\alpha \langle \widehat{x_\alpha},
            T\widehat{x_\alpha}\rangle \geq 0$.
            So indeed~$T \geq 0$, as desired.
\end{solution}
\begin{solution}{hilbmod-adj-vector-ncp}%
   Let~$\scrA$ be a C$^*$-algebra
        with~$a_1, \ldots, a_n \in \scrA$.
    Define~$\varphi \colon \scrA \to M_n \scrA$
        by~$\varphi(d) \equiv (a_i^* d a_j)_{ij}$.
        We have to show~$\varphi$ is an ncp-map.
Recall~$\scrA$ is a self-dual Hilbert~$\scrA$-module
    with~$\langle a,b\rangle \equiv a^*b$
    and so its~$n$-fold direct product~$\scrA^n$
    is also self dual (see also \sref{direct-prod-self-dual-basis}.)
Define~$T\colon \scrA^n \to \scrA$
    by~$T((b_i)_i) \equiv \sum_i b_i a_i$
    (i.e.~$T$ is the row-vector~$(a_i)_i$.)
Clearly~$T$ is~$\scrA$-linear.
    It is also bounded: $\| T (b_i)_i \|^2 = \sum_i \|b_i a_i\|^2
        \leq \sum_i A \|b_i\|^2 = A \| (b_i)_i\|^2 $,
            where~$A \equiv \max_i \|a_i\|^2$.
    It's easy that~$T^*(b) \equiv (a_i^* b)_i$ is the adjoint of~$T$.
We may identify~$\scrB^a(\scrA^n) = M_n$
    and then~$\ad_T(d)\,  ((b_i)_i) = T^* d T (b_i)_i
                =  T^* d \sum_i a_i b_i
                = (\sum_i (a_j^* d a_i) b_i)_j 
                = \varphi(d) \, ((b_i)_i)$.
Thus~$\ad_T = \varphi$.
    By~\sref{hilbmod-ad-ncp} the map~$\ad_T$ and thus~$\varphi$ is as well.
\end{solution}
\begin{solution}{direct-prod-self-dual-basis}%
    Assume~$X$ and~$Y$ are self-dual Hilbert~$\scrB$-modules over a
        von Neumann algebra~$\scrB$ with orthonormal bases~$E \subseteq X$
        and~$F \subseteq Y$.
Write~$G \equiv \{(e,0); \ e \in E\} \cup \{ (0,d); \ d \in D \}$.
Clearly~$G$ is orthonormal.
To show~$G$ is an orthonormal basis,
    two conditions remain.
For the first, let~$(x,y) \in X \oplus Y$ be given.
As~$E$ and~$F$ are orthonormal bases
    we know~$x = \sum_{e\in E} e \langle e,x\rangle$
    and~$y = \sum_{f \in F} f \langle f,x\rangle$,
    where the sums converge ultranorm.
    The inclusions~$x \mapsto (x,0)$ and~$y \mapsto (0,y)$
        are bounded~$\scrB$-linear and thus ultranorm continuous,
        hence
\begin{align*}
        \sum_{g\in G} g \langle g, (x,y)\rangle
        &\ =\  \Bigl(\sum_{e\in E}
                        (e,0) \langle (e,0), (x,y) \rangle \Bigr)  \ +\ 
                        \Bigl( \sum_{f \in F} 
                        (0,f) \langle (0,f), (x,y) \rangle \Bigr) \\
        &\ =\  \Bigl(\sum_{e\in E}
                        (e,0) \langle e, x \rangle \Bigr) \ + \ 
                        \Bigl( \sum_{f \in F} 
                        (0,f) \langle f, y \rangle \Bigr) \\
        &\ =\  \Bigl(\sum_{e \in E} e \langle e,x \rangle ,
                \sum_{f \in F} f \langle f, y \rangle  \Bigr)\\
                    & \ =\ (x,y),
\end{align*}
which proves the first condition.
    For the second condition, let~$(b_g)_{g\in G}$
    be some~$\ell^2$-summable family from~$\scrB$.
The subfamilies~$(b_{e_0})_{e \in E}$
    and~$(b_{0,f})_{f \in F}$
    are~$\ell^2$-summable as well.
Hence the
    sums~$\sum_{e \in E} e b_{(e,0)}$
    and~$\sum_{f \in F} f b_{(0,f)}$ converge ultranorm.
Thus~$\sum_{e \in E} (e,0) b_{(e,0)}
    + \sum_{f \in F} (0,f) b_{(0,f)}
    =\sum_{g \in G} g b_g$ converges ultranorm as well.
We have shown~$G$ is an orthonormal basis of~$X\oplus Y$.
Consequently~$X \oplus Y$ is self dual
    by~\sref{dils-selfdual}.
\end{solution}
\begin{solution}{selfdual-orthn-basis}%
    Assume~$X$ is a self-dual Hilbert~$\scrB$-module for a von Neumann
    algebra~$\scrB$. Suppose~$E \subseteq X$ is an orthonormal set.
We will show~$E$ is an orthonormal basis of~$E^{\perp\perp}$.
Clearly~$E$ is orthonormal.
    Because of this, and the fact that~$E^{\perp\perp}$ is ultranorm
        closed (by~\sref{hilbmod-projthm}) 
        we know~$\sum_e b b_e$ converges ultranorm in~$E^{\perp\perp}$
        for any~$\ell^2$-family $(b_e)_e$.
Assume~$x \in E^{\perp\perp}$.
To show~$E$ is an orthonromal base,
    it only remains to be shown that~$x = \sum_e e \langle e, x\rangle$.
Define~$x' \equiv x - \sum_e e \langle e, x\rangle$.
By~\sref{hilbmod-projthm} we know~$E^{\perp\perp}$ is ultranorm closed
    and so~$x' \in E^{\perp\perp}$.
For any~$e_0\in E$
    we also have~$\langle e_0, x'\rangle = \langle e_0,x \rangle
            - \sum_{e \in E} \langle e_0, e\rangle\langle e, x\rangle
            = 0 $ and so~$x' \in E^{\perp}$.
    Hence~$\langle x',x'\rangle = 0$, so indeed~$x = \sum_e e\langle e, x\rangle$
        and~$E$ is an orthonormal basis of~$E^{\perp\perp}$.

For the second part, assume~$x \in X$.
    By Parseval's identity (see \sref{mod-parseval})
        we have~$\langle x, x\rangle = \sum_e \langle x,e \rangle\langle e,x\rangle$
        for any~$x \in E^{\perp\perp}$.
To prove the converse,
    assume~$\langle x, x\rangle = \sum_e \langle x,e \rangle\langle e,x\rangle$.
By~\sref{hilbmod-projthm} we know~$x = x' + x''$
    for~$x' \in E^{\perp\perp}$  and~$x'' \in E^\perp$.
Note~$\langle e, x' \rangle = \langle e, x\rangle$ for any~$e \in E$
    and so by Parseval's identity for~$E^{\perp\perp}$
    we see~$\langle x',x'\rangle = \sum_e \langle x, e\rangle\langle e, x\rangle
        = \langle x, x\rangle$.
Now, using~$\langle x'',x'\rangle = 0$
    we see~$\langle x,x\rangle = \langle x'', x''\rangle + \langle x', x'\rangle
        = \langle x'', x''\rangle + \langle x, x\rangle$
        and so~$\langle x'', x''\rangle=0$, whence~$x \in E^{\perp\perp}$.
\end{solution}
\begin{solution}{selfdual-gramschmidt}%
    Let~$X$ be a self-dual Hilbert~$\scrB$-module
        for some von Neumann algebra~$\scrB$.
    Assume~$x_1, \ldots, x_n \in X$.
We will show that there is a finite orthonormal set~$E$
    of~$n$ or fewer elements such that~$E$ is a
    basis of~$\{x_1, \ldots, x_n\}^{\perp\perp}$.
We do this by induction over~$n$.
For~$n=0$, the set~$E = \emptyset$ suffices.
For the induction step,
    assume~$n > 0$ and~$E'$ is an
    orthonormal basis of~$\{x_1, \ldots, x_{n-1}\}^{\perp\perp}$.
    Write~$x' \equiv x_n - \sum_{e\in E'} e\langle e,x_n\rangle$. 
If~$x'=0$, then~$E \equiv E'$ suffices.
For the other case, assume~$x' \neq 0$.
    By polar decomposition (see the end of~\sref{selfdual-bcompl-then-basis}),
    there is an~$u \in X$
    with~$x' = u\langle x',x'\rangle^{\frac{1}{2}}$
    and~$\langle u, u \rangle = \ceil{\langle x',x'\rangle}$.
Define~$E \equiv E' \cup \{ u \}$.
Clearly~$E$ is an othonormal set of~$n$ or fewer elements.
    By the induction assumption
    and~\sref{selfdual-orthn-basis},
    we know~$x_i \in E'^{\perp\perp} \subseteq E^{\perp\perp}$ for~$i \leq 1 \neq n-1$.
For any~$d \in E^\perp$
    we have~$\langle d, x'\rangle =
    \langle d, u \rangle \langle x',x'\rangle^{\frac{1}{2}} = 0$
    and so~$x' \in E^{\perp\perp}$.
    Clearly~$\sum_{e \in E'}e \langle e,x_n \rangle \in E'^{\perp\perp}
        \subseteq E^{\perp\perp}$
        and so~$x_n = x' + \sum_{e \in E'} e \langle e,x_n\rangle \in
            E^{\perp\perp}$.
    Together with the previous,
    we see~$\{x_1, \ldots, x_n\}^{\perp\perp} \subseteq E^{\perp\perp\perp\perp}
        = E^{\perp\perp} \subseteq \{x_1, \ldots, x_n\}^{\perp\perp}$,
        thus~$E^{\perp\perp} = \{ x_1, \ldots, x_n\}^{\perp\perp}$.
    By~\sref{selfdual-orthn-basis}
        we know~$E$ is an orthonormal basis of~$E^{\perp\perp}$,
        which completes the proof by induction.
\end{solution}

\backmatter
\fancyfoot[CE]{}
\fancyfoot[CO]{}
\fancypagestyle{plain}{
    \fancyfoot[CE]{}
    \fancyfoot[CO]{}
}

\begingroup
\renewcommand\chapter[2]{\backmattertitle{Bibliography}}
\bibliography{main}{}
\endgroup

\bibliographystyle{plain}

\end{document}

% vim: se ft=tex.latex :
